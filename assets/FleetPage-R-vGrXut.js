import{Q as ut}from"./QPage-BYT7qvp1.js";import{o as Te,v as ea,u as ta,w as He,x as ct,y as aa,s as na,f as oa,z as dt,A as la,B as ra,C as sa,D as ia,h as ua,E as ca,F as mt,G as da,q as ft,g as ma,H as fa,p as ge,I as Mt,J as ga,c as me,K as va,L as ba,n as pa}from"./QInput-CFC1XhfP.js";import{g as P,h as ee,b as te,a as Ft,Q as $e,L as ya}from"./LoadingAnimation-DvM0GF_L.js";import{bh as Z,bi as ha,bj as V,bk as je,bl as Tt,bm as wa,bn as ka,bo as gt,B as _a,bp as Sa,a0 as I,E as w,ae,a2 as g,ad as $,a5 as c,b5 as ne,ai as O,be as m,bq as ie,bf as W,a3 as y,a4 as v,aa as x,a7 as T,w as Ee,x as u,y as F,z as et,F as ke,G as We,au as vt,aq as bt,av as xa,I as tt,at as $t,P as U,ab as h,a9 as q,a8 as ue,al as se,br as Ca,bs as Ge,as as Aa,U as Ma,a6 as ye,ak as Ye,J as qt,bt as Et,K as Ie,bu as Fa,bv as Ta,b0 as G,bw as pt,af as Je,b1 as X,ba as fe,a$ as $a,bx as qa,aC as Ea,b4 as Ia}from"./index-BY-KNbgh.js";import{G as oe,b as It,Q as he,c as yt,a as Lt,d as La,e as ht,_ as wt}from"./InfoBanner.vue_vue_type_script_setup_true_lang-CKAfTJXH.js";import{Q as Ze}from"./QCardSection-C2-B6KXw.js";import{Q as Le,b as Ba,a as Da,u as Va}from"./QCard-DL9h0O9L.js";import{Q as Pa}from"./QSpace-DBEuuGHq.js";import{Q as kt}from"./QExpansionItem-BdDaBZD-.js";import{_ as Bt}from"./HeaderBanner.vue_vue_type_script_setup_true_lang-CrH-yIWM.js";import{T as Na,Q as Oa}from"./QBadge-C0wmy3m6.js";import"./use-checkbox-qgZ18kRg.js";import"./QImg-BfP5kxka.js";import"./touch-BjYP5sR0.js";var Xe;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Mint=1]="Mint",t[t.Account=2]="Account"})(Xe||(Xe={}));const Ua=1,Ra=Z.struct([Z.u8("m"),Z.u8("n"),ha("isInitialized"),V("signer1"),V("signer2"),V("signer3"),V("signer4"),V("signer5"),V("signer6"),V("signer7"),V("signer8"),V("signer9"),V("signer10"),V("signer11")]),za=Ra.span;var qe;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initialized=1]="Initialized",t[t.Frozen=2]="Frozen"})(qe||(qe={}));const Dt=Z.struct([V("mint"),V("owner"),je("amount"),Z.u32("delegateOption"),V("delegate"),Z.u8("state"),Z.u32("isNativeOption"),je("isNative"),je("delegatedAmount"),Z.u32("closeAuthorityOption"),V("closeAuthority")]),pe=Dt.span;async function _t(t,a,i,l=Tt){const e=await t.getAccountInfo(a,i);return Qa(a,e,l)}function Qa(t,a,i=Tt){if(!a)throw new wa;if(!a.owner.equals(i))throw new ka;if(a.data.length<pe)throw new gt;const l=Dt.decode(a.data.slice(0,pe));let e=_a.alloc(0);if(a.data.length>pe){if(a.data.length===za)throw new gt;if(a.data[pe]!=Xe.Account)throw new Sa;e=a.data.slice(pe+Ua)}return{address:t,mint:l.mint,owner:l.owner,amount:l.amount,delegate:l.delegateOption?l.delegate:null,delegatedAmount:l.delegatedAmount,isInitialized:l.state!==qe.Uninitialized,isFrozen:l.state===qe.Frozen,isNative:!!l.isNativeOption,rentExemptReserve:l.isNativeOption?l.isNative:null,closeAuthority:l.closeAuthorityOption?l.closeAuthority:null,tlvData:e}}const Ha={class:"row q-gutter-x-xs"},ja=I({__name:"FleetCreateAction",setup(t){const a=w(""),i=ae();async function l(){const e=P(),n=[],r=new oe(P());try{if(!a.value.length)throw Error("Input FleetName is required");const s=m().starbaseTokenAccountsSelected[0].mint,k=m().starbaseTokenAccountsSelected[0].uiAmountSelected;n.push(...r.createNewFleetIx(s,k,a.value)),n.length>0&&await ee("Create fleet...",n,e,te.DEFAULT_FEE),m().fleets=await ie()}catch(s){i.notify({type:"warning",message:"warning",caption:s.toString(),position:"bottom-right"})}}return(e,n)=>(g(),$("div",Ha,[c(Te,{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=r=>a.value=r),class:"col",label:"Fleet Name",standout:""},null,8,["modelValue"]),c(O,{color:"primary",label:"Form new fleet",onClick:ne(l,["prevent"])})]))}}),Ga=I({__name:"FleetCreateView",setup(t){const a=W(),i=m();return(l,e)=>(g(),y(Le,{flat:""},{default:v(()=>[c(Ze,null,{default:v(()=>[x(i).starbaseTokenAccountsSelected?(g(),y(ja,{key:0})):T("",!0)]),_:1}),x(a).walletTokenAccounts?(g(),y(It,{key:0,rows:x(i).starbaseTokenAccounts?.filter(n=>n.itemType==="ship"),"item-type":"ship",selection:"single"},null,8,["rows"])):T("",!0)]),_:1}))}}),St=Ee({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(t,{slots:a}){const i=u(()=>{const l=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(e=>t[e]===!0).map(e=>`q-btn-group--${e}`).join(" ");return`q-btn-group row no-wrap${l.length!==0?" "+l:""}`+(t.spread===!0?" q-btn-group--spread":" inline")});return()=>F("div",{class:i.value},et(a.default))}}),we=Ee({name:"QTr",props:{props:Object,noHover:Boolean},setup(t,{slots:a}){const i=u(()=>"q-tr"+(t.props===void 0||t.props.header===!0?"":" "+t.props.__trClass)+(t.noHover===!0?" q-tr--no-hover":""));return()=>F("tr",{class:i.value},et(a.default))}}),ve=Ee({name:"QTooltip",inheritAttrs:!1,props:{...ea,...ta,...He,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...He.transitionShow,default:"jump-down"},transitionHide:{...He.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:ct},self:{type:String,default:"top middle",validator:ct},offset:{type:Array,default:()=>[14,14],validator:aa},scrollTarget:na,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...oa],setup(t,{slots:a,emit:i,attrs:l}){let e,n;const r=tt(),{proxy:{$q:s}}=r,k=w(null),M=w(!1),p=u(()=>dt(t.anchor,s.lang.rtl)),d=u(()=>dt(t.self,s.lang.rtl)),f=u(()=>t.persistent!==!0),{registerTick:_,removeTick:L}=la(),{registerTimeout:N}=Ba(),{transitionProps:Q,transitionStyle:R}=ra(t),{localScrollTarget:z,changeScrollEvent:A,unconfigureScrollTarget:H}=sa(t,Me),{anchorEl:E,canShow:Be,anchorEvents:j}=ia({showing:M,configureAnchorEl:Ve}),{show:_e,hide:Y}=ua({showing:M,canShow:Be,handleShow:De,handleHide:xe,hideOnRouteChange:f,processOnMount:!0});Object.assign(j,{delayShow:de,delayHide:Ae});const{showPortal:ce,hidePortal:le,renderPortal:Se}=ca(r,k,Ne,"tooltip");if(s.platform.is.mobile===!0){const B={anchorEl:E,innerRef:k,onClickOutside(K){return Y(K),K.target.classList.contains("q-dialog__backdrop")&&$t(K),!0}},be=u(()=>t.modelValue===null&&t.persistent!==!0&&M.value===!0);ke(be,K=>{(K===!0?fa:mt)(B)}),We(()=>{mt(B)})}function De(B){ce(),_(()=>{n=new MutationObserver(()=>re()),n.observe(k.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),re(),Me()}),e===void 0&&(e=ke(()=>s.screen.width+"|"+s.screen.height+"|"+t.self+"|"+t.anchor+"|"+s.lang.rtl,re)),N(()=>{ce(!0),i("show",B)},t.transitionDuration)}function xe(B){L(),le(),Ce(),N(()=>{le(!0),i("hide",B)},t.transitionDuration)}function Ce(){n!==void 0&&(n.disconnect(),n=void 0),e!==void 0&&(e(),e=void 0),H(),vt(j,"tooltipTemp")}function re(){da({targetEl:k.value,offset:t.offset,anchorEl:E.value,anchorOrigin:p.value,selfOrigin:d.value,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function de(B){if(s.platform.is.mobile===!0){ft(),document.body.classList.add("non-selectable");const be=E.value,K=["touchmove","touchcancel","touchend","click"].map(Fe=>[be,Fe,"delayHide","passiveCapture"]);bt(j,"tooltipTemp",K)}N(()=>{_e(B)},t.delay)}function Ae(B){s.platform.is.mobile===!0&&(vt(j,"tooltipTemp"),ft(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),N(()=>{Y(B)},t.hideDelay)}function Ve(){if(t.noParentEvent===!0||E.value===null)return;const B=s.platform.is.mobile===!0?[[E.value,"touchstart","delayShow","passive"]]:[[E.value,"mouseenter","delayShow","passive"],[E.value,"mouseleave","delayHide","passive"]];bt(j,"anchor",B)}function Me(){if(E.value!==null||t.scrollTarget!==void 0){z.value=ma(E.value,t.scrollTarget);const B=t.noParentEvent===!0?re:Y;A(z.value,B)}}function Pe(){return M.value===!0?F("div",{...l,ref:k,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",l.class],style:[l.style,R.value],role:"tooltip"},et(a.default)):null}function Ne(){return F(xa,Q.value,Pe)}return We(Ce),Object.assign(r.proxy,{updatePosition:re}),Se}}),Ka=I({__name:"FleetShipAddAction",props:{fleet:{type:U,required:!0}},setup(t){const a=ae(),i=t;async function l(){const e=P(),n=[],r=new oe(e);try{m().starbaseTokenAccountsSelected?.forEach(s=>{n.push(...r.addShipsToFleetIx(i.fleet,s?.mint,s?.uiAmountSelected))}),n.length>0&&await ee("Add Ships to fleet",n,e,te.DEFAULT_FEE),m().fleets=await ie()}catch(s){a.notify({type:"warning",message:"warning",caption:s.toString(),position:"bottom-right"})}}return(e,n)=>(g(),y(O,{class:"full-width",color:"secondary",label:"Add",onClick:ne(l,["prevent"])}))}}),Wa=I({__name:"FleetShipDisbandAction",props:{fleet:{type:U,required:!0}},setup(t){const a=ae(),i=t;async function l(){const e=P(),n=[],r=new oe(P());try{n.push(...await r.disbandFleetIx(i.fleet)),n.length>0&&await ee("Disband fleet",n,e,te.DEFAULT_FEE),m().fleets=await ie()}catch(s){a.notify({type:"warning",message:"warning",caption:s.toString(),position:"bottom-right"})}}return(e,n)=>(g(),y(O,{class:"full-width",color:"secondary",label:"Disband",onClick:ne(l,["prevent"])}))}}),Ya={class:"col text-center"},Ja=I({__name:"HeaderBanner2",props:{text:{type:String,default:"none"},caption:{type:String,default:"none"}},setup(t){const a=t;return(i,l)=>(g(),y(Le,{class:"text-h6 row q-gutter-x-md q-ma-md",flat:""},{default:v(()=>[h("div",null,q(a.text),1),h("div",Ya,q(a.caption),1)]),_:1}))}}),Za=I({__name:"FleetShipDialog",props:{name:{type:String,default:"none"},fleet:{type:U,required:!0}},setup(t){const a=w(!1),i=w("add"),l=t;return ke(()=>a.value,async()=>{await m().updateStore(),m().starbaseTokenAccountsSelected=void 0}),(e,n)=>(g(),$(se,null,[c(O,{color:"primary",icon:"workspaces",onClick:n[0]||(n[0]=r=>a.value=!0)},{default:v(()=>[c(ve,null,{default:v(()=>n[3]||(n[3]=[ue("Fleet")])),_:1})]),_:1}),c(Mt,{modelValue:a.value,"onUpdate:modelValue":n[2]||(n[2]=r=>a.value=r),"full-width":"","transition-hide":"rotate","transition-show":"rotate"},{default:v(()=>[c(Le,{bordered:"",flat:""},{default:v(()=>[c(Ja,{caption:l.name,text:"Fleet "},null,8,["caption"]),c(ge),c(Ft,{modelValue:i.value,"onUpdate:modelValue":n[1]||(n[1]=r=>i.value=r),"active-bg-color":"primary",align:"justify","inline-label":""},{default:v(()=>[c($e,{label:"Add",name:"add"}),c($e,{label:"Disband",name:"disband"})]),_:1},8,["modelValue"]),c(ge),c(Ze,null,{default:v(()=>[i.value==="add"&&x(W)().walletTokenAccounts?(g(),y(It,{key:0,rows:x(m)().starbaseTokenAccounts?.filter(r=>r.itemType=="ship"),"item-type":"ship",selection:"multiple"},null,8,["rows"])):T("",!0)]),_:1}),c(Ze,{class:"row"},{default:v(()=>[c(Pa),i.value=="add"?(g(),y(Ka,{key:0,fleet:t.fleet},null,8,["fleet"])):T("",!0),i.value=="disband"?(g(),y(Wa,{key:1,fleet:t.fleet},null,8,["fleet"])):T("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),xt="q-slider__marker-labels",Xa=t=>({value:t}),en=({marker:t})=>F("div",{key:t.value,style:t.style,class:t.classes},t.label),Vt=[34,37,40,33,39,38],tn={...Va,...ga,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},an=["pan","update:modelValue","change"];function nn({updateValue:t,updatePosition:a,getDragging:i,formAttrs:l}){const{props:e,emit:n,slots:r,proxy:{$q:s}}=tt(),k=Da(e,s),M=va(l),p=w(!1),d=w(!1),f=w(!1),_=w(!1),L=u(()=>e.vertical===!0?"--v":"--h"),N=u(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),Q=u(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(s.lang.rtl===!0)),R=u(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),z=u(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),A=u(()=>e.disable!==!0&&e.readonly!==!0&&R.value<z.value),H=u(()=>{if(e.step===0)return b=>b;const o=(String(e.step).trim().split(".")[1]||"").length;return b=>parseFloat(b.toFixed(o))}),E=u(()=>e.step===0?1:e.step),Be=u(()=>A.value===!0?e.tabindex||0:-1),j=u(()=>e.max-e.min),_e=u(()=>z.value-R.value),Y=u(()=>Oe(R.value)),ce=u(()=>Oe(z.value)),le=u(()=>e.vertical===!0?Q.value===!0?"bottom":"top":Q.value===!0?"right":"left"),Se=u(()=>e.vertical===!0?"height":"width"),De=u(()=>e.vertical===!0?"width":"height"),xe=u(()=>e.vertical===!0?"vertical":"horizontal"),Ce=u(()=>{const o={role:"slider","aria-valuemin":R.value,"aria-valuemax":z.value,"aria-orientation":xe.value,"data-step":e.step};return e.disable===!0?o["aria-disabled"]="true":e.readonly===!0&&(o["aria-readonly"]="true"),o}),re=u(()=>`q-slider q-slider${L.value} q-slider--${p.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(A.value===!0?" q-slider--editable":""))+(f.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(k.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+L.value:""));function de(o){const b="q-slider__"+o;return`${b} ${b}${L.value} ${b}${L.value}${N.value}`}function Ae(o){const b="q-slider__"+o;return`${b} ${b}${L.value}`}const Ve=u(()=>{const o=e.selectionColor||e.color;return"q-slider__selection absolute"+(o!==void 0?` text-${o}`:"")}),Me=u(()=>Ae("markers")+" absolute overflow-hidden"),Pe=u(()=>Ae("track-container")),Ne=u(()=>de("pin")),B=u(()=>de("label")),be=u(()=>de("text-container")),K=u(()=>de("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),Fe=u(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),Pt=u(()=>{const o={[De.value]:e.trackSize};return e.trackImg!==void 0&&(o.backgroundImage=`url(${e.trackImg}) !important`),o}),Nt=u(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),at=u(()=>{const o=ce.value-Y.value,b={[le.value]:`${100*Y.value}%`,[Se.value]:o===0?"2px":`${100*o}%`};return e.innerTrackImg!==void 0&&(b.backgroundImage=`url(${e.innerTrackImg}) !important`),b});function Ot(o){const{min:b,max:S,step:C}=e;let D=b+o*(S-b);if(C>0){const J=(D-R.value)%C;D+=(Math.abs(J)>=C/2?(J<0?-1:1)*C:0)-J}return D=H.value(D),me(D,R.value,z.value)}function Oe(o){return j.value===0?0:(o-e.min)/j.value}function Ut(o,b){const S=Aa(o),C=e.vertical===!0?me((S.top-b.top)/b.height,0,1):me((S.left-b.left)/b.width,0,1);return me(Q.value===!0?1-C:C,Y.value,ce.value)}const nt=u(()=>Ca(e.markers)===!0?e.markers:E.value),ot=u(()=>{const o=[],b=nt.value,S=e.max;let C=e.min;do o.push(C),C+=b;while(C<S);return o.push(S),o}),lt=u(()=>{const o=` ${xt}${L.value}-`;return xt+`${o}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${o}${Q.value===!0?"rtl":"ltr"}`}),Ue=u(()=>e.markerLabels===!1?null:zt(e.markerLabels).map((o,b)=>({index:b,value:o.value,label:o.label||o.value,classes:lt.value+(o.classes!==void 0?" "+o.classes:""),style:{...st(o.value),...o.style||{}}}))),rt=u(()=>({markerList:Ue.value,markerMap:Qt.value,classes:lt.value,getStyle:st})),Rt=u(()=>{const o=_e.value===0?"2px":100*nt.value/_e.value;return{...at.value,backgroundSize:e.vertical===!0?`2px ${o}%`:`${o}% 2px`}});function zt(o){if(o===!1)return null;if(o===!0)return ot.value.map(Xa);if(typeof o=="function")return ot.value.map(S=>{const C=o(S);return Ge(C)===!0?{...C,value:S}:{value:S,label:C}});const b=({value:S})=>S>=e.min&&S<=e.max;return Array.isArray(o)===!0?o.map(S=>Ge(S)===!0?S:{value:S}).filter(b):Object.keys(o).map(S=>{const C=o[S],D=Number(S);return Ge(C)===!0?{...C,value:D}:{value:D,label:C}}).filter(b)}function st(o){return{[le.value]:`${100*(o-e.min)/j.value}%`}}const Qt=u(()=>{if(e.markerLabels===!1)return null;const o={};return Ue.value.forEach(b=>{o[b.value]=b}),o});function Ht(){if(r["marker-label-group"]!==void 0)return r["marker-label-group"](rt.value);const o=r["marker-label"]||en;return Ue.value.map(b=>o({marker:b,...rt.value}))}const jt=u(()=>[[Na,Gt,void 0,{[xe.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Gt(o){o.isFinal===!0?(_.value!==void 0&&(a(o.evt),o.touch===!0&&t(!0),_.value=void 0,n("pan","end")),p.value=!1,f.value=!1):o.isFirst===!0?(_.value=i(o.evt),a(o.evt),t(),p.value=!0,n("pan","start")):(a(o.evt),t())}function it(){f.value=!1}function Kt(o){a(o,i(o)),t(),d.value=!0,p.value=!0,document.addEventListener("mouseup",Re,!0)}function Re(){d.value=!1,p.value=!1,t(!0),it(),document.removeEventListener("mouseup",Re,!0)}function Wt(o){a(o,i(o)),t(!0)}function Yt(o){Vt.includes(o.keyCode)&&t(!0)}function Jt(o){if(e.vertical===!0)return null;const b=s.lang.rtl!==e.reverse?1-o:o;return{transform:`translateX(calc(${2*b-1} * ${e.thumbSize} / 2 + ${50-100*b}%))`}}function Zt(o){const b=u(()=>d.value===!1&&(f.value===o.focusValue||f.value==="both")?" q-slider--focus":""),S=u(()=>`q-slider__thumb q-slider__thumb${L.value} q-slider__thumb${L.value}-${Q.value===!0?"rtl":"ltr"} absolute non-selectable`+b.value+(o.thumbColor.value!==void 0?` text-${o.thumbColor.value}`:"")),C=u(()=>({width:e.thumbSize,height:e.thumbSize,[le.value]:`${100*o.ratio.value}%`,zIndex:f.value===o.focusValue?2:void 0})),D=u(()=>o.labelColor.value!==void 0?` text-${o.labelColor.value}`:""),J=u(()=>Jt(o.ratio.value)),ze=u(()=>"q-slider__text"+(o.labelTextColor.value!==void 0?` text-${o.labelTextColor.value}`:""));return()=>{const Qe=[F("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[F("path",{d:e.thumbPath})]),F("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(Qe.push(F("div",{class:Ne.value+" absolute fit no-pointer-events"+D.value},[F("div",{class:B.value,style:{minWidth:e.thumbSize}},[F("div",{class:be.value,style:J.value},[F("span",{class:ze.value},o.label.value)])])])),e.name!==void 0&&e.disable!==!0&&M(Qe,"push")),F("div",{class:S.value,style:C.value,...o.getNodeData()},Qe)}}function Xt(o,b,S,C){const D=[];e.innerTrackColor!=="transparent"&&D.push(F("div",{key:"inner",class:Nt.value,style:at.value})),e.selectionColor!=="transparent"&&D.push(F("div",{key:"selection",class:Ve.value,style:o.value})),e.markers!==!1&&D.push(F("div",{key:"marker",class:Me.value,style:Rt.value})),C(D);const J=[Ma("div",{key:"trackC",class:Pe.value,tabindex:b.value,...S.value},[F("div",{class:Fe.value,style:Pt.value},D)],"slide",A.value,()=>jt.value)];if(e.markerLabels!==!1){const ze=e.switchMarkerLabelsSide===!0?"unshift":"push";J[ze](F("div",{key:"markerL",class:K.value},Ht()))}return J}return We(()=>{document.removeEventListener("mouseup",Re,!0)}),{state:{active:p,focus:f,preventFocus:d,dragging:_,editable:A,classes:re,tabindex:Be,attributes:Ce,roundValueFn:H,keyStep:E,trackLen:j,innerMin:R,innerMinRatio:Y,innerMax:z,innerMaxRatio:ce,positionProp:le,sizeProp:Se,isReversed:Q},methods:{onActivate:Kt,onMobileClick:Wt,onBlur:it,onKeyup:Yt,getContent:Xt,getThumbRenderFn:Zt,convertRatioToModel:Ot,convertModelToRatio:Oe,getDraggingRatio:Ut}}}const on=()=>({}),ln=Ee({name:"QSlider",props:{...tn,modelValue:{required:!0,default:null,validator:t=>typeof t=="number"||t===null},labelValue:[String,Number]},emits:an,setup(t,{emit:a}){const{proxy:{$q:i}}=tt(),{state:l,methods:e}=nn({updateValue:L,updatePosition:Q,getDragging:N,formAttrs:ba(t)}),n=w(null),r=w(0),s=w(0);function k(){s.value=t.modelValue===null?l.innerMin.value:me(t.modelValue,l.innerMin.value,l.innerMax.value)}ke(()=>`${t.modelValue}|${l.innerMin.value}|${l.innerMax.value}`,k),k();const M=u(()=>e.convertModelToRatio(s.value)),p=u(()=>l.active.value===!0?r.value:M.value),d=u(()=>{const A={[l.positionProp.value]:`${100*l.innerMinRatio.value}%`,[l.sizeProp.value]:`${100*(p.value-l.innerMinRatio.value)}%`};return t.selectionImg!==void 0&&(A.backgroundImage=`url(${t.selectionImg}) !important`),A}),f=e.getThumbRenderFn({focusValue:!0,getNodeData:on,ratio:p,label:u(()=>t.labelValue!==void 0?t.labelValue:s.value),thumbColor:u(()=>t.thumbColor||t.color),labelColor:u(()=>t.labelColor),labelTextColor:u(()=>t.labelTextColor)}),_=u(()=>l.editable.value!==!0?{}:i.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:R,onBlur:e.onBlur,onKeydown:z,onKeyup:e.onKeyup});function L(A){s.value!==t.modelValue&&a("update:modelValue",s.value),A===!0&&a("change",s.value)}function N(){return n.value.getBoundingClientRect()}function Q(A,H=l.dragging.value){const E=e.getDraggingRatio(A,H);s.value=e.convertRatioToModel(E),r.value=t.snap!==!0||t.step===0?E:e.convertModelToRatio(s.value)}function R(){l.focus.value=!0}function z(A){if(Vt.includes(A.keyCode)===!1)return;$t(A);const H=([34,33].includes(A.keyCode)?10:1)*l.keyStep.value,E=([34,37,40].includes(A.keyCode)?-1:1)*(l.isReversed.value===!0?-1:1)*(t.vertical===!0?-1:1)*H;s.value=me(l.roundValueFn.value(s.value+E),l.innerMin.value,l.innerMax.value),L()}return()=>{const A=e.getContent(d,l.tabindex,_,H=>{H.push(f())});return F("div",{ref:n,class:l.classes.value+(t.modelValue===null?" q-slider--no-value":""),...l.attributes.value,"aria-valuenow":t.modelValue},A)}}}),rn={class:"row justify-end"},Ct=I({__name:"FleetCargoSyncAction",props:{fleet:{type:U,required:!0},cargoMint:{type:U,required:!0},amount:{type:Number,default:0}},setup(t){const a=t,i=ae();async function l(){const e=P(),n=[],r=new oe(P());try{a.amount>0&&n.push(...await r.cargoToFleetIx(a.fleet,a.cargoMint,Math.abs(a.amount))),a.amount<0&&n.push(...await r.cargoToStarbaseIx(a.fleet,a.cargoMint,Math.abs(a.amount))),n.length>0&&await ee(`Transfer Cargo: ${a.amount>0?"Starbase -> Fleet":"Fleet -> Starbase"}`,n,e,te.DEFAULT_FEE),await m().updateFleet(),await m().updateFleetCargoAccounts(a.fleet)}catch(s){i.notify({type:"warning",message:"warning",caption:s.toString(),position:"bottom-right"})}}return(e,n)=>(g(),$("div",rn,[c(O,{color:"secondary",label:"Sync",onClick:ne(l,["prevent"])})]))}}),sn={class:"text-grey-5"},un={key:0,class:"col row"},cn={key:1,class:"col row"},dn={key:2,class:"col"},mn={class:"row items-center"},fn={class:"row items-center"},gn={class:"col-1"},vn={key:4},bn={class:"row q-gutter-x-sm"},pn={class:"col"},yn={class:"row items-center"},hn={class:"col row items-center"},wn={class:"col row items-center"},At=I({__name:"CargoTable",props:{fleet:{type:U,required:!0},rows:{type:{},required:!0},action:{type:String}},setup(t){const a=t,i=w(),l=w([{style:"width: 10px",name:"extend",required:!0,align:"left",sortable:!1},{name:"symbol",required:!0,label:"Symbol",align:"left",field:p=>p?.symbol,sortable:!0},{name:"name",required:!0,label:"Name",align:"left",field:p=>p?.name,sortable:!0},{name:"uiAmount",required:!0,label:"Quantity",align:"right",field:p=>p.uiAmount,sortable:!0},{style:"width: 10px",name:"extend2",required:!0,align:"left",sortable:!1}]),e=u(()=>{const p=m()?.fleetFuelAccount?.uiAmount;return m().fleets?.find(d=>d.key.toString()==a.fleet.toString())?.data.stats.cargoStats.fuelCapacity-(p??0)}),n=u(()=>{const p=m()?.fleetAmmoAccount?.uiAmount;return m().fleets?.find(d=>d.key.toString()==a.fleet.toString())?.data.stats.cargoStats.ammoCapacity-(p??0)}),r=u(()=>{const p=m()?.fleetCargoAccounts?.flatMap(d=>d.uiAmount)?.reduce((d,f)=>d+f,0);return m().fleets?.find(d=>d.key.toString()==a.fleet.toString())?.data.stats.cargoStats.cargoCapacity-(p??0)});function s(p){switch(W().tokenList.find(d=>d.mint.toString()==p.toString())?.symbol){case"FUEL":return m().fleets?.find(d=>d.key.toString()==a.fleet.toString())?.data.stats.cargoStats.fuelCapacity;case"AMMO":return m().fleets?.find(d=>d.key.toString()==a.fleet.toString())?.data.stats.cargoStats.ammoCapacity;default:return m().fleets?.find(d=>d.key.toString()==a.fleet.toString())?.data.stats.cargoStats.cargoCapacity}}function k(p){switch(W().tokenList.find(d=>d.mint.toString()==p.toString())?.symbol){case"FUEL":return e.value;case"AMMO":return n.value;default:return r.value}}function M(p){switch(W().tokenList.find(d=>d.mint.toString()==p.toString())?.symbol){case"FUEL":return m().fleetFuelAccount?.uiAmount||0;case"AMMO":return m().fleetAmmoAccount?.uiAmount||0;default:return m().fleetCargoAccounts?.find(d=>d.mint.toString()==p.toString())?.uiAmount||0}}return(p,d)=>a.rows?(g(),y(Lt,{key:0,columns:l.value,filter:i.value,pagination:{rowsPerPage:0,sortBy:"name",descending:!0},rows:a.rows,dense:"",flat:"","hide-bottom":"","row-key":"name",square:""},{"top-left":v(()=>[h("div",sn,"Found "+q(t.rows.length)+" Items",1)]),"top-right":v(()=>[c(Te,{modelValue:i.value,"onUpdate:modelValue":d[0]||(d[0]=f=>i.value=f),borderless:"",debounce:"300",dense:"",placeholder:"Search"},{append:v(()=>[c(ye,{name:"search"})]),_:1},8,["modelValue"])]),body:v(f=>[c(we,{props:f,onClick:_=>f.expand=!f.expand},{default:v(()=>[(g(!0),$(se,null,Ye(f.cols,_=>(g(),y(he,{key:_.name,props:f},{default:v(()=>[_.name=="extend"?(g(),$("div",un,[c(ye,{name:f.expand?"expand_less":"expand_more",size:"lg"},null,8,["name"])])):_.name=="extend2"?(g(),$("div",cn,[c(ye,{name:f.expand?"expand_less":"expand_more",size:"lg"},null,8,["name"])])):_.name=="uiAmount"?(g(),$("div",dn,[h("div",mn,[d[1]||(d[1]=h("div",{class:"col"},"@Starbase",-1)),d[2]||(d[2]=h("div",{class:"col-1"},"âˆž",-1)),c(yt,{number:x(m)().starbaseTokenAccounts?.find(L=>L.mint.toString()==f.row.mint.toString())?.uiAmount??0,url:f.row.thumbnailUrl,class:"col",decimals:"1","pad-start":"10"},null,8,["number","url"])]),h("div",fn,[d[3]||(d[3]=h("div",{class:"col"},"@Cargo",-1)),h("div",gn,q(((M(f.row.mint)+f.row.uiAmountChange)/s(f.row.mint)*100).toFixed(0))+"% ",1),c(yt,{number:M(f.row.mint),url:f.row.thumbnailUrl,class:"col",decimals:"1","pad-start":"10"},null,8,["number","url"])])])):_.name=="action"&&t.action=="sync"?(g(),y(Ct,{key:3,"cargo-mint":f.row.mint,fleet:a.fleet,"is-amount":0,"should-amount":0},null,8,["cargo-mint","fleet"])):(g(),$("div",vn,q(_.value),1))]),_:2},1032,["props"]))),128))]),_:2},1032,["props","onClick"]),qt(c(we,{props:f},{default:v(()=>[c(he,{class:"",colspan:"100%"},{default:v(()=>[h("div",bn,[h("div",pn,[h("div",yn,[h("div",hn,[h("div",wn,[d[4]||(d[4]=h("div",{class:"text-subtitle2"},"@Starbase",-1)),c(ln,{modelValue:f.row.uiAmountChange,"onUpdate:modelValue":_=>f.row.uiAmountChange=_,max:k(f.row.mint),min:-f.row.uiAmount,step:1,class:"col q-mx-md",color:"accent",label:""},null,8,["modelValue","onUpdate:modelValue","max","min"]),d[5]||(d[5]=h("div",{class:"text-subtitle2"},"@Cargo",-1))])])]),c(Te,{modelValue:f.row.uiAmountChange,"onUpdate:modelValue":_=>f.row.uiAmountChange=_,class:"col",dense:"",standout:"",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),c(Ct,{amount:f.row.uiAmountChange,"cargo-mint":f.row.mint,fleet:a.fleet},null,8,["amount","cargo-mint","fleet"])])]),_:2},1024)]),_:2},1032,["props"]),[[Et,f.expand]])]),_:1},8,["columns","filter","rows"])):T("",!0)}}),kn=I({__name:"FleetCargoDialog",props:{name:{type:String,default:"none"},fleet:{type:U,required:!0}},setup(t){const a=w(!1),i=t;return u(()=>m().fleets.find(l=>l.key==i.fleet)),ke(()=>a.value,async()=>{await m().updateFleetCargoAccounts(i.fleet),m().starbaseTokenAccountsSelected=void 0}),(l,e)=>(g(),$(se,null,[c(O,{color:"primary",icon:"inventory_2",onClick:e[0]||(e[0]=n=>a.value=!0)},{default:v(()=>[c(ve,null,{default:v(()=>e[2]||(e[2]=[ue("Cargo")])),_:1})]),_:1}),c(Mt,{modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=n=>a.value=n),"full-width":"","transition-hide":"rotate","transition-show":"rotate"},{default:v(()=>[c(Le,{bordered:"",flat:""},{default:v(()=>[c(Bt,{text:"Cargo"}),c(ge),c(kt,{caption:"Consumed Resources","default-opened":"","expand-separator":"",icon:"perm_identity",label:"Fleet Provision"},{default:v(()=>[x(m)().fleetFilteredConsumptionAccounts?(g(),y(At,{key:0,fleet:i.fleet,rows:x(m)().fleetFilteredConsumptionAccounts,action:"sync"},null,8,["fleet","rows"])):T("",!0)]),_:1}),c(ge,{style:{height:"10px"}}),c(kt,{caption:"Cargo fleet storage","default-opened":"","expand-separator":"",icon:"perm_identity",label:"Fleet Cargo"},{default:v(()=>[x(m)().fleetFilteredCargoAccounts?(g(),y(At,{key:0,fleet:i.fleet,rows:x(m)().fleetFilteredCargoAccounts,action:"sync"},null,8,["fleet","rows"])):T("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),_n=I({__name:"FleetDockAction",props:{fleet:{type:U,required:!0}},setup(t){const a=t,i=ae();async function l(){const e=P(),n=[],r=new oe(P());try{n.push(...await r.fleetDock(a.fleet)),n.length>0&&await ee("Instructions Withdraw",n,e,te.DEFAULT_FEE),m().fleets=await ie()}catch(s){i.notify({type:"warning",message:"warning",caption:s.toString(),position:"bottom-right"})}}return(e,n)=>(g(),y(O,{color:"primary",icon:"link",onClick:ne(l,["prevent"])},{default:v(()=>[c(ve,null,{default:v(()=>n[0]||(n[0]=[ue("Dock fleet")])),_:1})]),_:1}))}}),Sn=I({__name:"FleetStartMiningAction",props:{fleet:{type:U,required:!0}},setup(t){const a=t,i=ae();async function l(){const e=P(),n=[],r=new oe(P());try{n.push(...await r.startMining(a.fleet)),n.length>0&&await ee("Instructions start mining",n,e,te.DEFAULT_FEE),m().fleets=await ie()}catch(s){i.notify({type:"warning",message:"warning",caption:s.toString(),position:"bottom-right"})}}return(e,n)=>(g(),y(O,{color:"primary",icon:"play_for_work",onClick:ne(l,["prevent"])},{default:v(()=>[c(ve,null,{default:v(()=>n[0]||(n[0]=[ue("Start mining")])),_:1})]),_:1}))}}),xn={class:"row"},Cn=I({__name:"FleetStopMiningAction",props:{fleet:{type:U,required:!0}},setup(t){const a=t,i=ae();async function l(){const e=P(),n=[],r=new oe(P());try{n.push(...await r.asteroidMiningHandler(a.fleet)),n.push(...await r.stopMining(a.fleet)),n.length>0&&await ee("Instructions stop mining",n,e,te.DEFAULT_FEE),m().fleets=await ie()}catch(s){i.notify({type:"warning",message:"warning",caption:s.toString(),position:"bottom-right"})}}return(e,n)=>(g(),$("div",xn,[c(O,{color:"secondary",icon:"airline_stops",onClick:ne(l,["prevent"])},{default:v(()=>[c(ve,null,{default:v(()=>n[0]||(n[0]=[ue("Stop mining")])),_:1})]),_:1})]))}}),An={class:"col"},Mn={class:"absolute-full flex flex-center"},Fn={class:"col text-center"},Ke=I({__name:"FleetCargoElement",props:{symbol:{type:String,default:"CARGOELEMENT"},fleet:{type:String,required:!0},max:{type:Number,default:0}},setup(t){const a=t;function i(){switch(a.symbol){case"AMMO":return m().fleets?.find(s=>s.key.toString()==a.fleet?.toString())?.data.stats.cargoStats.ammoCapacity;case"FUEL":return m().fleets?.find(s=>s.key.toString()==a.fleet?.toString())?.data.stats.cargoStats.fuelCapacity;case"CARGO":return m().fleets?.find(s=>s.key.toString()==a.fleet?.toString())?.data.stats.cargoStats.cargoCapacity}}function l(){switch(a.symbol){case"AMMO":return m().fleets?.find(s=>s.key.toString()==a.fleet?.toString())?.data.ammoBank;case"FUEL":return m().fleets?.find(s=>s.key.toString()==a.fleet?.toString())?.data.fuelTank;case"CARGO":return m().fleets?.find(s=>s.key.toString()==a.fleet?.toString())?.data.cargoHold}}const e=w(0);Ie(async()=>{e.value=Fa(await Ta([l()])).flatMap(s=>s.uiAmount).reduce((s,k)=>s+k,0)});const n=u(()=>(e.value/i()).toFixed(3)),r=u(()=>{switch(a.symbol){case"AMMO":return"orange";case"FUEL":return"purple";case"CARGO":return"blue";default:return"red"}});return(s,k)=>(g(),$("div",An,[c(La,{color:r.value,value:n.value,class:"q-mb-xs","font-size":"16px","show-value":"",size:"20px","track-color":"grey-3"},{default:v(()=>[h("div",Mn,[c(Oa,{label:n.value*100,color:"white","text-color":"accent"},null,8,["label"])])]),_:1},8,["color","value"]),h("div",Fn,q(e.value)+"/"+q(i()),1)]))}}),Tn=I({__name:"FleetUndockAction",props:{fleet:{type:U,required:!0}},setup(t){const a=t,i=ae();async function l(){const e=P(),n=[],r=new oe(P());try{n.push(...await r.fleetUndock(a.fleet)),n.length>0&&await ee("Instructions Withdraw",n,e,te.DEFAULT_FEE),m().fleets=await ie()}catch(s){i.notify({type:"warning",message:"warning",caption:s.toString(),position:"bottom-right"})}}return(e,n)=>(g(),y(O,{color:"primary",icon:"link_off",onClick:ne(l,["prevent"])},{default:v(()=>[c(ve,null,{default:v(()=>n[0]||(n[0]=[ue(" Undock ")])),_:1})]),_:1}))}}),$n=(t,a,i,l,e,n,r)=>{if(!t.state.MineAsteroid)throw"Fleet not mining";const s=t.state.MineAsteroid.start,k=t.state.MineAsteroid.lastUpdate.sub(s).toNumber(),M=G.Fleet.calculateAsteroidMiningFoodDuration(t.data.stats,Number(a.delegatedAmount)),p=G.Fleet.calculateAsteroidMiningAmmoDuration(t.data.stats,Number(i.delegatedAmount)),d=G.Fleet.calculateAsteroidMiningFoodToConsume(t.data.stats,Number(a.delegatedAmount),Math.min(k,Math.floor(M))),f=G.Fleet.calculateAsteroidMiningAmmoToConsume(t.data.stats,Number(i.delegatedAmount),Math.min(k,Math.floor(M),Math.floor(p))),_=G.Fleet.calculateAsteroidMiningResourceToExtract(t.data.stats,l,e,Math.min(k,Math.floor(M),Math.floor(p)),1e6,n);return{ammoConsumed:f,foodConsumed:d,maxAmmoDuration:p,maxFoodDuration:M,miningDuration:k,resourceExtracted:_}};function qn(t){let a=Math.floor(t/1e3);return[{unit:"D",factor:86400},{unit:"H",factor:3600},{unit:"Min",factor:60},{unit:"Sec",factor:1}].reduce((l,{unit:e,factor:n})=>{const r=Math.floor(a/n);return r>0&&(l.push(`${r}${e}`),a-=r*n),l},[]).join(" ")}const En={class:"row"},In={class:"row"},Ln={class:"row"},Bn={class:"row"},Dn=I({__name:"MiningResultsDisplay",setup(t){const a=w(),i=w();Ie(async()=>{const d=m().fleets[0];a.value=await _t(Je().connection,pt(W().AMMO,d.data.ammoBank,!0),"processed"),i.value=await _t(Je().connection,pt(W().FOOD,d.data.cargoHold,!0),"processed")});const l=u(()=>{if(!a.value||!i.value)return 0;const d=m().fleets[0];if(!d.state.MineAsteroid)return"Fleet not mining...";console.log(d.state.MineAsteroid.resource);const f=X().mineItems?.find(N=>N.data.mint.toString()==W().getTokenBySymbol("HYG").toString()),_=X().resources?.find(N=>N.key.toString()==d.state.MineAsteroid?.resource.toString());return console.log("mineItem",f),console.log("resource",_),$n(d,i.value,a.value,f.data,_.data,0)}),e=w(Date.now()),n=u(()=>X().mineItems?.find(d=>d.data.mint.toString()==W().getTokenBySymbol("HYG").toString())),r=u(()=>{const d=m().fleets[0];return X().resources?.find(f=>f.key.toString()==d.state.MineAsteroid?.resource.toString())}),s=w(),k=w(),M=w(),p=w();return setInterval(()=>{s.value=G.Fleet.calculateAsteroidMiningResourceExtractionDuration(m().fleets[0].data.stats,n.value.data,r.value.data,10565),k.value=G.Fleet.calculateAsteroidMiningAmmoDuration(m().fleets[0].data.stats,4109),M.value=G.Fleet.calculateAsteroidMiningFoodDuration(m().fleets[0].data.stats,398),p.value=G.Fleet.calculateAsteroidMiningFoodToConsume(m().fleets[0].data.stats,398,s.value),s.value=G.Fleet.calculateAsteroidMiningResourceExtractionDuration(m().fleets[0].data.stats,n.value.data,r.value.data,10565+199.5);const d=m().fleets[0].state.MineAsteroid?.lastUpdate-Date.now()/1e3+s.value;e.value=qn(d*1e3),console.log(d)},1e3),(d,f)=>(g(),$(se,null,[h("div",null,[h("div",En,[f[0]||(f[0]=h("div",{class:"col"},"calculateAsteroidMiningResourceExtractionDuration",-1)),h("div",null,q(s.value),1)]),h("div",In,[f[1]||(f[1]=h("div",{class:"col"},"calculateAsteroidMiningResourceExtractionDuration",-1)),h("div",null,q(k.value),1)]),h("div",Ln,[f[2]||(f[2]=h("div",{class:"col"},"calculateAsteroidMiningFoodDuration",-1)),h("div",null,q(M.value),1)]),h("div",Bn,[f[3]||(f[3]=h("div",{class:"col"},"calculateAsteroidMiningFoodToConsume",-1)),h("div",null,q(p.value),1)])]),h("div",null,q(e.value)+" "+q(l.value),1)],64))}}),Vn={class:"text-grey-5"},Pn={key:4},Nn={key:0},On={key:5},Un={class:"text-left"},Rn=I({__name:"FleetTable",props:{rows:{type:{},required:!0}},setup(t){const a=t,i=w();Ie(async()=>{console.log(await fe.readFromRPC(Je().connection,$a()?.sageProgram.value,new U("GzTQjbRfw3VcBsu2YEqhkHrZn9yBtzJxGBtwVimxvGeg"),qa))});const l=w([{name:"extend",required:!0,align:"left",sortable:!1},{name:"fleetLabel",required:!0,label:"Fleet name",align:"left",field:e=>fe.byteArrayToString(e.data.fleetLabel),sortable:!0},{name:"state",required:!0,label:"State",align:"left",field:e=>Object.keys(e.state)[0]=="MineAsteroid"?"MineAsteroid":Object.keys(e.state)[0],sortable:!0},{name:"fuel",required:!0,label:"Fuel",align:"center",field:e=>e.data.fuelTank,sortable:!0},{name:"ammo",required:!0,label:"Ammo",align:"center",field:e=>e.data.ammoBank,sortable:!0},{name:"cargo",required:!0,label:"Cargo",align:"center",field:e=>e.data.ammoBank,sortable:!0},{name:"info",required:!1,label:"Info",align:"left",sortable:!1},{name:"actions",required:!1,label:"Actions",align:"right",sortable:!1}]);return(e,n)=>(g(),$(se,null,[x(m)().fleets[0]?.state.MineAsteroid?(g(),y(Dn,{key:0})):T("",!0),a.rows?(g(),y(Lt,{key:1,columns:l.value,filter:i.value,pagination:{rowsPerPage:0,sortBy:"name",descending:!0},rows:t.rows,flat:"","hide-bottom":"","row-key":"name",square:""},{"top-left":v(()=>[h("div",Vn,"Found "+q(t.rows.length)+" Items",1)]),"top-right":v(()=>[c(St,null,{default:v(()=>[c(Te,{modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=r=>i.value=r),debounce:"300",dense:"",placeholder:"Search",standout:""},{append:v(()=>[c(ye,{name:"search"})]),_:1},8,["modelValue"]),c(O,{color:"primary",icon:"refresh",square:"",onClick:n[1]||(n[1]=r=>x(m)().updateFleet())})]),_:1})]),header:v(r=>[c(we,{props:r},{default:v(()=>[c(ht,{"auto-width":""}),(g(!0),$(se,null,Ye(r.cols,s=>(g(),y(ht,{key:s.name,props:r},{default:v(()=>[ue(q(s.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:v(r=>[c(we,{props:r},{default:v(()=>[c(he,{"auto-width":""},{default:v(()=>[c(O,{icon:r.expand?"remove":"add",color:"accent",dense:"",round:"",size:"sm",onClick:s=>r.expand=!r.expand},null,8,["icon","onClick"])]),_:2},1024),(g(!0),$(se,null,Ye(r.cols,s=>(g(),y(he,{key:s.name,props:r},{default:v(()=>[s.name=="actions"?(g(),y(St,{key:0,class:""},{default:v(()=>[r.row.state.StarbaseLoadingBay?(g(),y(Za,{key:0,fleet:r.row.key,name:x(fe.byteArrayToString)(r.row.data.fleetLabel)},null,8,["fleet","name"])):T("",!0),r.row.state.StarbaseLoadingBay?(g(),y(kn,{key:1,fleet:r.row.key,name:x(fe.byteArrayToString)(r.row.data.fleetLabel)},null,8,["fleet","name"])):T("",!0),r.row.state.Idle?(g(),y(_n,{key:2,fleet:r.row.key},null,8,["fleet"])):T("",!0),r.row.state.StarbaseLoadingBay?(g(),y(Tn,{key:3,fleet:r.row.key},null,8,["fleet"])):T("",!0),r.row.state.Idle?(g(),y(Sn,{key:4,fleet:r.row.key},null,8,["fleet"])):T("",!0),r.row.state.MineAsteroid?(g(),y(Cn,{key:5,fleet:r.row.key},null,8,["fleet"])):T("",!0)]),_:2},1024)):s.name=="fuel"?(g(),y(Ke,{key:1,fleet:r.row.key.toString(),symbol:"FUEL"},null,8,["fleet"])):s.name=="ammo"?(g(),y(Ke,{key:2,fleet:r.row.key.toString(),symbol:"AMMO"},null,8,["fleet"])):s.name=="cargo"?(g(),y(Ke,{key:3,fleet:r.row.key.toString(),symbol:"CARGO"},null,8,["fleet"])):s.name=="info"?(g(),$("div",Pn,[r.row.state?.Idle?(g(),$("div",Nn,q(`${x(X)().getStarbaseNameByCoordinates([r.row.state.Idle.sector[0].toNumber(),r.row.state.Idle.sector[1].toNumber()])}`),1)):T("",!0)])):(g(),$("div",On,q(s.value),1))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"]),qt(c(we,{props:r},{default:v(()=>[c(he,{colspan:"100%"},{default:v(()=>[n[2]||(n[2]=h("div",null,null,-1)),h("div",Un,q(JSON.stringify(r.row,null,2))+".",1)]),_:2},1024)]),_:2},1032,["props"]),[[Et,r.expand]])]),_:1},8,["columns","filter","rows"])):T("",!0)],64))}}),zn={key:2},oo=I({__name:"FleetPage",setup(t){const a=w("manage");return Ie(async()=>{await Ea().updateStore(Ia()),await X().updateStore()}),(i,l)=>x(X)().starbases?.length?(g(),y(ut,{key:1,class:""},{default:v(()=>[c(Bt,{text:"Fleet Manager"}),h("div",null,[c(ge),c(Ft,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value=e),"active-bg-color":"primary",align:"justify","inline-label":""},{default:v(()=>[c($e,{label:"Manage",name:"manage"}),c($e,{label:"Create",name:"create"})]),_:1},8,["modelValue"]),c(ge),!x(m)().fleets?.length&&a.value=="manage"?(g(),y(wt,{key:0,message:"Fleets found"})):a.value=="manage"?(g(),y(Rn,{key:1,rows:x(m)().fleets},null,8,["rows"])):T("",!0),a.value=="create"?(g(),$("div",zn,[c(pa,{modelValue:x(m)().currentStarbase,"onUpdate:modelValue":l[1]||(l[1]=e=>x(m)().currentStarbase=e),disable:!0,"option-label":e=>x(fe.byteArrayToString)(e.data.name),options:x(X)().starbases?.filter(e=>x(fe.byteArrayToString)(e.data.name).includes("Central")),class:"",label:"Selected Starbase",square:"",standout:""},{prepend:v(()=>[c(ye,{name:"home"})]),_:1},8,["modelValue","option-label","options"]),x(m)().currentStarbase?(g(),y(Ga,{key:1})):(g(),y(wt,{key:0,message:"Please select a starbase"}))])):T("",!0)])]),_:1})):(g(),y(ut,{key:0,class:"row justify-center items-center"},{default:v(()=>[c(ya)]),_:1}))}});export{oo as default};
