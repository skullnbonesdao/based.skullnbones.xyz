import{u as b,a as O,b as W,c as R,w as Ve,h as Ie,g as Ae,d as et,p as Oe,e as tt,f as Ne,Q as at,i as Qe}from"./updateStores-6ZM88A_c.js";import{M as lt,O as oe,K as nt,Q as ot,R as ye,S as we,V as Ke,Y as Pe,X as Ce,D as E,w as V,E as le,H as Ee,x as k,av as ze,ay as it,y as ue,az as st,v as de,a3 as rt,F as Ge,aA as ut,aB as Ye,I as ee,aC as dt,af as se,a9 as ne,ab as v,ac as T,ad as o,ae as n,an as p,aj as m,ao as q,ar as F,as as B,ag as j,ai as I,aD as ct,aE as pt,aq as Le,ah as K,aF as he,aG as _e,aH as X,aI as D,aJ as re,P as $e,aK as be,aL as Be,aM as ft,aN as vt,aO as ie,J as mt}from"./index-D5e0EpkC.js";import{g as De,s as Fe,a as Te,Q as te}from"./QToggle-B7PpgirD.js";import{c as gt,u as yt,h as Pt,q as bt,i as ht,r as _t,n as ae,m as Y,Q as z,o as We,p as Ue}from"./SquadsStore-BUv8OVmM.js";import{b as St,u as Xe,a as Je,c as C,Q as N}from"./QCard-CmvuOAoH.js";import{Q as je}from"./QSeparator-YKGM4JLe.js";import{Q as qe}from"./QInput-DXV5n8Lp.js";import"./QResizeObserver-BezHqTuI.js";import"./index-DVKssMzM.js";function kt(e){const l=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((i,a)=>{const d=parseFloat(i);d&&(l[a]=d)}),l}const xt=lt({name:"touch-swipe",beforeMount(e,{value:l,arg:i,modifiers:a}){if(a.mouse!==!0&&oe.has.touch!==!0)return;const d=a.mouseCapture===!0?"Capture":"",t={handler:l,sensitivity:kt(i),direction:De(a),noop:nt,mouseStart(s){Fe(s,t)&&ot(s)&&(ye(t,"temp",[[document,"mousemove","move",`notPassive${d}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(s,!0))},touchStart(s){if(Fe(s,t)){const c=s.target;ye(t,"temp",[[c,"touchmove","move","notPassiveCapture"],[c,"touchcancel","end","notPassiveCapture"],[c,"touchend","end","notPassiveCapture"]]),t.start(s)}},start(s,c){oe.is.firefox===!0&&we(e,!0);const y=Ke(s);t.event={x:y.left,y:y.top,time:Date.now(),mouse:c===!0,dir:!1}},move(s){if(t.event===void 0)return;if(t.event.dir!==!1){Pe(s);return}const c=Date.now()-t.event.time;if(c===0)return;const y=Ke(s),L=y.left-t.event.x,_=Math.abs(L),w=y.top-t.event.y,P=Math.abs(w);if(t.event.mouse!==!0){if(_<t.sensitivity[1]&&P<t.sensitivity[1]){t.end(s);return}}else if(window.getSelection().toString()!==""){t.end(s);return}else if(_<t.sensitivity[2]&&P<t.sensitivity[2])return;const r=_/c,h=P/c;t.direction.vertical===!0&&_<P&&_<100&&h>t.sensitivity[0]&&(t.event.dir=w<0?"up":"down"),t.direction.horizontal===!0&&_>P&&P<100&&r>t.sensitivity[0]&&(t.event.dir=L<0?"left":"right"),t.direction.up===!0&&_<P&&w<0&&_<100&&h>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&_<P&&w>0&&_<100&&h>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&_>P&&L<0&&P<100&&r>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&_>P&&L>0&&P<100&&r>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(Pe(s),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),gt(),t.styleCleanup=u=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const S=()=>{document.body.classList.remove("no-pointer-events--children")};u===!0?setTimeout(S,50):S()}),t.handler({evt:s,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:c,distance:{x:_,y:P}})):t.end(s)},end(s){t.event!==void 0&&(Ce(t,"temp"),oe.is.firefox===!0&&we(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(!0),s!==void 0&&t.event.dir!==!1&&Pe(s),t.event=void 0)}};if(e.__qtouchswipe=t,a.mouse===!0){const s=a.mouseCapture===!0||a.mousecapture===!0?"Capture":"";ye(t,"main",[[e,"mousedown","mouseStart",`passive${s}`]])}oe.has.touch===!0&&ye(t,"main",[[e,"touchstart","touchStart",`passive${a.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,l){const i=e.__qtouchswipe;i!==void 0&&(l.oldValue!==l.value&&(typeof l.value!="function"&&i.end(),i.handler=l.value),i.direction=De(l.modifiers))},beforeUnmount(e){const l=e.__qtouchswipe;l!==void 0&&(Ce(l,"main"),Ce(l,"temp"),oe.is.firefox===!0&&we(e,!1),l.styleCleanup!==void 0&&l.styleCleanup(),delete e.__qtouchswipe)}});function wt(){let e=Object.create(null);return{getCache:(l,i)=>e[l]===void 0?e[l]=typeof i=="function"?i():i:e[l],setCache(l,i){e[l]=i},hasCache(l){return Object.hasOwnProperty.call(e,l)},clearCache(l){l!==void 0?delete e[l]:e=Object.create(null)}}}const Ct={name:{required:!0},disable:Boolean},Re={setup(e,{slots:l}){return()=>k("div",{class:"q-panel scroll",role:"tabpanel"},ue(l.default))}},Tt={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},qt=["update:modelValue","beforeTransition","transition"];function Vt(){const{props:e,emit:l,proxy:i}=Ee(),{getCache:a}=wt(),{registerTimeout:d}=St();let t,s;const c=E(null),y={value:null};function L(g){const x=e.vertical===!0?"up":"left";M((i.$q.lang.rtl===!0?-1:1)*(g.direction===x?1:-1))}const _=V(()=>[[xt,L,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),w=V(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),P=V(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),r=V(()=>`--q-transition-duration: ${e.transitionDuration}ms`),h=V(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),u=V(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),S=V(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);le(()=>e.modelValue,(g,x)=>{const Q=J(g)===!0?Z(g):-1;s!==!0&&pe(Q===-1?0:Q<Z(x)?-1:1),y.value!==Q&&(y.value=Q,l("beforeTransition",g,x),d(()=>{l("transition",g,x)},e.transitionDuration))});function A(){M(1)}function $(){M(-1)}function ce(g){l("update:modelValue",g)}function J(g){return g!=null&&g!==""}function Z(g){return t.findIndex(x=>x.props.name===g&&x.props.disable!==""&&x.props.disable!==!0)}function Se(){return t.filter(g=>g.props.disable!==""&&g.props.disable!==!0)}function pe(g){const x=g!==0&&e.animated===!0&&y.value!==-1?"q-transition--"+(g===-1?w.value:P.value):null;c.value!==x&&(c.value=x)}function M(g,x=y.value){let Q=x+g;for(;Q!==-1&&Q<t.length;){const f=t[Q];if(f!==void 0&&f.props.disable!==""&&f.props.disable!==!0){pe(g),s=!0,l("update:modelValue",f.props.name),setTimeout(()=>{s=!1});return}Q+=g}e.infinite===!0&&t.length!==0&&x!==-1&&x!==t.length&&M(g,g===-1?t.length:-1)}function fe(){const g=Z(e.modelValue);return y.value!==g&&(y.value=g),!0}function ve(){const g=J(e.modelValue)===!0&&fe()&&t[y.value];return e.keepAlive===!0?[k(st,u.value,[k(S.value===!0?a(h.value,()=>({...Re,name:h.value})):Re,{key:h.value,style:r.value},()=>g)])]:[k("div",{class:"q-panel scroll",style:r.value,key:h.value,role:"tabpanel"},[g])]}function me(){if(t.length!==0)return e.animated===!0?[k(ze,{name:c.value},ve)]:ve()}function ke(g){return t=it(ue(g.default,[])).filter(x=>x.props!==null&&x.props.slot===void 0&&J(x.props.name)===!0),t.length}function xe(){return t}return Object.assign(i,{next:A,previous:$,goTo:ce}),{panelIndex:y,panelDirectives:_,updatePanelsList:ke,updatePanelIndex:fe,getPanelContent:me,getEnabledPanels:Se,getPanels:xe,isValidPanelName:J,keepAliveProps:u,needsUniqueKeepAliveWrapper:S,goToPanelByOffset:M,goToPanel:ce,nextPanel:A,previousPanel:$}}const Me=de({name:"QTabPanel",props:Ct,setup(e,{slots:l}){return()=>k("div",{class:"q-tab-panel",role:"tabpanel"},ue(l.default))}}),It=de({name:"QTabPanels",props:{...Tt,...Xe},emits:qt,setup(e,{slots:l}){const i=Ee(),a=Je(e,i.proxy.$q),{updatePanelsList:d,getPanelContent:t,panelDirectives:s}=Vt(),c=V(()=>"q-tab-panels q-panel-parent"+(a.value===!0?" q-tab-panels--dark q-dark":""));return()=>(d(l),rt("div",{class:c.value},t(),"pan",e.swipeable,()=>s.value))}}),At=de({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:l,emit:i}){let a=!1,d,t,s=null,c=null,y,L;function _(){d&&d(),d=null,a=!1,s!==null&&(clearTimeout(s),s=null),c!==null&&(clearTimeout(c),c=null),t!==void 0&&t.removeEventListener("transitionend",y),y=null}function w(u,S,A){S!==void 0&&(u.style.height=`${S}px`),u.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,a=!0,d=A}function P(u,S){u.style.overflowY=null,u.style.height=null,u.style.transition=null,_(),S!==L&&i(S)}function r(u,S){let A=0;t=u,a===!0?(_(),A=u.offsetHeight===u.scrollHeight?0:void 0):(L="hide",u.style.overflowY="hidden"),w(u,A,S),s=setTimeout(()=>{s=null,u.style.height=`${u.scrollHeight}px`,y=$=>{c=null,(Object($)!==$||$.target===u)&&P(u,"show")},u.addEventListener("transitionend",y),c=setTimeout(y,e.duration*1.1)},100)}function h(u,S){let A;t=u,a===!0?_():(L="show",u.style.overflowY="hidden",A=u.scrollHeight),w(u,A,S),s=setTimeout(()=>{s=null,u.style.height=0,y=$=>{c=null,(Object($)!==$||$.target===u)&&P(u,"hide")},u.addEventListener("transitionend",y),c=setTimeout(y,e.duration*1.1)},100)}return Ge(()=>{a===!0&&_()}),()=>k(ze,{css:!1,appear:e.appear,onEnter:r,onLeave:h},l.default)}}),G=ut({}),Et=Object.keys(Ye),H=de({name:"QExpansionItem",props:{...Ye,...yt,...Xe,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Pt,"click","afterShow","afterHide"],setup(e,{slots:l,emit:i}){const{proxy:{$q:a}}=Ee(),d=Je(e,a),t=E(e.modelValue!==null?e.modelValue:e.defaultOpened),s=E(null),c=bt(),{show:y,hide:L,toggle:_}=ht({showing:t});let w,P;const r=V(()=>`q-expansion-item q-item-type q-expansion-item--${t.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),h=V(()=>e.contentInsetLevel===void 0?null:{["padding"+(a.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),u=V(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),S=V(()=>{const f={};return Et.forEach(U=>{f[U]=e[U]}),f}),A=V(()=>u.value===!0||e.expandIconToggle!==!0),$=V(()=>e.expandedIcon!==void 0&&t.value===!0?e.expandedIcon:e.expandIcon||a.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),ce=V(()=>e.disable!==!0&&(u.value===!0||e.expandIconToggle===!0)),J=V(()=>({expanded:t.value===!0,detailsId:c.value,toggle:_,show:y,hide:L})),Z=V(()=>{const f=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:a.lang.label[t.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":t.value===!0?"true":"false","aria-controls":c.value,"aria-label":f}});le(()=>e.group,f=>{P!==void 0&&P(),f!==void 0&&me()});function Se(f){u.value!==!0&&_(f),i("click",f)}function pe(f){f.keyCode===13&&M(f,!0)}function M(f,U){U!==!0&&s.value!==null&&s.value.focus(),_(f),Pe(f)}function fe(){i("afterShow")}function ve(){i("afterHide")}function me(){w===void 0&&(w=_t()),t.value===!0&&(G[e.group]=w);const f=le(t,ge=>{ge===!0?G[e.group]=w:G[e.group]===w&&delete G[e.group]}),U=le(()=>G[e.group],(ge,Ze)=>{Ze===w&&ge!==void 0&&ge!==w&&L()});P=()=>{f(),U(),G[e.group]===w&&delete G[e.group],P=void 0}}function ke(){const f={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},U=[k(se,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&t.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:$.value})];return ce.value===!0&&(Object.assign(f,{tabindex:0,...Z.value,onClick:M,onKeyup:pe}),U.unshift(k("div",{ref:s,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),k(z,f,()=>U)}function xe(){let f;return l.header!==void 0?f=[].concat(l.header(J.value)):(f=[k(z,()=>[k(Y,{lines:e.labelLines},()=>e.label||""),e.caption?k(Y,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&f[e.switchToggleSide===!0?"push":"unshift"](k(z,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>k(se,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&f[e.switchToggleSide===!0?"unshift":"push"](ke()),f}function g(){const f={ref:"item",style:e.headerStyle,class:e.headerClass,dark:d.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return A.value===!0&&(f.clickable=!0,f.onClick=Se,Object.assign(f,u.value===!0?S.value:Z.value)),k(ae,f,xe)}function x(){return ee(k("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:h.value,id:c.value},ue(l.default)),[[dt,t.value]])}function Q(){const f=[g(),k(At,{duration:e.duration,onShow:fe,onHide:ve},x)];return e.expandSeparator===!0&&f.push(k(je,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:d.value}),k(je,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:d.value})),f}return e.group!==void 0&&me(),Ge(()=>{P!==void 0&&P()}),()=>k("div",{class:r.value},[k("div",{class:"q-expansion-item__container relative-position"},Q())])}}),Lt={class:"col"},$t={class:"row"},Ot={class:"col"},Nt={class:"col"},Qt={class:"col"},Kt={class:"col"},Bt={class:"col"},Dt=ne({__name:"PlayerProfileOverview",setup(e){return(l,i)=>(v(),T(N,{bordered:"",flat:""},{default:o(()=>[n(C,{class:"row items-center q-gutter-md"},{default:o(()=>[n(se,{name:"visibility",size:"md"}),i[0]||(i[0]=p("div",{class:"text-h6"},"View Accounts",-1))]),_:1}),n(C,{class:"row"},{default:o(()=>[n(Te,{bordered:"",class:"rounded-borders full-width",separator:""},{default:o(()=>[n(H,{caption:m(b)().wallet?.toString(),icon:"perm_identity",label:"Wallet"},null,8,["caption"]),n(H,{caption:m(b)().playerProfile?.key?.toString()??"not-found",icon:"perm_identity",label:"Player profile"},{default:o(()=>[n(N,null,{default:o(()=>[m(b)().playerProfile?.data?(v(),T(C,{key:0},{default:o(()=>[(v(!0),q(B,null,F(Object.keys(m(b)().playerProfile.data),a=>(v(),q("div",{key:a,class:"row"},[p("div",Lt,I(a),1),p("div",null,I(m(b)().playerProfile.data[a]??"none"),1)]))),128))]),_:1})):j("",!0)]),_:1})]),_:1},8,["caption"]),n(H,{caption:m(b)().playerName?.key?.toString()??"not-found",icon:"perm_identity",label:"Profile Name"},{default:o(()=>[n(N,null,{default:o(()=>[m(b)().playerName?.data?(v(),T(C,{key:0},{default:o(()=>[p("div",$t,[i[1]||(i[1]=p("div",{class:"col"},"name",-1)),p("div",null,I(m(b)().playerName?.name),1)]),(v(!0),q(B,null,F(Object.keys(m(b)().playerName.data),a=>(v(),q("div",{key:a,class:"row"},[p("div",Ot,I(a),1),p("div",null,I(m(b)().playerName.data[a]),1)]))),128))]),_:1})):j("",!0)]),_:1})]),_:1},8,["caption"]),n(H,{caption:m(O)().gameID?.toString(),icon:"perm_identity",label:"Game"},{default:o(()=>[n(N,null,{default:o(()=>[m(O)().game?.data?(v(),T(C,{key:0},{default:o(()=>[(v(!0),q(B,null,F(Object.keys(m(O)().game.data),a=>(v(),q("div",{key:a,class:"row"},[p("div",Nt,I(a),1),p("div",null,I(m(O)().game.data[a]),1)]))),128))]),_:1})):j("",!0)]),_:1})]),_:1},8,["caption"]),n(H,{caption:m(W)().profileFaction?.key?.toString()??"not-found",icon:"perm_identity",label:"Faction Profile"},{default:o(()=>[n(N,null,{default:o(()=>[m(W)().profileFaction?.data?(v(),T(C,{key:0},{default:o(()=>[(v(!0),q(B,null,F(Object.keys(m(W)().profileFaction.data),(a,d)=>(v(),q("div",{key:d,class:"row"},[p("div",Qt,I(a),1),p("div",null,I(m(W)().profileFaction.data[a]),1)]))),128))]),_:1})):j("",!0)]),_:1})]),_:1},8,["caption"]),n(H,{caption:m(O)().sagePlayerProfile?.key?.toString()??"not-found",icon:"perm_identity",label:"Sage Profile"},{default:o(()=>[n(N,null,{default:o(()=>[m(O)().sagePlayerProfile?.data?(v(),T(C,{key:0},{default:o(()=>[(v(!0),q(B,null,F(Object.keys(m(O)().sagePlayerProfile.data),(a,d)=>(v(),q("div",{key:d,class:"row"},[p("div",Kt,I(a),1),p("div",null,I(m(O)().sagePlayerProfile.data[a]),1)]))),128))]),_:1})):j("",!0)]),_:1})]),_:1},8,["caption"]),n(H,{icon:"perm_identity",label:"Points"},{default:o(()=>[n(N,null,{default:o(()=>[n(C,null,{default:o(()=>[n(Te,null,{default:o(()=>[(v(!0),q(B,null,F(m(R)().pointsCategories,(a,d)=>(v(),T(H,{key:d,caption:a.pointsCategory?.key.toString()??"not-found",label:a.name,icon:"perm_identity"},{default:o(()=>[n(N,null,{default:o(()=>[m(R)().pointsCategories[d]?.pointsCategory?(v(),T(C,{key:0},{default:o(()=>[(v(!0),q(B,null,F(Object.keys(m(R)().pointsCategories[d].pointsCategory.data),(t,s)=>(v(),q("div",{key:s,class:"row"},[p("div",Bt,I(t),1),p("div",null,I(m(R)().pointsCategories[d].pointsCategory.data[t]),1)]))),128))]),_:2},1024)):j("",!0)]),_:2},1024)]),_:2},1032,["caption","label"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),He=de({name:"QCardActions",props:{...ct,vertical:Boolean},setup(e,{slots:l}){const i=pt(e),a=V(()=>`q-card__actions ${i.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>k("div",{class:a.value},ue(l.default))}}),Ft=ne({__name:"PermissionsAddAccount",setup(e){const l=[he],i=E("3q9HnMCZTVnLwgHzzTcu9ALi6kJFvnpFcq1TW7gxPeyL"),a=E(l[0]),d=E(0);E();async function t(){const s=Ve(_e()),c=[];c.push(X.PlayerProfile.addKeys(D().playerProfileProgram.value,s,b().playerProfile,re.SagePermissions,he,[{key:new $e(i.value),permissions:re.SagePermissions.all(),expireTime:d.value==0?null:d.value}])),await Ie("Add permission account",c,s),await b().updateStore(),console.log("Sending TX")}return(s,c)=>(v(),T(N,{bordered:"",flat:""},{default:o(()=>[n(He,null,{default:o(()=>c[3]||(c[3]=[p("div",{class:"text-weight-thin text-center col"},"Add a new wallet to the permission list",-1)])),_:1}),n(C,null,{default:o(()=>[n(qe,{modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=y=>i.value=y),label:"Key",square:""},null,8,["modelValue"]),n(We,{modelValue:a.value,"onUpdate:modelValue":c[1]||(c[1]=y=>a.value=y),options:l,label:"Scope",square:""},null,8,["modelValue"]),n(qe,{modelValue:d.value,"onUpdate:modelValue":c[2]||(c[2]=y=>d.value=y),label:"Expire Time",square:"",type:"number"},null,8,["modelValue"])]),_:1}),n(He,null,{default:o(()=>[n(Le,{class:"full-width",color:"primary",onClick:t},{default:o(()=>c[4]||(c[4]=[K("ADD")])),_:1})]),_:1})]),_:1}))}}),Ut={class:"col"},jt=ne({__name:"PermissionEditable",props:["publicKey","scope","inputPermissions","expireTime"],setup(e){const l=e,i=E();l.scope.toString()==be.toString()&&(i.value=X.ProfilePermissions.fromPermissions(l.inputPermissions)),l.scope.toString()==he.toString()&&(i.value=re.SagePermissions.fromPermissions(l.inputPermissions));async function a(){const d=Ve(_e()),t=[];t.push(X.PlayerProfile.removeKeys(D().playerProfileProgram.value,{profileKey:b().playerProfile?.key,key:d,keyIndex:0,playerProfileProgram:D().playerProfileProgram.value},Ae(),[1,2])),t.push(X.PlayerProfile.addKeys(D().playerProfileProgram.value,d,b().playerProfile,re.SagePermissions,he,[{key:new $e(l.publicKey.toString()),permissions:i.value,expireTime:l.expireTime>=0?null:l.expireTime}])),await Ie("Update profile permissions",t,d),await b().updateStore()}return(d,t)=>(v(),q(B,null,[i.value?(v(),T(C,{key:0},{default:o(()=>[(v(!0),q(B,null,F(Object.keys(i.value),s=>(v(),q("div",{key:s,class:"row"},[p("div",Ut,I(s),1),p("div",null,[n(te,{modelValue:i.value[s],"onUpdate:modelValue":c=>i.value[s]=c,disable:e.scope.toString()==m(be).toString(),"checked-icon":"check",dense:"",label:"","unchecked-icon":"clear"},null,8,["modelValue","onUpdate:modelValue","disable"])])]))),128))]),_:1})):j("",!0),e.scope.toString()!=m(be).toString()?(v(),T(C,{key:1},{default:o(()=>[n(Le,{disable:i.value?.getPermissions().toString()==e.inputPermissions.toString(),class:"full-width",color:"primary",label:"Update",onClick:a},null,8,["disable"])]),_:1})):j("",!0)],64))}}),Rt={class:"row"},Mt={class:"row"},Ht={class:"row"},zt=ne({__name:"PlayerProfilePermissions",setup(e){return(l,i)=>(v(),T(N,{bordered:"",flat:""},{default:o(()=>[n(C,{class:"row items-center q-gutter-md"},{default:o(()=>[n(se,{name:"vpn_key",size:"md"}),i[0]||(i[0]=p("div",{class:"text-h6"},"Permissions",-1))]),_:1}),m(b)().playerProfile?(v(),T(C,{key:0,class:"q-gutter-y-md"},{default:o(()=>[(v(!0),q(B,null,F(m(b)().playerProfile.profileKeys,(a,d)=>(v(),T(N,{key:d,bordered:"",class:"col",flat:""},{default:o(()=>[n(C,null,{default:o(()=>[p("div",Rt,[i[1]||(i[1]=p("div",{class:"col"},"Key",-1)),p("div",null,I(a.key),1)]),p("div",Mt,[i[2]||(i[2]=p("div",{class:"col"},"Scope",-1)),p("div",null,I(a.scope),1)]),p("div",Ht,[i[3]||(i[3]=p("div",{class:"col"},"ExpireTime",-1)),p("div",null,I(a.expireTime),1)])]),_:2},1024),n(C,null,{default:o(()=>[n(jt,{"expire-time":a.expireTime,"input-permissions":a.permissions,publicKey:a.key,scope:a.scope},null,8,["expire-time","input-permissions","publicKey","scope"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):j("",!0),n(C,null,{default:o(()=>[n(Ft)]),_:1})]),_:1}))}}),Gt={class:"col row q-gutter-sm"},Yt={class:"col row"},Wt={class:"col row q-gutter-sm"},Xt={class:"col row"},Jt={class:"col row q-gutter-sm"},Zt={class:"col row"},ea={class:"col row q-gutter-sm"},ta={class:"col row"},aa=ne({__name:"CreateAccounts",setup(e){const l=E(!1),i=E(!1),a=E(!1),d=E(!1),t=E([]),s=et(Be.Faction),c=E("test"),y=E(s[1]);_();const L=V(()=>({playerProfile:b().playerProfile,faction:W().profileFaction,sagePlayerProfile:O().sagePlayerProfile,pointsCategories:R().pointsCategories}));le(()=>L,()=>_(),{deep:!0});function _(){l.value=!1,i.value=!1,a.value=!1,d.value=!1,R().pointsCategories.forEach(()=>{t.value.push(!1)}),b().hasProfile||(l.value=!0),b().hasProfile&&(b().playerName||(i.value=!0),W().profileFaction||(a.value=!0),O().sagePlayerProfile||(d.value=!0),t.value=[],R().pointsCategories.forEach(P=>{P.pointsCategory?t.value.push(!1):t.value.push(!0)}))}async function w(){const P=Ue().useSquads?Oe(Ae()):Ve(_e()),r=[];if(Ue().useSquads){const{wallet:u}=_e(),S=u.value?.adapter,A=S&&"standard"in S&&"fuse:getEphemeralSigners"in S.wallet.features&&(await S.wallet.features["fuse:getEphemeralSigners"].getEphemeralSigners(1))[0],$=A?new $e(A):null;console.log("ephemeralSignerPubkey"),console.log($)}const h=Oe(ft.generate().publicKey);if(l.value&&r.push(X.PlayerProfile.createProfile(D().playerProfileProgram.value,h,[{key:P.publicKey(),expireTime:null,scope:be,permissions:X.ProfilePermissions.all()}],1)),i.value){const{instructions:u}=X.PlayerProfile.setName(D().playerProfileProgram.value,{profile:b().playerProfile,key:P,playerProfileProgram:D().playerProfileProgram.value},c.value);r.push(u)}if(a.value){const{instructions:u}=Be.ProfileFactionAccount.chooseFaction(D().profileFactionProgram.value,{profile:b().playerProfile,key:P,playerProfileProgram:D().playerProfileProgram.value},tt(y.value));r.push(u)}if(d.value){const u=re.SagePlayerProfile.registerSagePlayerProfile(D().sageProgram.value,b().playerProfile.key,O().game.key,O().game.data.gameState);r.push(u)}t.value.forEach((u,S)=>{if(u){const{instructions:A}=vt.UserPoints.createUserPointAccount(D().pointsProgram.value,b().playerProfile.key,R().pointsCategories[S].key);r.push(A)}}),await Ie(`Create Profile Instructions LEN=${r.length}`,r,P),await b().updateStore(),await W().updateStore(),await O().updateStore()}return(P,r)=>(v(),T(N,{bordered:"",flat:""},{default:o(()=>[n(C,{class:"row items-center q-gutter-md"},{default:o(()=>[n(se,{name:"create",size:"md"}),r[6]||(r[6]=p("div",{class:"text-h6"},"Create Accounts",-1))]),_:1}),n(C,null,{default:o(()=>[n(Te,{bordered:"",class:"rounded-borders",separator:""},{default:o(()=>[ee((v(),T(ae,{disable:m(b)().hasProfile,clickable:""},{default:o(()=>[n(te,{modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=h=>l.value=h),"checked-icon":"check",color:"secondary","unchecked-icon":"clear"},null,8,["modelValue"]),p("div",null,[n(z,null,{default:o(()=>r[7]||(r[7]=[K("Profile")])),_:1}),n(Y,{caption:""},{default:o(()=>r[8]||(r[8]=[K("Create the player profile account")])),_:1})])]),_:1},8,["disable"])),[[ie]]),ee((v(),T(ae,{disable:!m(b)().hasProfile,clickable:""},{default:o(()=>[p("div",Gt,[p("div",Yt,[n(te,{modelValue:i.value,"onUpdate:modelValue":r[1]||(r[1]=h=>i.value=h),"checked-icon":"check",color:"secondary","unchecked-icon":"clear"},null,8,["modelValue"]),p("div",null,[n(z,null,{default:o(()=>r[9]||(r[9]=[K("Name")])),_:1}),n(Y,{caption:""},{default:o(()=>r[10]||(r[10]=[K("Create the player name account")])),_:1})])]),n(qe,{modelValue:c.value,"onUpdate:modelValue":r[2]||(r[2]=h=>c.value=h),class:"col",dense:"",label:"Player name"},null,8,["modelValue"])])]),_:1},8,["disable"])),[[ie]]),ee((v(),T(ae,{disable:!m(b)().hasProfile,clickable:""},{default:o(()=>[p("div",Wt,[p("div",Xt,[n(te,{modelValue:a.value,"onUpdate:modelValue":r[3]||(r[3]=h=>a.value=h),"checked-icon":"check",color:"secondary","unchecked-icon":"clear"},null,8,["modelValue"]),p("div",null,[n(z,null,{default:o(()=>r[11]||(r[11]=[K("Faction")])),_:1}),n(Y,{caption:""},{default:o(()=>r[12]||(r[12]=[K("Choose a faction")])),_:1})])]),n(We,{modelValue:y.value,"onUpdate:modelValue":r[4]||(r[4]=h=>y.value=h),options:m(s),class:"col",dense:""},null,8,["modelValue","options"])])]),_:1},8,["disable"])),[[ie]]),ee((v(),T(ae,{disable:!m(b)().hasProfile,clickable:""},{default:o(()=>[p("div",Jt,[p("div",Zt,[n(te,{modelValue:d.value,"onUpdate:modelValue":r[5]||(r[5]=h=>d.value=h),"checked-icon":"check",color:"secondary","unchecked-icon":"clear"},null,8,["modelValue"]),p("div",null,[n(z,null,{default:o(()=>r[13]||(r[13]=[K("Sage Profile")])),_:1}),n(Y,{caption:""},{default:o(()=>r[14]||(r[14]=[K("Create sage player profile")])),_:1})])])])]),_:1},8,["disable"])),[[ie]]),(v(!0),q(B,null,F(m(R)().pointsCategories,(h,u)=>ee((v(),T(ae,{key:u,disable:!m(b)().hasProfile,clickable:""},{default:o(()=>[p("div",ea,[p("div",ta,[n(te,{modelValue:t.value[u],"onUpdate:modelValue":S=>t.value[u]=S,"checked-icon":"check",color:"secondary","unchecked-icon":"clear"},null,8,["modelValue","onUpdate:modelValue"]),p("div",null,[n(z,null,{default:o(()=>[K("Points "+I(h.name),1)]),_:2},1024),n(Y,{caption:""},{default:o(()=>r[15]||(r[15]=[K("Create point")])),_:1})])])])]),_:2},1032,["disable"])),[[ie]])),128))]),_:1})]),_:1}),n(C,null,{default:o(()=>[n(Le,{class:"full-width",color:"primary",label:"Send",onClick:w})]),_:1})]),_:1}))}}),la={class:"col"},fa=ne({__name:"PlayerProfile",setup(e){mt(async()=>{await Ne()}),le(()=>Ae(),async()=>{await Ne()});const l=E("overview");return(i,a)=>(v(),q("div",la,[n(at,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=d=>l.value=d),align:"justify","inline-label":""},{default:o(()=>[n(Qe,{icon:"dashboard",label:"Overview",name:"overview"}),n(Qe,{icon:"settings",label:"Permissions",name:"permissions"})]),_:1},8,["modelValue"]),n(It,{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=d=>l.value=d)},{default:o(()=>[n(Me,{class:"q-gutter-md",name:"overview"},{default:o(()=>[n(Dt),n(aa)]),_:1}),n(Me,{name:"permissions"},{default:o(()=>[n(zt)]),_:1})]),_:1},8,["modelValue"])]))}});export{fa as default};
