import{Q as x}from"./QPage-hTKtXXhp.js";import{aa as h,E as y,an as L,ac as r,am as w,af as t,b4 as j,ar as I,au as T,ad as i,ae as a,ak as o,ah as f,w as U,y as H,x as M,z as D,al as S,aj as b,ag as N,at as V,J as G,aB as O,ai as A,K as z,F}from"./index-COgUWfzO.js";import{p as J}from"./QSelect-qA4vIaHT.js";import{b as C,h as K,f as W,s as Q,u as q,c as g,a as m,L as Y,e as B,Q as R}from"./LoadingAnimation-D_zmzWNE.js";import{G as X,u as _,b as Z,c as E,Q as v,a as ee,_ as ae}from"./InfoBanner.vue_vue_type_script_setup_true_lang-CIzYiA4f.js";import{a as te,Q as se}from"./QCard-Cm7Vl2uP.js";import{Q as $}from"./QInput-BilcvxG3.js";import"./index-DVKssMzM.js";import"./QSeparator-DpXbUoig.js";import"./use-checkbox-CTqGjcbb.js";import"./QImg-CmbOHsdO.js";const re=h({__name:"FleetCreateButton",setup(l){const n=y("test"),p=L();async function c(){const s=C(),u=[],e=new X(C());try{const d=_().gameTokenAccountsSelected[0].mint,P=_().gameTokenAccountsSelected[0].uiAmountSelected;u.push(...e.createNewFleetIx(d,P,n.value)),u.length>0&&await K("Instructions Withdraw",u,s,W.DEFAULT_FEE)}catch(d){p.notify({type:"warning",message:"warning",caption:d.toString(),position:"bottom-right"})}}return(s,u)=>(r(),w(T,null,[t($,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=e=>n.value=e),label:"Fleet Name"},null,8,["modelValue"]),t(I,{class:"full-width",color:"primary",label:"Form new fleet",onClick:j(c,["prevent"])})],64))}}),ne=h({__name:"FleetCreateView",setup(l){return _(),(n,p)=>(r(),i(se,{flat:""},{default:a(()=>[t(te,null,{default:a(()=>[o(_)().gameTokenAccountsSelected?(r(),i(re,{key:0})):f("",!0)]),_:1}),o(_)().walletTokenAccounts?(r(),i(Z,{key:0,rows:o(_)().gameTokenAccounts?.filter(c=>c.itemType=="ship"),"item-type":"ship",selection:"multiple"},null,8,["rows"])):f("",!0)]),_:1}))}}),k=U({name:"QTr",props:{props:Object,noHover:Boolean},setup(l,{slots:n}){const p=H(()=>"q-tr"+(l.props===void 0||l.props.header===!0?"":" "+l.props.__trClass)+(l.noHover===!0?" q-tr--no-hover":""));return()=>M("tr",{class:p.value},D(n.default))}}),oe={class:"text-grey-5"},le={class:"text-left"},ue=h({__name:"FleetTable",props:{rows:{type:{},required:!0}},setup(l){const n=l,p=y(),c=y([{name:"extend",required:!0,align:"left",sortable:!1},{name:"fleetLabel",required:!0,label:"Fleet name",align:"left",field:s=>Q.byteArrayToString(s.data.fleetLabel),sortable:!0},{name:"state",required:!0,label:"State",align:"left",field:s=>Object.keys(s.state)[0],sortable:!0}]);return(s,u)=>n.rows?(r(),i(ee,{key:0,columns:c.value,filter:p.value,pagination:{rowsPerPage:0,sortBy:"name",descending:!0},rows:l.rows,flat:"","hide-bottom":"","row-key":"name",square:""},{"top-left":a(()=>[S("div",oe,"Found "+b(l.rows.length)+" Items",1)]),"top-right":a(()=>[t($,{modelValue:p.value,"onUpdate:modelValue":u[0]||(u[0]=e=>p.value=e),borderless:"",debounce:"300",dense:"",placeholder:"Search"},{append:a(()=>[t(N,{name:"search"})]),_:1},8,["modelValue"])]),header:a(e=>[t(k,{props:e},{default:a(()=>[t(E,{"auto-width":""}),(r(!0),w(T,null,V(e.cols,d=>(r(),i(E,{key:d.name,props:e},{default:a(()=>[A(b(d.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(e=>[t(k,{props:e},{default:a(()=>[t(v,{"auto-width":""},{default:a(()=>[t(I,{icon:e.expand?"remove":"add",color:"accent",dense:"",round:"",size:"sm",onClick:d=>e.expand=!e.expand},null,8,["icon","onClick"])]),_:2},1024),(r(!0),w(T,null,V(e.cols,d=>(r(),i(v,{key:d.name,props:e},{default:a(()=>[A(b(d.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"]),G(t(k,{props:e},{default:a(()=>[t(v,{colspan:"100%"},{default:a(()=>[u[1]||(u[1]=S("div",null,null,-1)),S("div",le,b(JSON.stringify(e.row,null,2))+".",1)]),_:2},1024)]),_:2},1032,["props"]),[[O,e.expand]])]),_:1},8,["columns","filter","rows"])):f("",!0)}}),ie={key:1},Se=h({__name:"FleetPage",setup(l){const n=y("manage");return z(async()=>{await q().updateStore(g()),await m().updateStore()}),F(()=>g(),async()=>{await q().updateStore(g())}),F(()=>m().starbase,async()=>{await m().updateStore(),await _().updateStore(g())}),(p,c)=>o(m)().starbases?.length?(r(),i(x,{key:1,class:""},{default:a(()=>[t(J,{modelValue:o(m)().starbase,"onUpdate:modelValue":c[0]||(c[0]=s=>o(m)().starbase=s),"option-label":s=>o(Q.byteArrayToString)(s.data.name),options:o(m)().starbases?.filter(s=>o(Q.byteArrayToString)(s.data.name).includes("Central")),class:"",label:"Selected Starbase",square:"",standout:""},{prepend:a(()=>[t(N,{name:"home"})]),_:1},8,["modelValue","option-label","options"]),o(m)().starbase?f("",!0):(r(),i(ae,{key:0,message:"Please select a starbase"})),o(m)().starbase?(r(),w("div",ie,[t(R,{modelValue:n.value,"onUpdate:modelValue":c[1]||(c[1]=s=>n.value=s),"active-bg-color":"secondary",align:"justify","inline-label":""},{default:a(()=>[t(B,{label:"Manage",name:"manage"}),t(B,{label:"Create",name:"create"})]),_:1},8,["modelValue"]),n.value=="manage"?(r(),i(ue,{key:0,rows:o(m)().fleets},null,8,["rows"])):f("",!0),n.value=="create"?(r(),i(ne,{key:1})):f("",!0)])):f("",!0)]),_:1})):(r(),i(x,{key:0,class:"row justify-center items-center"},{default:a(()=>[t(Y)]),_:1}))}});export{Se as default};
