import{Q as k}from"./QPage-BYT7qvp1.js";import{o as Q,p as _}from"./QInput-CFC1XhfP.js";import{g as $,h as V,b as q,L as P,Q as y,a as A}from"./LoadingAnimation-DvM0GF_L.js";import{a0 as S,ae as I,a2 as s,a3 as u,ai as E,be as c,bf as p,E as h,bg as D,a4 as d,a5 as l,ad as b,a9 as w,a7 as f,ab as N,a6 as B,aa as i,K as F,aC as G,b4 as U,b1 as C,F as W}from"./index-BY-KNbgh.js";import{G as j,Q as L,a as H,_ as g,b as T}from"./InfoBanner.vue_vue_type_script_setup_true_lang-CKAfTJXH.js";import{_ as K}from"./HeaderBanner.vue_vue_type_script_setup_true_lang-CrH-yIWM.js";import"./QCard-DL9h0O9L.js";import"./use-checkbox-qgZ18kRg.js";import"./QImg-BfP5kxka.js";const R=S({__name:"CrewDepositWithdrawAction",props:{direction:{type:{},required:!0}},setup(m){const n=I(),t=m;async function v(){const a=$(),e=[],r=new j(a);try{if(c().starbaseCrewAccountsSelected?.length===0)throw Error("Please select some crew");switch(t.direction){case"deposit":for(const o of c().starbaseCrewAccountsSelected??[])e.push(...await r.depositCrewToGameIx(o));break;case"withdraw":for(const o of c().starbaseCrewAccountsSelected??[])e.push(...await r.withdrawCrewFromGameIx(o));break}e.length>0&&await V(`Crew ${t.direction} [${c().starbaseCrewAccountsSelected?.length}]`,e,a,q.DEFAULT_FEE),await p().updateWalletCrewAccounts(a.publicKey()),await c().updateStarbaseCrewAccounts()}catch(o){n.notify({type:"warning",message:"warning",caption:o.toString(),position:"bottom-right"})}}return(a,e)=>(s(),u(E,{"icon-right":t.direction==="deposit"?"call_made":"call_received",label:t.direction==="deposit"?"Deposit":"Withdraw",color:"primary",onClick:v},null,8,["icon-right","label"]))}}),M={class:"text-grey-5"},Y={key:0},z={key:1},J={key:2},O={key:3},X={key:4},Z={key:5},ee={key:6},x=S({__name:"CrewTable",props:{rows:{type:{},required:!0},action:{type:String},selection:{type:{},default:void 0}},setup(m){const n=m,t=h(),v=[{name:"id_name",required:!0,label:"ID-Name",align:"left",field:a=>a.content.metadata.name,sortable:!0},{name:"name",required:!0,label:"Name",align:"left",field:a=>a.content.metadata.attributes.find(e=>e.trait_type=="name")?.value,sortable:!0},{name:"species",required:!0,label:"Species",align:"left",field:a=>a.content.metadata.attributes.find(e=>e.trait_type=="species")?.value,sortable:!0},{name:"sex",required:!0,label:"Sex",align:"left",field:a=>a.content.metadata.attributes.find(e=>e.trait_type=="sex")?.value,sortable:!0},{name:"age",required:!0,label:"Sex",align:"left",field:a=>a.content.metadata.attributes.find(e=>e.trait_type=="age")?.value,sortable:!0},{name:"rarity",required:!0,label:"Rarity",align:"left",field:a=>a.content.metadata.attributes.find(e=>e.trait_type=="rarity")?.value,sortable:!0},{name:"action",required:!0,label:"Action",align:"right",field:a=>a.content.metadata.attributes.find(e=>e.trait_type=="rarity")?.value,sortable:!0}];return(a,e)=>(s(),u(H,{selected:i(c)().starbaseCrewAccountsSelected,"onUpdate:selected":e[1]||(e[1]=r=>i(c)().starbaseCrewAccountsSelected=r),columns:v,filter:t.value,pagination:{rowsPerPage:0,sortBy:"name",descending:!0},rows:m.rows,selection:m.selection,flat:"","hide-bottom":"",square:""},D({"top-left":d(()=>[N("div",M,"Found "+w(m.rows.length)+" Items",1)]),"top-right":d(()=>[l(Q,{modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=r=>t.value=r),borderless:"",debounce:"300",dense:"",placeholder:"Search"},{append:d(()=>[l(B,{name:"search"})]),_:1},8,["modelValue"])]),_:2},[n?{name:"body-cell",fn:d(r=>[l(L,{props:r},{default:d(()=>[r.col.name=="symbol"?(s(),b("div",Y,w(r.row.content.metadata.symbol),1)):r.col.name=="id_name"?(s(),b("div",z,w(r.row.content.metadata.name),1)):r.col.name=="name"?(s(),b("div",J,w(r.row.content.metadata.attributes.find(o=>o.trait_type=="name")?.value),1)):r.col.name=="species"?(s(),b("div",O,w(r.row.content.metadata.attributes.find(o=>o.trait_type=="species")?.value),1)):r.col.name=="sex"?(s(),b("div",X,w(r.row.content.metadata.attributes.find(o=>o.trait_type=="sex")?.value),1)):r.col.name=="age"?(s(),b("div",Z,w(r.row.content.metadata.attributes.find(o=>o.trait_type=="age")?.value),1)):r.col.name=="rarity"?(s(),b("div",ee,w(r.row.content.metadata.attributes.find(o=>o.trait_type=="rarity")?.value),1)):f("",!0),r.col.name=="action"?(s(),u(R,{key:7,direction:m.action=="deposit"?"deposit":"withdraw"},null,8,["direction"])):f("",!0)]),_:2},1032,["props"])]),key:"0"}:void 0]),1032,["selected","filter","rows","selection"]))}}),te={key:1},de=S({__name:"PortalPage",setup(m){const n=h("deposit"),t=h("ship");return F(async()=>{await G().updateStore(U()),await C().updateStore()}),W(()=>n.value,()=>{c().starbaseTokenAccountsSelected=[],c().starbaseCrewAccountsSelected=[]}),(v,a)=>i(C)().starbases?.length?(s(),u(k,{key:1,class:""},{default:d(()=>[i(c)().currentStarbase?(s(),b("div",te,[l(K,{text:"Wallet/Sage Portal"}),l(_),l(A,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e),"active-bg-color":"primary",align:"justify","inline-label":""},{default:d(()=>[l(y,{icon:"call_made",label:"Deposit",name:"deposit"}),l(y,{icon:"call_received",label:"Withdraw",name:"withdraw"})]),_:1},8,["modelValue"]),l(_),l(A,{modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value=e),"active-bg-color":"primary",align:"justify","inline-label":""},{default:d(()=>[l(y,{icon:"sailing",label:"Ships",name:"ship"}),l(y,{icon:"category",label:"Resources",name:"resource"}),l(y,{icon:"person",label:"Crew",name:"crew"})]),_:1},8,["modelValue"]),l(_),!i(p)().walletTokenAccounts&&(t.value=="ship"||t.value=="resource")?(s(),u(g,{key:0,message:`No ${t.value}s found to ${n.value}`},null,8,["message"])):f("",!0),!i(p)().walletCrewAccounts&&t.value=="crew"?(s(),u(g,{key:1,message:`No ${t.value} found to ${n.value}`},null,8,["message"])):f("",!0),i(p)().walletTokenAccounts&&(t.value=="ship"||t.value=="resource")&&n.value=="deposit"?(s(),u(T,{key:2,action:n.value,"item-type":t.value,rows:i(p)().walletTokenAccounts?.filter(e=>e.itemType==t.value),selection:"multiple"},null,8,["action","item-type","rows"])):f("",!0),i(c)().starbaseTokenAccounts&&(t.value=="ship"||t.value=="resource")&&n.value=="withdraw"?(s(),u(T,{key:3,action:n.value,"item-type":t.value,rows:i(c)().starbaseTokenAccounts?.filter(e=>e.itemType==t.value),selection:"multiple"},null,8,["action","item-type","rows"])):f("",!0),i(p)().walletCrewAccounts&&t.value=="crew"&&n.value=="deposit"?(s(),u(x,{key:4,action:n.value,rows:i(p)().walletCrewAccounts,selection:"multiple"},null,8,["action","rows"])):f("",!0),i(c)().starbaseCrewAccounts&&t.value=="crew"&&n.value=="withdraw"?(s(),u(x,{key:5,action:n.value,rows:i(c)().starbaseCrewAccounts,selection:"multiple"},null,8,["action","rows"])):f("",!0)])):(s(),u(g,{key:0,message:"Please select a starabse"}))]),_:1})):(s(),u(k,{key:0,class:"row justify-center items-center"},{default:d(()=>[l(P)]),_:1}))}});export{de as default};
