import{u as D,g as Xe,a as Ge,b as qe,h as Ke,c as ie,p as Xt,s as Gt,P as Wt,d as Jt,Q as en,e as ct}from"./ToSigner-dpW_Gydb.js";import{Q as ne}from"./QSeparator-ao3v9kWS.js";import{O as tn,Q as me,L as nn,R as on,S as we,T as Ve,X as dt,Z as Re,Y as ze,E as Y,y as q,F as ce,I as et,x as E,aw as Dt,az as sn,z as Se,aA as rn,w as be,a4 as an,G as xt,aB as un,aC as Rt,J as ae,aD as ln,ag as Pe,aE as Ct,aF as Et,aG as cn,aa as J,aj as W,ak as $,ac as R,ad as K,ae as T,af as v,am as Q,as as _e,at as de,ah as Ye,al as x,aH as dn,aI as fn,aJ as Te,aK as tt,B as At,aL as nt,aM as Ot,aN as mn,aO as pn,aP as X,aQ as U,aR as Ce,aS as $e,aT as Ne,aU as ot,aV as it,aW as st,P as oe,aX as gn,ar as Ue,ai as L,aY as Ee,aZ as Qe,a_ as ft,a$ as hn,b0 as pe,K as yn}from"./index-lnTujZ_J.js";import{g as mt,s as pt,Q as ue}from"./QToggle-fjOKpc5T.js";import{c as vn,u as Pn,h as Sn,q as bn,i as _n,r as Tn,n as le,m as te,Q as G,t as O,v as Mn,p as qt,o as De,w as In,x as kn}from"./QSelect-C4cmmxKO.js";import{b as wn,u as Kt,a as Yt}from"./use-dark-C2FuClS-.js";import{a as N,Q as fe}from"./QCard-dcL1UW-J.js";import{a as $t}from"./use-checkbox-BGGu5QXs.js";import{Q as We}from"./QInput-beT9bVjb.js";import"./index-DVKssMzM.js";function Dn(e){const t=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((i,o)=>{const u=parseFloat(i);u&&(t[o]=u)}),t}const xn=tn({name:"touch-swipe",beforeMount(e,{value:t,arg:i,modifiers:o}){if(o.mouse!==!0&&me.has.touch!==!0)return;const u=o.mouseCapture===!0?"Capture":"",n={handler:t,sensitivity:Dn(i),direction:mt(o),noop:nn,mouseStart(r){pt(r,n)&&on(r)&&(we(n,"temp",[[document,"mousemove","move",`notPassive${u}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(r,!0))},touchStart(r){if(pt(r,n)){const c=r.target;we(n,"temp",[[c,"touchmove","move","notPassiveCapture"],[c,"touchcancel","end","notPassiveCapture"],[c,"touchend","end","notPassiveCapture"]]),n.start(r)}},start(r,c){me.is.firefox===!0&&Ve(e,!0);const d=dt(r);n.event={x:d.left,y:d.top,time:Date.now(),mouse:c===!0,dir:!1}},move(r){if(n.event===void 0)return;if(n.event.dir!==!1){Re(r);return}const c=Date.now()-n.event.time;if(c===0)return;const d=dt(r),_=d.left-n.event.x,f=Math.abs(_),p=d.top-n.event.y,m=Math.abs(p);if(n.event.mouse!==!0){if(f<n.sensitivity[1]&&m<n.sensitivity[1]){n.end(r);return}}else if(window.getSelection().toString()!==""){n.end(r);return}else if(f<n.sensitivity[2]&&m<n.sensitivity[2])return;const s=f/c,a=m/c;n.direction.vertical===!0&&f<m&&f<100&&a>n.sensitivity[0]&&(n.event.dir=p<0?"up":"down"),n.direction.horizontal===!0&&f>m&&m<100&&s>n.sensitivity[0]&&(n.event.dir=_<0?"left":"right"),n.direction.up===!0&&f<m&&p<0&&f<100&&a>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&f<m&&p>0&&f<100&&a>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&f>m&&_<0&&m<100&&s>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&f>m&&_>0&&m<100&&s>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(Re(r),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),vn(),n.styleCleanup=l=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const h=()=>{document.body.classList.remove("no-pointer-events--children")};l===!0?setTimeout(h,50):h()}),n.handler({evt:r,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:c,distance:{x:f,y:m}})):n.end(r)},end(r){n.event!==void 0&&(ze(n,"temp"),me.is.firefox===!0&&Ve(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),r!==void 0&&n.event.dir!==!1&&Re(r),n.event=void 0)}};if(e.__qtouchswipe=n,o.mouse===!0){const r=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";we(n,"main",[[e,"mousedown","mouseStart",`passive${r}`]])}me.has.touch===!0&&we(n,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const i=e.__qtouchswipe;i!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&i.end(),i.handler=t.value),i.direction=mt(t.modifiers))},beforeUnmount(e){const t=e.__qtouchswipe;t!==void 0&&(ze(t,"main"),ze(t,"temp"),me.is.firefox===!0&&Ve(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchswipe)}});function Rn(){let e=Object.create(null);return{getCache:(t,i)=>e[t]===void 0?e[t]=typeof i=="function"?i():i:e[t],setCache(t,i){e[t]=i},hasCache(t){return Object.hasOwnProperty.call(e,t)},clearCache(t){t!==void 0?delete e[t]:e=Object.create(null)}}}const Cn={name:{required:!0},disable:Boolean},gt={setup(e,{slots:t}){return()=>E("div",{class:"q-panel scroll",role:"tabpanel"},Se(t.default))}},En={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},An=["update:modelValue","beforeTransition","transition"];function On(){const{props:e,emit:t,proxy:i}=et(),{getCache:o}=Rn(),{registerTimeout:u}=wn();let n,r;const c=Y(null),d={value:null};function _(k){const A=e.vertical===!0?"up":"left";C((i.$q.lang.rtl===!0?-1:1)*(k.direction===A?1:-1))}const f=q(()=>[[xn,_,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),p=q(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),m=q(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),s=q(()=>`--q-transition-duration: ${e.transitionDuration}ms`),a=q(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),l=q(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),h=q(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);ce(()=>e.modelValue,(k,A)=>{const F=b(k)===!0?S(k):-1;r!==!0&&I(F===-1?0:F<S(A)?-1:1),d.value!==F&&(d.value=F,t("beforeTransition",k,A),u(()=>{t("transition",k,A)},e.transitionDuration))});function g(){C(1)}function y(){C(-1)}function P(k){t("update:modelValue",k)}function b(k){return k!=null&&k!==""}function S(k){return n.findIndex(A=>A.props.name===k&&A.props.disable!==""&&A.props.disable!==!0)}function w(){return n.filter(k=>k.props.disable!==""&&k.props.disable!==!0)}function I(k){const A=k!==0&&e.animated===!0&&d.value!==-1?"q-transition--"+(k===-1?p.value:m.value):null;c.value!==A&&(c.value=A)}function C(k,A=d.value){let F=A+k;for(;F!==-1&&F<n.length;){const M=n[F];if(M!==void 0&&M.props.disable!==""&&M.props.disable!==!0){I(k),r=!0,t("update:modelValue",M.props.name),setTimeout(()=>{r=!1});return}F+=k}e.infinite===!0&&n.length!==0&&A!==-1&&A!==n.length&&C(k,k===-1?n.length:-1)}function V(){const k=S(e.modelValue);return d.value!==k&&(d.value=k),!0}function Me(){const k=b(e.modelValue)===!0&&V()&&n[d.value];return e.keepAlive===!0?[E(rn,l.value,[E(h.value===!0?o(a.value,()=>({...gt,name:a.value})):gt,{key:a.value,style:s.value},()=>k)])]:[E("div",{class:"q-panel scroll",style:s.value,key:a.value,role:"tabpanel"},[k])]}function Ie(){if(n.length!==0)return e.animated===!0?[E(Dt,{name:c.value},Me)]:Me()}function He(k){return n=sn(Se(k.default,[])).filter(A=>A.props!==null&&A.props.slot===void 0&&b(A.props.name)===!0),n.length}function Le(){return n}return Object.assign(i,{next:g,previous:y,goTo:P}),{panelIndex:d,panelDirectives:f,updatePanelsList:He,updatePanelIndex:V,getPanelContent:Ie,getEnabledPanels:w,getPanels:Le,isValidPanelName:b,keepAliveProps:l,needsUniqueKeepAliveWrapper:h,goToPanelByOffset:C,goToPanel:P,nextPanel:g,previousPanel:y}}const ht=be({name:"QTabPanel",props:Cn,setup(e,{slots:t}){return()=>E("div",{class:"q-tab-panel",role:"tabpanel"},Se(t.default))}}),qn=be({name:"QTabPanels",props:{...En,...Kt},emits:An,setup(e,{slots:t}){const i=et(),o=Yt(e,i.proxy.$q),{updatePanelsList:u,getPanelContent:n,panelDirectives:r}=On(),c=q(()=>"q-tab-panels q-panel-parent"+(o.value===!0?" q-tab-panels--dark q-dark":""));return()=>(u(t),an("div",{class:c.value},n(),"pan",e.swipeable,()=>r.value))}}),Kn=be({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:t,emit:i}){let o=!1,u,n,r=null,c=null,d,_;function f(){u&&u(),u=null,o=!1,r!==null&&(clearTimeout(r),r=null),c!==null&&(clearTimeout(c),c=null),n!==void 0&&n.removeEventListener("transitionend",d),d=null}function p(l,h,g){h!==void 0&&(l.style.height=`${h}px`),l.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,u=g}function m(l,h){l.style.overflowY=null,l.style.height=null,l.style.transition=null,f(),h!==_&&i(h)}function s(l,h){let g=0;n=l,o===!0?(f(),g=l.offsetHeight===l.scrollHeight?0:void 0):(_="hide",l.style.overflowY="hidden"),p(l,g,h),r=setTimeout(()=>{r=null,l.style.height=`${l.scrollHeight}px`,d=y=>{c=null,(Object(y)!==y||y.target===l)&&m(l,"show")},l.addEventListener("transitionend",d),c=setTimeout(d,e.duration*1.1)},100)}function a(l,h){let g;n=l,o===!0?f():(_="show",l.style.overflowY="hidden",g=l.scrollHeight),p(l,g,h),r=setTimeout(()=>{r=null,l.style.height=0,d=y=>{c=null,(Object(y)!==y||y.target===l)&&m(l,"hide")},l.addEventListener("transitionend",d),c=setTimeout(d,e.duration*1.1)},100)}return xt(()=>{o===!0&&f()}),()=>E(Dt,{css:!1,appear:e.appear,onEnter:s,onLeave:a},t.default)}}),ee=un({}),Yn=Object.keys(Rt),Nt=be({name:"QExpansionItem",props:{...Rt,...Pn,...Kt,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Sn,"click","afterShow","afterHide"],setup(e,{slots:t,emit:i}){const{proxy:{$q:o}}=et(),u=Yt(e,o),n=Y(e.modelValue!==null?e.modelValue:e.defaultOpened),r=Y(null),c=bn(),{show:d,hide:_,toggle:f}=_n({showing:n});let p,m;const s=q(()=>`q-expansion-item q-item-type q-expansion-item--${n.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),a=q(()=>e.contentInsetLevel===void 0?null:{["padding"+(o.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),l=q(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),h=q(()=>{const M={};return Yn.forEach(Z=>{M[Z]=e[Z]}),M}),g=q(()=>l.value===!0||e.expandIconToggle!==!0),y=q(()=>e.expandedIcon!==void 0&&n.value===!0?e.expandedIcon:e.expandIcon||o.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),P=q(()=>e.disable!==!0&&(l.value===!0||e.expandIconToggle===!0)),b=q(()=>({expanded:n.value===!0,detailsId:c.value,toggle:f,show:d,hide:_})),S=q(()=>{const M=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:o.lang.label[n.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":n.value===!0?"true":"false","aria-controls":c.value,"aria-label":M}});ce(()=>e.group,M=>{m!==void 0&&m(),M!==void 0&&Ie()});function w(M){l.value!==!0&&f(M),i("click",M)}function I(M){M.keyCode===13&&C(M,!0)}function C(M,Z){Z!==!0&&r.value!==null&&r.value.focus(),f(M),Re(M)}function V(){i("afterShow")}function Me(){i("afterHide")}function Ie(){p===void 0&&(p=Tn()),n.value===!0&&(ee[e.group]=p);const M=ce(n,ke=>{ke===!0?ee[e.group]=p:ee[e.group]===p&&delete ee[e.group]}),Z=ce(()=>ee[e.group],(ke,Bt)=>{Bt===p&&ke!==void 0&&ke!==p&&_()});m=()=>{M(),Z(),ee[e.group]===p&&delete ee[e.group],m=void 0}}function He(){const M={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},Z=[E(Pe,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&n.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:y.value})];return P.value===!0&&(Object.assign(M,{tabindex:0,...S.value,onClick:C,onKeyup:I}),Z.unshift(E("div",{ref:r,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),E(G,M,()=>Z)}function Le(){let M;return t.header!==void 0?M=[].concat(t.header(b.value)):(M=[E(G,()=>[E(te,{lines:e.labelLines},()=>e.label||""),e.caption?E(te,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&M[e.switchToggleSide===!0?"push":"unshift"](E(G,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>E(Pe,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&M[e.switchToggleSide===!0?"unshift":"push"](He()),M}function k(){const M={ref:"item",style:e.headerStyle,class:e.headerClass,dark:u.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return g.value===!0&&(M.clickable=!0,M.onClick=w,Object.assign(M,l.value===!0?h.value:S.value)),E(le,M,Le)}function A(){return ae(E("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:a.value,id:c.value},Se(t.default)),[[ln,n.value]])}function F(){const M=[k(),E(Kn,{duration:e.duration,onShow:V,onHide:Me},A)];return e.expandSeparator===!0&&M.push(E(ne,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:u.value}),E(ne,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:u.value})),M}return e.group!==void 0&&Ie(),xt(()=>{m!==void 0&&m()}),()=>E("div",{class:s.value},[E("div",{class:"q-expansion-item__container relative-position"},F())])}}),Ut=864e5,$n=36e5,Je=6e4,Ft="YYYY-MM-DDTHH:mm:ss.SSSZ",Nn=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Un=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Ze={};function Fn(e,t){const i="("+t.days.join("|")+")",o=e+i;if(Ze[o]!==void 0)return Ze[o];const u="("+t.daysShort.join("|")+")",n="("+t.months.join("|")+")",r="("+t.monthsShort.join("|")+")",c={};let d=0;const _=e.replace(Un,p=>{switch(d++,p){case"YY":return c.YY=d,"(-?\\d{1,2})";case"YYYY":return c.YYYY=d,"(-?\\d{1,4})";case"M":return c.M=d,"(\\d{1,2})";case"Mo":return c.M=d++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return c.M=d,"(\\d{2})";case"MMM":return c.MMM=d,r;case"MMMM":return c.MMMM=d,n;case"D":return c.D=d,"(\\d{1,2})";case"Do":return c.D=d++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return c.D=d,"(\\d{2})";case"H":return c.H=d,"(\\d{1,2})";case"HH":return c.H=d,"(\\d{2})";case"h":return c.h=d,"(\\d{1,2})";case"hh":return c.h=d,"(\\d{2})";case"m":return c.m=d,"(\\d{1,2})";case"mm":return c.m=d,"(\\d{2})";case"s":return c.s=d,"(\\d{1,2})";case"ss":return c.s=d,"(\\d{2})";case"S":return c.S=d,"(\\d{1})";case"SS":return c.S=d,"(\\d{2})";case"SSS":return c.S=d,"(\\d{3})";case"A":return c.A=d,"(AM|PM)";case"a":return c.a=d,"(am|pm)";case"aa":return c.aa=d,"(a\\.m\\.|p\\.m\\.)";case"ddd":return u;case"dddd":return i;case"Q":case"d":case"E":return"(\\d{1})";case"do":return d++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return d++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return d++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return c.Z=d,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return c.ZZ=d,"(Z|[+-]\\d{2}\\d{2})";case"X":return c.X=d,"(-?\\d+)";case"x":return c.x=d,"(-?\\d{4,})";default:return d--,p[0]==="["&&(p=p.substring(1,p.length-1)),p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),f={map:c,regex:new RegExp("^"+_)};return Ze[o]=f,f}function jt(e,t){return e!==void 0?e:t!==void 0?t.date:cn.date}function yt(e,t=""){const i=e>0?"-":"+",o=Math.abs(e),u=Math.floor(o/60),n=o%60;return i+O(u)+t+O(n)}function jn(e,t,i){let o=e.getFullYear(),u=e.getMonth();const n=e.getDate();return t.year!==void 0&&(o+=i*t.year,delete t.year),t.month!==void 0&&(u+=i*t.month,delete t.month),e.setDate(1),e.setMonth(2),e.setFullYear(o),e.setMonth(u),e.setDate(Math.min(n,at(e))),t.date!==void 0&&(e.setDate(e.getDate()+i*t.date),delete t.date),e}function Hn(e,t,i){const o=t.year!==void 0?t.year:e[`get${i}FullYear`](),u=t.month!==void 0?t.month-1:e[`get${i}Month`](),n=new Date(o,u+1,0).getDate(),r=Math.min(n,t.date!==void 0?t.date:e[`get${i}Date`]());return e[`set${i}Date`](1),e[`set${i}Month`](2),e[`set${i}FullYear`](o),e[`set${i}Month`](u),e[`set${i}Date`](r),delete t.year,delete t.month,delete t.date,e}function rt(e,t,i){const o=Ht(t),u=new Date(e),n=o.year!==void 0||o.month!==void 0||o.date!==void 0?jn(u,o,i):u;for(const r in o){const c=Mn(r);n[`set${c}`](n[`get${c}`]()+i*o[r])}return n}function Ht(e){const t={...e};return e.years!==void 0&&(t.year=e.years,delete t.years),e.months!==void 0&&(t.month=e.months,delete t.months),e.days!==void 0&&(t.date=e.days,delete t.days),e.day!==void 0&&(t.date=e.day,delete t.day),e.hour!==void 0&&(t.hours=e.hour,delete t.hour),e.minute!==void 0&&(t.minutes=e.minute,delete t.minute),e.second!==void 0&&(t.seconds=e.second,delete t.second),e.millisecond!==void 0&&(t.milliseconds=e.millisecond,delete t.millisecond),t}function Lt(e,t,i){const o=Ht(t),u=i===!0?"UTC":"",n=new Date(e),r=o.year!==void 0||o.month!==void 0||o.date!==void 0?Hn(n,o,u):n;for(const c in o){const d=c.charAt(0).toUpperCase()+c.slice(1);r[`set${u}${d}`](o[c])}return r}function Ln(e,t,i){const o=Vn(e,t,i),u=new Date(o.year,o.month===null?null:o.month-1,o.day===null?1:o.day,o.hour,o.minute,o.second,o.millisecond),n=u.getTimezoneOffset();return o.timezoneOffset===null||o.timezoneOffset===n?u:rt(u,{minutes:o.timezoneOffset-n},1)}function Vn(e,t,i,o,u){const n={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(e==null||e===""||typeof e!="string")return n;t===void 0&&(t=Ft);const r=jt(i,Ct.props),c=r.months,d=r.monthsShort,{regex:_,map:f}=Fn(t,r),p=e.match(_);if(p===null)return n;let m="";if(f.X!==void 0||f.x!==void 0){const s=parseInt(p[f.X!==void 0?f.X:f.x],10);if(isNaN(s)===!0||s<0)return n;const a=new Date(s*(f.X!==void 0?1e3:1));n.year=a.getFullYear(),n.month=a.getMonth()+1,n.day=a.getDate(),n.hour=a.getHours(),n.minute=a.getMinutes(),n.second=a.getSeconds(),n.millisecond=a.getMilliseconds()}else{if(f.YYYY!==void 0)n.year=parseInt(p[f.YYYY],10);else if(f.YY!==void 0){const s=parseInt(p[f.YY],10);n.year=s<0?s:2e3+s}if(f.M!==void 0){if(n.month=parseInt(p[f.M],10),n.month<1||n.month>12)return n}else f.MMM!==void 0?n.month=d.indexOf(p[f.MMM])+1:f.MMMM!==void 0&&(n.month=c.indexOf(p[f.MMMM])+1);if(f.D!==void 0){if(n.day=parseInt(p[f.D],10),n.year===null||n.month===null||n.day<1)return n;const s=new Date(n.year,n.month,0).getDate();if(n.day>s)return n}f.H!==void 0?n.hour=parseInt(p[f.H],10)%24:f.h!==void 0&&(n.hour=parseInt(p[f.h],10)%12,(f.A&&p[f.A]==="PM"||f.a&&p[f.a]==="pm"||f.aa&&p[f.aa]==="p.m.")&&(n.hour+=12),n.hour=n.hour%24),f.m!==void 0&&(n.minute=parseInt(p[f.m],10)%60),f.s!==void 0&&(n.second=parseInt(p[f.s],10)%60),f.S!==void 0&&(n.millisecond=parseInt(p[f.S],10)*10**(3-p[f.S].length)),(f.Z!==void 0||f.ZZ!==void 0)&&(m=f.Z!==void 0?p[f.Z].replace(":",""):p[f.ZZ],n.timezoneOffset=(m[0]==="+"?-1:1)*(60*m.slice(1,3)+1*m.slice(3,5)))}return n.dateHash=O(n.year,6)+"/"+O(n.month)+"/"+O(n.day),n.timeHash=O(n.hour)+":"+O(n.minute)+":"+O(n.second)+m,n}function zn(e){return typeof e=="number"?!0:isNaN(Date.parse(e))===!1}function Qn(e,t){return Lt(new Date,e,t)}function Zn(e){const t=new Date(e).getDay();return t===0?7:t}function Ae(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const i=new Date(t.getFullYear(),0,4);i.setDate(i.getDate()-(i.getDay()+6)%7+3);const o=t.getTimezoneOffset()-i.getTimezoneOffset();t.setHours(t.getHours()-o);const u=(t-i)/(Ut*7);return 1+Math.floor(u)}function Bn(e){return e.getFullYear()*1e4+e.getMonth()*100+e.getDate()}function Be(e,t){const i=new Date(e);return t===!0?Bn(i):i.getTime()}function Xn(e,t,i,o={}){const u=Be(t,o.onlyDate),n=Be(i,o.onlyDate),r=Be(e,o.onlyDate);return(r>u||o.inclusiveFrom===!0&&r===u)&&(r<n||o.inclusiveTo===!0&&r===n)}function Gn(e,t){return rt(e,t,1)}function Wn(e,t){return rt(e,t,-1)}function z(e,t,i){const o=new Date(e),u=`set${i===!0?"UTC":""}`;switch(t){case"year":case"years":o[`${u}Month`](0);case"month":case"months":o[`${u}Date`](1);case"day":case"days":case"date":o[`${u}Hours`](0);case"hour":case"hours":o[`${u}Minutes`](0);case"minute":case"minutes":o[`${u}Seconds`](0);case"second":case"seconds":o[`${u}Milliseconds`](0)}return o}function Jn(e,t,i){const o=new Date(e),u=`set${i===!0?"UTC":""}`;switch(t){case"year":case"years":o[`${u}Month`](11);case"month":case"months":o[`${u}Date`](at(o));case"day":case"days":case"date":o[`${u}Hours`](23);case"hour":case"hours":o[`${u}Minutes`](59);case"minute":case"minutes":o[`${u}Seconds`](59);case"second":case"seconds":o[`${u}Milliseconds`](999)}return o}function eo(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(i=>{t=Math.max(t,new Date(i))}),t}function to(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(i=>{t=Math.min(t,new Date(i))}),t}function xe(e,t,i){return(e.getTime()-e.getTimezoneOffset()*Je-(t.getTime()-t.getTimezoneOffset()*Je))/i}function Vt(e,t,i="days"){const o=new Date(e),u=new Date(t);switch(i){case"years":case"year":return o.getFullYear()-u.getFullYear();case"months":case"month":return(o.getFullYear()-u.getFullYear())*12+o.getMonth()-u.getMonth();case"days":case"day":case"date":return xe(z(o,"day"),z(u,"day"),Ut);case"hours":case"hour":return xe(z(o,"hour"),z(u,"hour"),$n);case"minutes":case"minute":return xe(z(o,"minute"),z(u,"minute"),Je);case"seconds":case"second":return xe(z(o,"second"),z(u,"second"),1e3)}}function Oe(e){return Vt(e,z(e,"year"),"days")+1}function no(e){return Et(e)===!0?"date":typeof e=="number"?"number":"string"}function oo(e,t,i){const o=new Date(e);if(t){const u=new Date(t);if(o<u)return u}if(i){const u=new Date(i);if(o>u)return u}return o}function io(e,t,i){const o=new Date(e),u=new Date(t);if(i===void 0)return o.getTime()===u.getTime();switch(i){case"second":case"seconds":if(o.getSeconds()!==u.getSeconds())return!1;case"minute":case"minutes":if(o.getMinutes()!==u.getMinutes())return!1;case"hour":case"hours":if(o.getHours()!==u.getHours())return!1;case"day":case"days":case"date":if(o.getDate()!==u.getDate())return!1;case"month":case"months":if(o.getMonth()!==u.getMonth())return!1;case"year":case"years":if(o.getFullYear()!==u.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${i}`)}return!0}function at(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function se(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const vt={YY(e,t,i){const o=this.YYYY(e,t,i)%100;return o>=0?O(o):"-"+O(Math.abs(o))},YYYY(e,t,i){return i??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return se(e.getMonth()+1)},MM(e){return O(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return se(this.Q(e))},D(e){return e.getDate()},Do(e){return se(e.getDate())},DD(e){return O(e.getDate())},DDD(e){return Oe(e)},DDDo(e){return se(Oe(e))},DDDD(e){return O(Oe(e),3)},d(e){return e.getDay()},do(e){return se(e.getDay())},dd(e,t){return t.days[e.getDay()].slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Ae(e)},wo(e){return se(Ae(e))},ww(e){return O(Ae(e))},H(e){return e.getHours()},HH(e){return O(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return O(this.h(e))},m(e){return e.getMinutes()},mm(e){return O(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return O(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return O(Math.floor(e.getMilliseconds()/10))},SSS(e){return O(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,t,i,o){const u=o??e.getTimezoneOffset();return yt(u,":")},ZZ(e,t,i,o){const u=o??e.getTimezoneOffset();return yt(u)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function so(e,t,i,o,u){if(e!==0&&!e||e===1/0||e===-1/0)return;const n=new Date(e);if(isNaN(n))return;t===void 0&&(t=Ft);const r=jt(i,Ct.props);return t.replace(Nn,(c,d)=>c in vt?vt[c](n,r,o,u):d===void 0?c:d.split("\\]").join("]"))}function ro(e){return Et(e)===!0?new Date(e.getTime()):e}const ao={isValid:zn,extractDate:Ln,buildDate:Qn,getDayOfWeek:Zn,getWeekOfYear:Ae,isBetweenDates:Xn,addToDate:Gn,subtractFromDate:Wn,adjustDate:Lt,startOfDate:z,endOfDate:Jn,getMaxDate:eo,getMinDate:to,getDateDiff:Vt,getDayOfYear:Oe,inferDateFormat:no,getDateBetween:oo,isSameDate:io,daysInMonth:at,formatDate:so,clone:ro},uo=J({__name:"TimestampFormatter",props:["unixTimestamp"],setup(e){return(t,i)=>W($(ao).formatDate(e.unixTimestamp*1e3,"YYYY-MM-DD HH:mm"))}}),lo={class:"col"},co={key:1},ge=J({__name:"AccountExpansionItem",props:["label","account"],setup(e){return(t,i)=>(R(),K(Nt,{caption:e.account?.key.toString()??"not-found",label:e.label,icon:"perm_identity"},{default:T(()=>[v(fe,null,{default:T(()=>[e.account?.data?(R(),K(N,{key:0},{default:T(()=>[(R(!0),Q(de,null,_e(Object.entries(e.account.data),o=>(R(),Q("div",{key:o[0],class:"row"},[x("div",lo,W(o[0]),1),o[0]=="createdAt"?(R(),K(uo,{key:0,"unix-timestamp":o[1]},null,8,["unix-timestamp"])):(R(),Q("div",co,W(o[1]),1))]))),128))]),_:1})):Ye("",!0)]),_:1})]),_:1},8,["caption","label"]))}}),fo=J({__name:"PlayerProfileOverview",setup(e){return(t,i)=>(R(),K(fe,{bordered:"",flat:""},{default:T(()=>[v(N,{class:"row items-center q-gutter-md"},{default:T(()=>[v(Pe,{name:"visibility",size:"md"}),i[0]||(i[0]=x("div",{class:"text-h6"},"View Accounts",-1))]),_:1}),v(N,{class:"row"},{default:T(()=>[v($t,{bordered:"",class:"rounded-borders full-width",separator:""},{default:T(()=>[v(Nt,{caption:$(D)().wallet?.toString()??"none","hide-expand-icon":"",icon:"perm_identity",label:"Wallet"},null,8,["caption"]),v(ge,{account:$(D)().playerProfile,label:"Player Profile"},null,8,["account"]),v(ge,{account:$(D)().nameProfile,label:"Name Profile"},null,8,["account"]),v(ge,{account:$(D)().factionProfile,label:"Faction Profile"},null,8,["account"]),v(ge,{account:$(D)().sageProfile,label:"Faction Profile"},null,8,["account"]),(R(!0),Q(de,null,_e($(D)().points,(o,u)=>(R(),K(ge,{key:u,account:o.points,label:$(Xe)(o.category)+" Points"},null,8,["account","label"]))),128))]),_:1})]),_:1})]),_:1}))}}),Pt=be({name:"QCardActions",props:{...dn,vertical:Boolean},setup(e,{slots:t}){const i=fn(e),o=q(()=>`q-card__actions ${i.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>E("div",{class:o.value},Se(t.default))}});var he={},ye={},ve={},St;function bt(){return St||(St=1,Object.defineProperty(ve,"__esModule",{value:!0}),ve.IDL=void 0,ve.IDL={version:"0.1.0",name:"points_store",instructions:[{name:"addRedemptionEpoch",accounts:[{name:"key",isMut:!1,isSigner:!0,docs:["The key authorized for this instruction"]},{name:"profile",isMut:!1,isSigner:!1,docs:["The [`Profile`] that handles the points store program permissions"]},{name:"funder",isMut:!0,isSigner:!0,docs:["The funder for the new `RedemptionConfig`."]},{name:"config",isMut:!0,isSigner:!1,docs:["The `RedemptionConfig`."]},{name:"systemProgram",isMut:!1,isSigner:!1,docs:["The system program."]}],args:[{name:"input",type:{defined:"AddRedemptionEpochInput"}}]},{name:"buy",accounts:[{name:"key",isMut:!0,isSigner:!0,docs:["This is a key in the `user_profile` that is authorized to spend user points."]},{name:"userProfile",isMut:!1,isSigner:!1,docs:["The user's [`Profile`]"]},{name:"store",isMut:!1,isSigner:!1,docs:["The store to buy from."]},{name:"storeSigner",isMut:!1,isSigner:!1,docs:["The store's signer."]},{name:"bank",isMut:!0,isSigner:!1,docs:["The store's bank."]},{name:"userPointsAccount",isMut:!0,isSigner:!1,docs:["The user's points account."]},{name:"tokensTo",isMut:!0,isSigner:!1,docs:["The account where the tokens will be sent."]},{name:"pointCategory",isMut:!1,isSigner:!1,docs:["The category of points to spend."]},{name:"pointsProgram",isMut:!1,isSigner:!1,docs:["The points program."]},{name:"tokenProgram",isMut:!1,isSigner:!1,docs:["The token program."]}],args:[{name:"amount",type:"u64"},{name:"keyIndex",type:"u16"},{name:"expectedPrice",type:"u64"}]},{name:"changeStorePrice",accounts:[{name:"key",isMut:!1,isSigner:!0,docs:["The key authorized for this instruction"]},{name:"profile",isMut:!1,isSigner:!1,docs:["The points permissions [`Profile`]"]},{name:"store",isMut:!0,isSigner:!1,docs:["The store to change the price of."]}],args:[{name:"input",type:{defined:"ChangeStorePriceInputUnpacked"}}]},{name:"claimTokens",accounts:[{name:"key",isMut:!1,isSigner:!0,docs:["The key authorized for this instruction"]},{name:"fundsTo",isMut:!0,isSigner:!1,docs:["Where the user_redemption_account's funds will be sent."]},{name:"userProfile",isMut:!1,isSigner:!1,docs:["The player's [`Profile`]"]},{name:"userRedemptionAccount",isMut:!0,isSigner:!1,docs:["The [`UserRedemption`]"]},{name:"config",isMut:!0,isSigner:!1,docs:["The `RedemptionConfig`."]},{name:"configSigner",isMut:!1,isSigner:!1,docs:["The config's signer."]},{name:"bank",isMut:!0,isSigner:!1,docs:["The config's bank."]},{name:"tokensTo",isMut:!0,isSigner:!1,docs:["The account where the tokens will be sent."]},{name:"tokenProgram",isMut:!1,isSigner:!1,docs:["The token program."]}],args:[{name:"input",type:{defined:"ClaimTokensInput"}}]},{name:"closeRedemptionConfig",accounts:[{name:"key",isMut:!1,isSigner:!0,docs:["The key authorized for this instruction"]},{name:"profile",isMut:!1,isSigner:!1,docs:["The points permissions [`Profile`]"]},{name:"config",isMut:!0,isSigner:!1,docs:["The `RedemptionConfig` to close."]},{name:"configSigner",isMut:!1,isSigner:!1,docs:["The config's signer"]},{name:"bank",isMut:!0,isSigner:!1,docs:["The config's bank."]},{name:"fundsTo",isMut:!0,isSigner:!1,docs:["Where the config's funds will be sent."]},{name:"tokensTo",isMut:!0,isSigner:!1,docs:["Where the remaining config items are sent."]},{name:"tokenProgram",isMut:!1,isSigner:!1,docs:["The token program."]},{name:"systemProgram",isMut:!1,isSigner:!1,docs:["The system program"]}],args:[{name:"keyIndex",type:"u16"}]},{name:"closeStore",accounts:[{name:"key",isMut:!1,isSigner:!0,docs:["The key authorized for this instruction"]},{name:"profile",isMut:!1,isSigner:!1,docs:["The points permissions [`Profile`]"]},{name:"store",isMut:!0,isSigner:!1,docs:["The store to close."]},{name:"storeSigner",isMut:!1,isSigner:!1,docs:["The store's signer"]},{name:"bank",isMut:!0,isSigner:!1,docs:["The store's bank."]},{name:"fundsTo",isMut:!0,isSigner:!1,docs:["Where the store's funds will be sent."]},{name:"tokensTo",isMut:!0,isSigner:!1,docs:["Where the remaining store items are sent."]},{name:"tokenProgram",isMut:!1,isSigner:!1,docs:["The token program."]},{name:"systemProgram",isMut:!1,isSigner:!1,docs:["The system program"]}],args:[{name:"keyIndex",type:"u16"}]},{name:"contributeToRedemption",accounts:[{name:"key",isMut:!1,isSigner:!0,docs:["The key authorized for this instruction"]},{name:"profile",isMut:!1,isSigner:!1,docs:["The player's [`Profile`]"]},{name:"profileFaction",isMut:!1,isSigner:!1,docs:["The faction that the profile belongs to."]},{name:"pointCategory",isMut:!1,isSigner:!1,docs:["The category of points to spend."]},{name:"userPointsAccount",isMut:!0,isSigner:!1,docs:["The user's points account."]},{name:"userRedemptionAccount",isMut:!0,isSigner:!1,docs:["The [`UserRedemption`]"]},{name:"config",isMut:!0,isSigner:!1,docs:["The `RedemptionConfig` to be created."]},{name:"pointsProgram",isMut:!1,isSigner:!1,docs:["The points program."]}],args:[{name:"input",type:{defined:"ContributeToRedemptionInput"}}]},{name:"createPointsStore",accounts:[{name:"profile",isMut:!1,isSigner:!1,docs:["The [`Profile`] that handles the points store program permissions"]},{name:"store",isMut:!0,isSigner:!0,docs:["The store to be created."]},{name:"storeSigner",isMut:!1,isSigner:!1,docs:["The signer for the store."]},{name:"pointCategory",isMut:!1,isSigner:!1,docs:["The category for points to spend."]},{name:"funder",isMut:!0,isSigner:!0,docs:["The funder for the new store."]},{name:"bank",isMut:!1,isSigner:!1,docs:["The bank for the tokens that can be bought"]},{name:"systemProgram",isMut:!1,isSigner:!1,docs:["The system program."]}],args:[{name:"input",type:{defined:"CreatePointsStoreInputUnpacked"}}]},{name:"createRedemptionConfig",accounts:[{name:"profile",isMut:!1,isSigner:!1,docs:["The [`Profile`] that handles the points store program permissions"]},{name:"config",isMut:!0,isSigner:!0,docs:["The `RedemptionConfig` to be created."]},{name:"configSigner",isMut:!1,isSigner:!1,docs:["The signer for the `RedemptionConfig`."]},{name:"pointCategory",isMut:!1,isSigner:!1,docs:["The category for points to redeem."]},{name:"funder",isMut:!0,isSigner:!0,docs:["The funder for the new `RedemptionConfig`."]},{name:"bank",isMut:!1,isSigner:!1,docs:["The bank for the tokens that can be redeemed"]},{name:"systemProgram",isMut:!1,isSigner:!1,docs:["The system program."]}],args:[{name:"input",type:{defined:"CreateRedemptionConfigInput"}}]},{name:"removeRedemptionEpoch",accounts:[{name:"key",isMut:!1,isSigner:!0,docs:["The key authorized for this instruction"]},{name:"profile",isMut:!1,isSigner:!1,docs:["The [`Profile`] that handles the points store program permissions"]},{name:"funder",isMut:!0,isSigner:!0,docs:["The funder for the new `RedemptionConfig`."]},{name:"config",isMut:!0,isSigner:!1,docs:["The `RedemptionConfig`."]},{name:"systemProgram",isMut:!1,isSigner:!1,docs:["The system program."]}],args:[{name:"input",type:{defined:"RemoveRedemptionEpochInput"}}]},{name:"removeStoreItems",accounts:[{name:"key",isMut:!1,isSigner:!0,docs:["The key authorized for this instruction"]},{name:"profile",isMut:!1,isSigner:!1,docs:["The points permissions [`Profile`]"]},{name:"store",isMut:!1,isSigner:!1,docs:["The store to remove items from."]},{name:"storeSigner",isMut:!1,isSigner:!1,docs:["The store's signer."]},{name:"bank",isMut:!0,isSigner:!1,docs:["The store's bank."]},{name:"tokensTo",isMut:!0,isSigner:!1,docs:["Where the removed items will be sent."]},{name:"tokenProgram",isMut:!1,isSigner:!1,docs:["The token program."]}],args:[{name:"amount",type:"u64"},{name:"keyIndex",type:"u16"}]},{name:"startRedemption",accounts:[{name:"key",isMut:!1,isSigner:!0,docs:["The key authorized for this instruction"]},{name:"funder",isMut:!0,isSigner:!0,docs:["The funder - pays for account rent"]},{name:"userProfile",isMut:!1,isSigner:!1,docs:["The player's [`Profile`]"]},{name:"profileFaction",isMut:!1,isSigner:!1,docs:["The faction that the profile belongs to."]},{name:"pointCategory",isMut:!1,isSigner:!1,docs:["The category of points to spend."]},{name:"userPointsAccount",isMut:!0,isSigner:!1,docs:["The user's points account."]},{name:"userRedemptionAccount",isMut:!0,isSigner:!0,docs:["The [`UserRedemption`]"]},{name:"config",isMut:!0,isSigner:!1,docs:["The `RedemptionConfig` to be created."]},{name:"pointsProgram",isMut:!1,isSigner:!1,docs:["The points program."]},{name:"systemProgram",isMut:!1,isSigner:!1,docs:["The Solana System Program"]}],args:[{name:"input",type:{defined:"StartRedemptionInput"}}]},{name:"updateRedemptionEpoch",accounts:[{name:"key",isMut:!1,isSigner:!0,docs:["The key authorized for this instruction"]},{name:"profile",isMut:!1,isSigner:!1,docs:["The [`Profile`] that handles the points store program permissions"]},{name:"config",isMut:!0,isSigner:!1,docs:["The `RedemptionConfig`."]}],args:[{name:"input",type:{defined:"UpdateRedemptionEpochInput"}}]}],accounts:[{name:"pointsStore",docs:["A set of tokens that can be bought with points from a category."],type:{kind:"struct",fields:[{name:"version",docs:["The version of data in this struct."],type:"u8"},{name:"pointCategory",docs:["The category of points that can be spent"],type:"publicKey"},{name:"profile",docs:["The [`Profile`] that handles the points store program permissions"],type:"publicKey"},{name:"bank",docs:["The token wallet that stores the purchasable tokens."],type:"publicKey"},{name:"price",docs:["The points cost of each token."],type:"u64"},{name:"signerBump",docs:["The bump of the signer for the points store."],type:"u8"}]}},{name:"redemptionConfig",docs:["Configuration to allow use of points to redeem tokens."],type:{kind:"struct",fields:[{name:"version",docs:["The version of data in this struct."],type:"u8"},{name:"pointCategory",docs:["The category of points that can be used to redeem tokens"],type:"publicKey"},{name:"profile",docs:["The [`Profile`] that handles the points store program permissions"],type:"publicKey"},{name:"faction",docs:["The faction"],type:"u8"},{name:"bank",docs:["The token account that stores the redeemable tokens."],type:"publicKey"},{name:"signerBump",docs:["The bump of the signer for the points store."],type:"u8"},{name:"allowOnlyCurrentEpoch",docs:["Allow only the current epoch to be redeemed"],type:"u8"}]}},{name:"userRedemption",docs:["User account for token redemptions for a certain epoch"],type:{kind:"struct",fields:[{name:"version",docs:["The version of data in this struct."],type:"u8"},{name:"profile",docs:["The profile this account is for"],type:"publicKey"},{name:"pointCategory",docs:["The category of points that are being redeemed"],type:"publicKey"},{name:"userPointsAccount",docs:["The user points account"],type:"publicKey"},{name:"config",docs:["The redemption config account"],type:"publicKey"},{name:"points",docs:["The points submitted by the user to be redeemed for this epoch"],type:"u64"},{name:"dayIndex",docs:["The index of the day (24-hour period) that represents this epoch"],type:"i64"}]}}],types:[{name:"AddRedemptionEpochInput",docs:["Input for `AddRedemptionEpoch`"],type:{kind:"struct",fields:[{name:"totalTokens",docs:["The total tokens that can redeemed for this epoch"],type:"u64"},{name:"dayIndex",docs:["The index of the day (24 hour period) that represents this epoch"],type:"i64"},{name:"keyIndex",docs:["the index of the key in the player profile"],type:"u16"}]}},{name:"ChangeStorePriceInput",docs:["Input to [`ChangeStorePrice`]"],type:{kind:"struct",fields:[{name:"newPrice",docs:["The price for the store"],type:"u64"},{name:"keyIndex",docs:["The key permissions index"],type:"u16"}]}},{name:"ChangeStorePriceInputUnpacked",docs:["Unpacked version of [`ChangeStorePriceInput`]"],type:{kind:"struct",fields:[{name:"newPrice",docs:["The price for the store"],type:"u64"},{name:"keyIndex",docs:["The key permissions index"],type:"u16"}]}},{name:"ClaimTokensInput",docs:["Input for `ClaimTokens`"],type:{kind:"struct",fields:[{name:"epochIndex",docs:["the index of the epoch in the `RedemptionConfig` account"],type:"u16"},{name:"keyIndex",docs:["the index of the key in the player profile"],type:"u16"}]}},{name:"ContributeToRedemptionInput",docs:["Input for `StartRedemption`"],type:{kind:"struct",fields:[{name:"points",docs:["The number of points to submit"],type:"u64"},{name:"epochIndex",docs:["the index of the epoch in the `RedemptionConfig` account"],type:"u16"},{name:"keyIndex",docs:["the index of the key that can spend points in the player profile"],type:"u16"}]}},{name:"CreatePointsStoreInput",docs:["Input to [`CreatePointsStore`]"],type:{kind:"struct",fields:[{name:"price",docs:["The price for the store"],type:"u64"}]}},{name:"CreatePointsStoreInputUnpacked",docs:["Unpacked version of [`CreatePointsStoreInput`]"],type:{kind:"struct",fields:[{name:"price",docs:["The price for the store"],type:"u64"}]}},{name:"CreateRedemptionConfigInput",docs:["Input for `CreateRedemptionConfig`"],type:{kind:"struct",fields:[{name:"faction",docs:["the faction that uses this `RedemptionConfig"],type:"u8"},{name:"allowOnlyCurrentEpoch",docs:["Allow only the current epoch to be redeemed"],type:"bool"}]}},{name:"RedemptionEpoch",docs:["Represents token redemptions for a 24-hour period"],type:{kind:"struct",fields:[{name:"totalPoints",docs:["The total points submitted by all users to be redeemed for this epoch"],type:"u64"},{name:"redeemedPoints",docs:["The total tokens have been redeemed for this epoch"],type:"u64"},{name:"totalTokens",docs:["The total tokens that can redeemed for this epoch"],type:"u64"},{name:"redeemedTokens",docs:["The tokens that have been redeemed for this epoch"],type:"u64"},{name:"dayIndex",docs:["The index of the day (24-hour period) that represents this epoch"],type:"i64"}]}},{name:"RemoveRedemptionEpochInput",docs:["Input for `RemoveRedemptionEpoch`"],type:{kind:"struct",fields:[{name:"epochIndex",docs:["The index of epoch in the `RedemptionConfig` epoch array"],type:"u16"},{name:"keyIndex",docs:["the index of the key in the player profile"],type:"u16"}]}},{name:"StartRedemptionInput",docs:["Input for `StartRedemption`"],type:{kind:"struct",fields:[{name:"points",docs:["The number of points to submit"],type:"u64"},{name:"epochIndex",docs:["the index of the epoch in the `RedemptionConfig` account"],type:"u16"},{name:"keyIndex",docs:["the index of the key that can spend points in the player profile"],type:"u16"}]}},{name:"UpdateRedemptionEpochInput",docs:["Input for `UpdateRedemptionEpoch`"],type:{kind:"struct",fields:[{name:"totalTokens",docs:["The total tokens that can redeemed for this epoch"],type:"u64"},{name:"epochIndex",docs:["The index of epoch in the `RedemptionConfig` epoch array"],type:"u16"},{name:"keyIndex",docs:["the index of the key in the player profile"],type:"u16"}]}}],errors:[{code:6e3,name:"IncorrectProfileAddress",msg:"Incorrect profile address."},{code:6001,name:"IncorrectBankAddress",msg:"Incorrect bank address."},{code:6002,name:"IncorrectMintAddress",msg:"Incorrect mint address."},{code:6003,name:"EpochHasRedemptions",msg:"Epoch Has Redemptions."},{code:6004,name:"EpochHasSubmissions",msg:"Epoch Has Submissions."},{code:6005,name:"MustRemoveAllEpochs",msg:"Must Remove All Epochs."},{code:6006,name:"FactionMismatch",msg:"Faction mismatch"},{code:6007,name:"EpochHasNoTokensAvailable",msg:"Epoch Has No Tokens Available."},{code:6008,name:"EpochHasNoPointsAvailable",msg:"Epoch Has No Points Available."},{code:6009,name:"EpochMismatch",msg:"Epoch Mismatch."},{code:6010,name:"ConfigMismatch",msg:"Config Mismatch."}]}),ve}var re={},_t;function ut(){return _t||(_t=1,function(e){var t=re.__decorate||function(s,a,l,h){var g=arguments.length,y=g<3?a:h===null?h=Object.getOwnPropertyDescriptor(a,l):h,P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,a,l,h);else for(var b=s.length-1;b>=0;b--)(P=s[b])&&(y=(g<3?P(y):g>3?P(a,l,y):P(a,l))||y);return g>3&&y&&Object.defineProperty(a,l,y),y},i=re.__metadata||function(s,a){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(s,a)},o=re.__awaiter||function(s,a,l,h){function g(y){return y instanceof l?y:new l(function(P){P(y)})}return new(l||(l=Promise))(function(y,P){function b(I){try{w(h.next(I))}catch(C){P(C)}}function S(I){try{w(h.throw(I))}catch(C){P(C)}}function w(I){I.done?y(I.value):g(I.value).then(b,S)}w((h=h.apply(s,a||[])).next())})},u;Object.defineProperty(e,"__esModule",{value:!0}),e.RedemptionConfig=e.redemptionConfigDataEquals=e.redemptionEpochEquals=e.getDayIndex=e.SECONDS_PER_DAY=void 0;const n=nt(),r=tt,c=Ot,d=Te();e.SECONDS_PER_DAY=86400;const _=s=>Math.floor(s.div(new c.BN(e.SECONDS_PER_DAY)).toNumber());e.getDayIndex=_;function f(s,a){return s.dayIndex.eq(a.dayIndex)&&s.redeemedTokens.eq(a.redeemedTokens)&&s.redeemedPoints.eq(a.redeemedPoints)&&s.totalPoints.eq(a.totalPoints)&&s.totalTokens.eq(a.totalTokens)}e.redemptionEpochEquals=f;function p(s,a){return s.version===a.version&&s.profile.equals(a.profile)&&s.pointCategory.equals(a.pointCategory)&&s.bank.equals(a.bank)&&s.faction===a.faction&&s.allowOnlyCurrentEpoch===a.allowOnlyCurrentEpoch&&s.signerBump===a.signerBump}e.redemptionConfigDataEquals=p;let m=u=class{constructor(a,l,h){this._data=a,this._key=l,this._epochs=h}get data(){return this._data}get key(){return this._key}get epochs(){return this._epochs||[]}static findConfigSignerAddress(a,l){return r.PublicKey.findProgramAddressSync([At.from("redemption_config_signer"),l.toBuffer()],a.programId)}static createRedemptionConfig(a,l,h,g,y,P,b){const S=b?.configSignerOverride||u.findConfigSignerAddress(a,h.publicKey());let w=null,I;if("tokenAccount"in y)"mint"in y?(w=(0,d.createTokenAccount)(y.tokenAccount,S[0],y.mint),I=y.tokenAccount.publicKey()):I=y.tokenAccount;else if(y.alreadyCreated)I=(0,n.getAssociatedTokenAddressSync)(y.mint,S[0],!0);else{const{instructions:C,address:V}=(0,d.createAssociatedTokenAccount)(y.mint,S[0]);w=C,I=V}return{configSigner:S,bankAccount:I,instructions:[C=>w?w(C).then(V=>(0,d.normalizeArray)(V)):Promise.resolve([]),C=>o(this,void 0,void 0,function*(){return[{instruction:yield a.methods.createRedemptionConfig(P).accountsStrict({profile:l,config:h.publicKey(),configSigner:S[0],pointCategory:g,funder:C.publicKey(),bank:I,systemProgram:r.SystemProgram.programId}).instruction(),signers:[h,C]}]})]}}static addRedemptionEpoch(a,l,h,g,y){return P=>o(this,void 0,void 0,function*(){return[{instruction:yield a.methods.addRedemptionEpoch(y).accountsStrict({key:l.publicKey(),profile:h,funder:P.publicKey(),config:g,systemProgram:r.SystemProgram.programId}).instruction(),signers:[l,P]}]})}static updateRedemptionEpoch(a,l,h,g,y){return()=>o(this,void 0,void 0,function*(){return[{instruction:yield a.methods.updateRedemptionEpoch(y).accountsStrict({key:l.publicKey(),profile:h,config:g}).instruction(),signers:[l]}]})}static removeRedemptionEpoch(a,l,h,g,y){return P=>o(this,void 0,void 0,function*(){return[{instruction:yield a.methods.removeRedemptionEpoch(y).accountsStrict({key:l.publicKey(),profile:h,funder:P.publicKey(),config:g,systemProgram:r.SystemProgram.programId}).instruction(),signers:[l,P]}]})}static closeRedemptionConfig(a,l,h,g,y,P,b,S){const w="bank"in g?g.config:g.config.key,I="bank"in g?g.bank:g.config.data.bank;return()=>o(this,void 0,void 0,function*(){return[{instruction:yield a.methods.closeRedemptionConfig(b).accountsStrict({key:l.publicKey(),profile:h,config:w,configSigner:S||this.findConfigSignerAddress(a,w)[0],bank:I,fundsTo:y,tokensTo:P,tokenProgram:n.TOKEN_PROGRAM_ID,systemProgram:r.SystemProgram.programId}).instruction(),signers:[l]}]})}static decodeData(a,l){return(0,d.decodeAccountWithRemaining)(a,l,u,(y,P)=>Array((a.accountInfo.data.length-(u.MIN_DATA_SIZE+4))/40).fill(0).map((b,S)=>l.coder.types.decode("RedemptionEpoch",y.subarray(40*S+4).subarray(0,40))))}};e.RedemptionConfig=m,m.ACCOUNT_NAME="redemptionConfig",m.MIN_DATA_SIZE=108,e.RedemptionConfig=m=u=t([(0,d.staticImplements)(),i("design:paramtypes",[Object,r.PublicKey,Array])],m)}(re)),re}var j={},B={},Tt;function zt(){if(Tt)return B;Tt=1;var e=B.__decorate||function(n,r,c,d){var _=arguments.length,f=_<3?r:d===null?d=Object.getOwnPropertyDescriptor(r,c):d,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(n,r,c,d);else for(var m=n.length-1;m>=0;m--)(p=n[m])&&(f=(_<3?p(f):_>3?p(r,c,f):p(r,c))||f);return _>3&&f&&Object.defineProperty(r,c,f),f},t=B.__metadata||function(n,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,r)},i;Object.defineProperty(B,"__esModule",{value:!0}),B.PointsStorePermissions=void 0;const o=Te();let u=i=class{constructor(r,c,d,_){this.manageStore=r,this.managePrice=c,this.manageRedemptionConfig=d,this.claimRedemptions=_}getPermissions(){const r=(0,o.fixedSizeArray)(8,0);return r[0]=(this.manageStore?1:0)|(this.managePrice?2:0)|(this.manageRedemptionConfig?4:0)|(this.claimRedemptions?8:0),r}static empty(){return new i(!1,!1,!1,!1)}static all(){return new i(!0,!0,!0,!0)}static storePermissions(){return i.permissionsBuilder("manageStore")}static pricePermissions(){return i.permissionsBuilder("managePrice")}static configPermissions(){return i.permissionsBuilder("manageRedemptionConfig")}static claimPermissions(){return i.permissionsBuilder("claimRedemptions")}static fromPermissions(r){return new i((r[0]&1)!==0,(r[0]&2)!==0,(r[0]&4)!==0,(r[0]&8)!==0)}and(r){return new i(this.manageStore&&r.manageStore,this.managePrice&&r.managePrice,this.manageRedemptionConfig&&r.manageRedemptionConfig,this.claimRedemptions&&r.claimRedemptions)}or(r){return new i(this.manageStore||r.manageStore,this.managePrice||r.managePrice,this.manageRedemptionConfig||r.manageRedemptionConfig,this.claimRedemptions||r.claimRedemptions)}eq(r){return this.manageStore===r.manageStore&&this.managePrice===r.managePrice&&this.manageRedemptionConfig===r.manageRedemptionConfig&&this.claimRedemptions===r.claimRedemptions}contains(r){return this.and(r).eq(r)}static permissionsBuilder(r){const c=Array.isArray(r)?r:[r],d=Object.keys(i.empty()).map(_=>c.includes(_));if(d.length!=i.length)throw console.log(d.length,i.length),"Incorrect permissions array";return new i(...d)}};return B.PointsStorePermissions=u,B.PointsStorePermissions=u=i=e([(0,o.staticImplements)(),t("design:paramtypes",[Boolean,Boolean,Boolean,Boolean])],u),B}var Mt;function Qt(){if(Mt)return j;Mt=1;var e=j.__decorate||function(m,s,a,l){var h=arguments.length,g=h<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,a):l,y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(m,s,a,l);else for(var P=m.length-1;P>=0;P--)(y=m[P])&&(g=(h<3?y(g):h>3?y(s,a,g):y(s,a))||g);return h>3&&g&&Object.defineProperty(s,a,g),g},t=j.__metadata||function(m,s){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(m,s)},i=j.__awaiter||function(m,s,a,l){function h(g){return g instanceof a?g:new a(function(y){y(g)})}return new(a||(a=Promise))(function(g,y){function P(w){try{S(l.next(w))}catch(I){y(I)}}function b(w){try{S(l.throw(w))}catch(I){y(I)}}function S(w){w.done?g(w.value):h(w.value).then(P,b)}S((l=l.apply(m,s||[])).next())})},o;Object.defineProperty(j,"__esModule",{value:!0}),j.PointsStore=j.pointsStoreDataEquals=void 0;const u=nt(),n=tt,r=Te(),c=mn(),d=pn(),_=zt();function f(m,s){return m.version===s.version&&m.signerBump===s.signerBump&&m.price.eq(s.price)&&m.profile.equals(s.profile)&&m.pointCategory.equals(s.pointCategory)&&m.bank.equals(s.bank)}j.pointsStoreDataEquals=f;let p=o=class{constructor(s,a){this._data=s,this._key=a}get data(){return this._data}get key(){return this._key}static findStoreSignerAddress(s,a){return n.PublicKey.findProgramAddressSync([At.from("store_signer"),a.toBuffer()],s.programId)}static createPointsStore(s,a,l,h,g,y,P){const b=P?.storeSignerOverride||o.findStoreSignerAddress(s,l.publicKey());let S=null,w;if("tokenAccount"in g)"mint"in g?(S=(0,r.createTokenAccount)(g.tokenAccount,b[0],g.mint),w=g.tokenAccount.publicKey()):w=g.tokenAccount;else if(g.alreadyCreated)w=(0,u.getAssociatedTokenAddressSync)(g.mint,b[0],!0);else{const{instructions:I,address:C}=(0,r.createAssociatedTokenAccount)(g.mint,b[0]);S=I,w=C}return{storeSigner:b,bankAccount:w,instructions:[I=>S?S(I).then(C=>(0,r.normalizeArray)(C)):Promise.resolve([]),I=>i(this,void 0,void 0,function*(){return[{instruction:yield s.methods.createPointsStore(y).accountsStrict({profile:a,store:l.publicKey(),storeSigner:b[0],pointCategory:h,funder:I.publicKey(),bank:w,systemProgram:n.SystemProgram.programId}).instruction(),signers:[l,I]}]})]}}static buy(s,a,l,h,g,y,P,b,S){const w=S?.userPointsAccount||d.UserPoints.findAddress(a,y,(0,c.getProfileKey)(h))[0],I=(0,c.findKeyInProfile)((0,c.profileKeyInputToFindKeyInput)(h,[a.programId,w],d.PointsPermissions.spendPointsPermissions()),d.PointsPermissions);if("error"in I)throw new Error(I.error);const C="bank"in l?l.store:l.store.key,V="bank"in l?l.bank:l.store.data.bank;return()=>i(this,void 0,void 0,function*(){return[{instruction:yield s.methods.buy(P,I.keyIndex,b).accountsStrict({key:I.key.publicKey(),userProfile:I.profileKey,store:C,storeSigner:S?.storeSigner||this.findStoreSignerAddress(s,C)[0],bank:V,userPointsAccount:w,tokensTo:g,pointCategory:y,pointsProgram:a.programId,tokenProgram:u.TOKEN_PROGRAM_ID}).instruction(),signers:[I.key]}]})}static changeStorePrice(s,a,l,h){const g=(0,c.findKeyInProfile)((0,c.profileKeyInputToFindKeyInput)(l,[s.programId,a],_.PointsStorePermissions.pricePermissions()),_.PointsStorePermissions);if("error"in g)throw new Error(g.error);return()=>i(this,void 0,void 0,function*(){return[{instruction:yield s.methods.changeStorePrice({keyIndex:g.keyIndex,newPrice:h}).accountsStrict({key:g.key.publicKey(),profile:g.profileKey,store:a}).instruction(),signers:[g.key]}]})}static removeStoreItems(s,a,l,h,g,y){const P="bank"in a?a.store:a.store.key,b="bank"in a?a.bank:a.store.data.bank,S=(0,c.findKeyInProfile)((0,c.profileKeyInputToFindKeyInput)(l,[s.programId,P],_.PointsStorePermissions.storePermissions()),_.PointsStorePermissions);if("error"in S)throw new Error(S.error);return()=>i(this,void 0,void 0,function*(){return[{instruction:yield s.methods.removeStoreItems(g,S.keyIndex).accountsStrict({key:S.key.publicKey(),profile:S.profileKey,store:P,bank:b,tokensTo:h,storeSigner:y||this.findStoreSignerAddress(s,P)[0],tokenProgram:u.TOKEN_PROGRAM_ID}).instruction(),signers:[S.key]}]})}static closeStore(s,a,l,h,g,y){const P="bank"in a?a.store:a.store.key,b="bank"in a?a.bank:a.store.data.bank,S=(0,c.findKeyInProfile)((0,c.profileKeyInputToFindKeyInput)(l,[s.programId,P],_.PointsStorePermissions.storePermissions()),_.PointsStorePermissions);if("error"in S)throw new Error(S.error);return()=>i(this,void 0,void 0,function*(){return[{instruction:yield s.methods.closeStore(S.keyIndex).accountsStrict({key:S.key.publicKey(),profile:S.profileKey,store:P,storeSigner:y||this.findStoreSignerAddress(s,P)[0],bank:b,fundsTo:h,tokensTo:g,tokenProgram:u.TOKEN_PROGRAM_ID,systemProgram:n.SystemProgram.programId}).instruction(),signers:[S.key]}]})}static decodeData(s,a){return(0,r.decodeAccount)(s,a,o)}};return j.PointsStore=p,p.ACCOUNT_NAME="pointsStore",p.MIN_DATA_SIZE=114,j.PointsStore=p=o=e([(0,r.staticImplements)(),t("design:paramtypes",[Object,n.PublicKey])],p),j}var H={},It;function Zt(){if(It)return H;It=1;var e=H.__decorate||function(f,p,m,s){var a=arguments.length,l=a<3?p:s===null?s=Object.getOwnPropertyDescriptor(p,m):s,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(f,p,m,s);else for(var g=f.length-1;g>=0;g--)(h=f[g])&&(l=(a<3?h(l):a>3?h(p,m,l):h(p,m))||l);return a>3&&l&&Object.defineProperty(p,m,l),l},t=H.__metadata||function(f,p){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(f,p)},i=H.__awaiter||function(f,p,m,s){function a(l){return l instanceof m?l:new m(function(h){h(l)})}return new(m||(m=Promise))(function(l,h){function g(b){try{P(s.next(b))}catch(S){h(S)}}function y(b){try{P(s.throw(b))}catch(S){h(S)}}function P(b){b.done?l(b.value):a(b.value).then(g,y)}P((s=s.apply(f,p||[])).next())})},o;Object.defineProperty(H,"__esModule",{value:!0}),H.UserRedemption=H.userRedemptionDataEquals=void 0;const u=nt(),n=tt,r=Te(),c=ut();function d(f,p){return f.version===p.version&&f.profile.equals(p.profile)&&f.pointCategory.equals(p.pointCategory)&&f.userPointsAccount.equals(p.userPointsAccount)&&f.config.equals(p.config)&&f.points.eq(p.points)&&f.dayIndex.eq(p.dayIndex)}H.userRedemptionDataEquals=d;let _=o=class{constructor(p,m){this._data=p,this._key=m}get data(){return this._data}get key(){return this._key}static startRedemption(p,m,s,a,l,h,g,y,P,b){return S=>i(this,void 0,void 0,function*(){return[{instruction:yield p.methods.startRedemption(b).accountsStrict({key:s.publicKey(),userProfile:a,profileFaction:l,pointCategory:h,userPointsAccount:g,userRedemptionAccount:y.publicKey(),funder:S.publicKey(),config:P,pointsProgram:m.programId,systemProgram:n.SystemProgram.programId}).instruction(),signers:[s,y,S]}]})}static contributeToRedemption(p,m,s,a,l,h,g,y,P,b){return()=>i(this,void 0,void 0,function*(){return[{instruction:yield p.methods.contributeToRedemption(b).accountsStrict({key:s.publicKey(),profile:a,profileFaction:l,pointCategory:h,userPointsAccount:g,userRedemptionAccount:y,config:P,pointsProgram:m.programId}).instruction(),signers:[s]}]})}static claimTokens(p,m,s,a,l,h,g,y,P){const b="bank"in l?l.config:l.config.key,S="bank"in l?l.bank:l.config.data.bank;return w=>i(this,void 0,void 0,function*(){return[{instruction:yield p.methods.claimTokens(y).accountsStrict({key:m.publicKey(),userProfile:s,userRedemptionAccount:a,config:b,configSigner:P||c.RedemptionConfig.findConfigSignerAddress(p,b)[0],bank:S,tokensTo:g,fundsTo:h==="funder"?w.publicKey():h,tokenProgram:u.TOKEN_PROGRAM_ID}).instruction(),signers:[m]}]})}static decodeData(p,m){return(0,r.decodeAccount)(p,m,o)}};return H.UserRedemption=_,_.ACCOUNT_NAME="userRedemption",_.MIN_DATA_SIZE=153,H.UserRedemption=_=o=e([(0,r.staticImplements)(),t("design:paramtypes",[Object,n.PublicKey])],_),H}var kt;function mo(){return kt||(kt=1,function(e){var t=ye.__decorate||function(p,m,s,a){var l=arguments.length,h=l<3?m:a===null?a=Object.getOwnPropertyDescriptor(m,s):a,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(p,m,s,a);else for(var y=p.length-1;y>=0;y--)(g=p[y])&&(h=(l<3?g(h):l>3?g(m,s,h):g(m,s))||h);return l>3&&h&&Object.defineProperty(m,s,h),h},i=ye.__metadata||function(p,m){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(p,m)};Object.defineProperty(e,"__esModule",{value:!0}),e.PointsStoreProgram=e.POINTS_STORE_IDL=void 0;const o=Ot,u=Te(),n=bt(),r=ut(),c=Qt(),d=Zt();var _=bt();Object.defineProperty(e,"POINTS_STORE_IDL",{enumerable:!0,get:function(){return _.IDL}});let f=class extends u.ListenProgram{constructor(m){super(m,{pointsStore:c.PointsStore,redemptionConfig:r.RedemptionConfig,userRedemption:d.UserRedemption})}static buildProgram(m,s,a){return new o.Program(n.IDL,m,s,a)}};e.PointsStoreProgram=f,e.PointsStoreProgram=f=t([(0,u.staticImplements)(),i("design:paramtypes",[Object])],f)}(ye)),ye}var wt;function po(){return wt||(wt=1,function(e){var t=he.__createBinding||(Object.create?function(o,u,n,r){r===void 0&&(r=n);var c=Object.getOwnPropertyDescriptor(u,n);(!c||("get"in c?!u.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return u[n]}}),Object.defineProperty(o,r,c)}:function(o,u,n,r){r===void 0&&(r=n),o[r]=u[n]}),i=he.__exportStar||function(o,u){for(var n in o)n!=="default"&&!Object.prototype.hasOwnProperty.call(u,n)&&t(u,o,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(mo(),e),i(zt(),e),i(ut(),e),i(Qt(),e),i(Zt(),e)}(he)),he}var lt=po();class Fe{signer;constructor(t){this.signer=t}createPlayerProfileIx(t,i){return X.PlayerProfile.createProfile(U().playerProfileProgram.value,i,[{key:t,expireTime:null,scope:PLAYER_PROFILE_PROGRAM_ID,permissions:X.ProfilePermissions.all()}],1)}createPlayerProfileNameIx(t){const{instructions:i}=X.PlayerProfile.setName(U().playerProfileProgram.value,{profile:D().playerProfile,key:this.signer,playerProfileProgram:U().playerProfileProgram.value},t);return i}createChooseFactionIx(t){const{instructions:i}=Ce.ProfileFactionAccount.chooseFaction(U().profileFactionProgram.value,{profile:D().playerProfile,key:this.signer,playerProfileProgram:U().playerProfileProgram.value},t);return i}createSagePlayerProfileIx(){return $e.SagePlayerProfile.registerSagePlayerProfile(U().sageProgram.value,D().playerProfileAddress,Ge().game.key,Ge().game.data.gameState)}createPointsIx(t){const{instructions:i}=Ne.UserPoints.createUserPointAccount(U().pointsProgram.value,D().playerProfile.key,t);return i}addSageKeyPermissionToProfileIx(t,i,o=null){return X.PlayerProfile.addKeys(U().playerProfileProgram.value,this.signer,D().playerProfile,$e.SagePermissions,ot,[{key:t,permissions:i,expireTime:o}])}addPointsKeyPermissionToProfileIx(t,i,o=null){return X.PlayerProfile.addKeys(U().playerProfileProgram.value,this.signer,D().playerProfile,Ne.PointsPermissions,it,[{key:t,permissions:i,expireTime:o}])}addPointsStoreKeyPermissionToProfileIx(t,i,o=null){return X.PlayerProfile.addKeys(U().playerProfileProgram.value,this.signer,D().playerProfile,lt.PointsStorePermissions,st,[{key:t,permissions:i,expireTime:o}])}removeKeyFromProfileIx(t){return X.PlayerProfile.removeKeys(U().playerProfileProgram.value,{profileKey:D().playerProfile?.key,key:this.signer,keyIndex:0,playerProfileProgram:U().playerProfileProgram.value},this.signer.publicKey(),t)}}const go=1e9,ho=0,yo=.2*go,vo=new oe("feeYA2tAXP7a38Dcf43Xap4CxxzAaSWZ28NT3Xpx8Hm");class je{signer;constructor(t){this.signer=t}transferFeeIx(t){let i=ho;return t==="CREATE"&&(i=yo),gn.transfer({fromPubkey:this.signer.publicKey(),toPubkey:vo,lamports:i})}}const Po=J({__name:"PermissionsAddAccount",setup(e){const t=[{label:"SagePermission",address:ot.toString()},{label:"PointsPermission",address:it.toString()},{label:"PointsStorePermission",address:st.toString()}],i=Y(""),o=Y(t[0]),u=Y(0);Y();async function n(){const r=qe(),c=[],d=new Fe(r);o.value?.address==t[0]?.address&&c.push(d.addSageKeyPermissionToProfileIx(new oe(i.value),$e.SagePermissions.empty(),u.value==0?null:new Ee(u.value))),o.value?.address==t[1]?.address&&c.push(d.addPointsKeyPermissionToProfileIx(new oe(i.value),Ne.PointsPermissions.empty(),u.value==0?null:new Ee(u.value))),o.value?.address==t[2]?.address&&c.push(d.addPointsStoreKeyPermissionToProfileIx(new oe(i.value),lt.PointsStorePermissions.empty(),u.value==0?null:new Ee(u.value))),await Ke("Add permission account",c,r,new je(r).transferFeeIx("DEFAULT")),await D().updateStore(ie()),console.log("Sending TX")}return(r,c)=>(R(),K(fe,{bordered:"",flat:""},{default:T(()=>[v(Pt,null,{default:T(()=>c[3]||(c[3]=[x("div",{class:"text-weight-thin text-center col"},"Add a new wallet to the permission list",-1)])),_:1}),v(N,null,{default:T(()=>[v(We,{modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=d=>i.value=d),label:"Wallet/Key",square:""},null,8,["modelValue"]),v(qt,{modelValue:o.value,"onUpdate:modelValue":c[1]||(c[1]=d=>o.value=d),"option-label":d=>d.label,options:t,label:"Scope",square:""},null,8,["modelValue","option-label"]),v(We,{modelValue:u.value,"onUpdate:modelValue":c[2]||(c[2]=d=>u.value=d),label:"Expire Time",square:"",type:"number"},null,8,["modelValue"])]),_:1}),v(Pt,null,{default:T(()=>[v(Ue,{class:"full-width",color:"primary",onClick:n},{default:T(()=>c[4]||(c[4]=[L("ADD")])),_:1})]),_:1})]),_:1}))}}),So={class:""},bo=J({__name:"PermissionEditable",props:["index","publicKey","scope","inputPermissions","expireTime"],setup(e){const t=e,i=Y();t.scope.toString()==Qe.toString()&&(i.value=X.ProfilePermissions.fromPermissions(t.inputPermissions)),t.scope.toString()==ot.toString()&&(i.value=$e.SagePermissions.fromPermissions(t.inputPermissions)),t.scope.toString()==it.toString()&&(i.value=Ne.PointsPermissions.fromPermissions(t.inputPermissions)),t.scope.toString()==st.toString()&&(i.value=lt.PointsStorePermissions.fromPermissions(t.inputPermissions));async function o(){const n=qe(),r=[],c=new Fe(n);r.push(c.removeKeyFromProfileIx([t.index,t.index+1])),await Ke("Update profile permissions",r,n,new je(n).transferFeeIx("DEFAULT")),await D().updateStore(ie())}async function u(){const n=qe(),r=[],c=new Fe(n);r.push(c.removeKeyFromProfileIx([t.index,t.index+1])),r.push(c.addSageKeyPermissionToProfileIx(new oe(t.publicKey.toString()),i.value,t.expireTime>=0?null:new Ee(t.expireTime))),await Ke("Update profile permissions",r,n,new je(n).transferFeeIx("DEFAULT")),await D().updateStore(ie())}return(n,r)=>(R(),Q(de,null,[i.value?(R(),K(N,{key:0,class:"q-gutter-y-xs"},{default:T(()=>[(R(!0),Q(de,null,_e(Object.keys(i.value),c=>(R(),Q("div",{key:c,class:"row items-center q-gutter-x-md"},[x("div",So,W(c),1),v(ne,{class:"col"}),x("div",null,[v(ue,{modelValue:i.value[c],"onUpdate:modelValue":d=>i.value[c]=d,disable:e.scope.toString()==$(Qe).toString(),"checked-icon":"check",color:"positive",dense:"",label:"",size:"sm","unchecked-icon":"clear"},null,8,["modelValue","onUpdate:modelValue","disable"])])]))),128))]),_:1})):Ye("",!0),e.scope.toString()!=$(Qe).toString()?(R(),K(N,{key:1,class:"q-gutter-x-sm row"},{default:T(()=>[v(Ue,{class:"col",color:"primary",label:"Delete",onClick:ft(o,["prevent"])}),v(Ue,{disable:i.value?.getPermissions().toString()==e.inputPermissions.toString(),class:"col",color:"primary",label:"Update",onClick:ft(u,["prevent"])},null,8,["disable"])]),_:1})):Ye("",!0)],64))}}),_o={class:"row items-center q-gutter-md"},To={class:"row items-center q-gutter-md"},Mo={class:"row items-center q-gutter-md"},Io=J({__name:"PlayerProfilePermissions",setup(e){return(t,i)=>(R(),K(fe,{bordered:"",flat:""},{default:T(()=>[v(N,{class:"row items-center q-gutter-md"},{default:T(()=>[v(Pe,{name:"vpn_key",size:"md"}),i[0]||(i[0]=x("div",{class:"text-h6"},"Permissions",-1))]),_:1}),$(D)().playerProfile?(R(),K(N,{key:0,class:"q-gutter-y-md"},{default:T(()=>[(R(!0),Q(de,null,_e($(D)().playerProfile.profileKeys,(o,u)=>(R(),K(fe,{key:u,bordered:"",class:"col",flat:""},{default:T(()=>[v(N,null,{default:T(()=>[x("div",_o,[i[1]||(i[1]=x("div",null,"Key",-1)),v(ne,{class:"col"}),x("div",null,W(o.key),1)]),x("div",To,[i[2]||(i[2]=x("div",null,"Scope",-1)),v(ne,{class:"col"}),x("div",null,W(o.scope),1)]),x("div",Mo,[i[3]||(i[3]=x("div",null,"ExpireTime",-1)),v(ne,{class:"col"}),x("div",null,W(o.expireTime.toString()=="-1"?"never":o.expireTime),1)])]),_:2},1024),v(N,null,{default:T(()=>[v(bo,{"expire-time":o.expireTime,index:u,"input-permissions":o.permissions,publicKey:o.key,scope:o.scope},null,8,["expire-time","index","input-permissions","publicKey","scope"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):Ye("",!0),v(N,null,{default:T(()=>[v(Po)]),_:1})]),_:1}))}}),ko={class:"col row q-gutter-sm"},wo={class:"col row"},Do={class:"col row q-gutter-sm"},xo={class:"col row"},Ro={class:"col row q-gutter-sm"},Co={class:"col row"},Eo={class:"col row q-gutter-sm"},Ao={class:"col row"},Oo=J({__name:"CreateAccounts",setup(e){const t=Y(!1),i=Y(!1),o=Y(!1),u=Y(!1),n=Y([]),r=[Ce.Faction.MUD,Ce.Faction.ONI,Ce.Faction.Ustur],c=Y("test"),d=Y(r[0]);f();const _=q(()=>({playerProfile:D().playerProfile,faction:D().factionProfile,sagePlayerProfile:D().sageProfile,pointsCategories:D().points.flatMap(m=>m.points?.key)}));ce(()=>_,()=>f(),{deep:!0});function f(){t.value=!1,i.value=!1,o.value=!1,u.value=!1,n.value=D().points.map(()=>!1),D().playerProfileAddress||(t.value=!0),D().playerProfileAddress&&(D().nameProfile||(i.value=!0),D().factionProfile||(o.value=!0),D().sageProfile||(u.value=!0),n.value=D().points.map(m=>!m.points?.key))}async function p(){const m=qe(),s=[];let a;const l=new Fe(m);let h=0;const g=[];if(t.value){let y;if(De().useSquads){a=new je(m).transferFeeIx("CREATE"),await De().update();const[P]=In({multisigPda:new oe(De().multisigPDA.toString()),index:De().getNewTransactionIndex});y=Xt(kn({transactionPda:P,ephemeralSignerIndex:0})[0]),h+=1}else y=Gt.keypairToAsyncSigner(hn.generate());s.push(l.createPlayerProfileIx(ie(),y)),g.push("playerProfile")}if(i.value){if(!c.value)throw Error("Player name can not be empty!");s.push(l.createPlayerProfileNameIx(c.value)),g.push("nameProfile")}if(o.value){if(!d.value)throw Error("Please select a faction!");s.push(l.createChooseFactionIx(d.value)),g.push("factionProfile")}u.value&&(s.push(l.createSagePlayerProfileIx()),g.push("sageProfile")),n.value.forEach((y,P)=>{y&&(s.push(l.createPointsIx(Wt.find(b=>b.kind==D().points[P].category)?.key??new oe(""))),g.push(`points-${Xe(D().points[P].category)}`))}),await Ke(`Instructions create: ${g.join(", ")}`,s,m,a,h),await D().updateStore(ie())}return(m,s)=>(R(),K(fe,{bordered:"",flat:""},{default:T(()=>[v(N,{class:"row items-center q-gutter-md"},{default:T(()=>[v(Pe,{name:"create",size:"md"}),s[6]||(s[6]=x("div",{class:"text-h6"},"Create Accounts",-1))]),_:1}),v(N,null,{default:T(()=>[v($t,{bordered:"",class:"rounded-borders",separator:""},{default:T(()=>[ae((R(),K(le,{clickable:""},{default:T(()=>[v(ue,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=a=>t.value=a),"checked-icon":"check",color:"secondary","unchecked-icon":"clear"},null,8,["modelValue"]),x("div",null,[v(G,null,{default:T(()=>s[7]||(s[7]=[L("Profile")])),_:1}),v(te,{caption:""},{default:T(()=>s[8]||(s[8]=[L("Create player profile")])),_:1})])]),_:1})),[[pe]]),ae((R(),K(le,{clickable:""},{default:T(()=>[x("div",ko,[x("div",wo,[v(ue,{modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=a=>i.value=a),"checked-icon":"check",color:"secondary","unchecked-icon":"clear"},null,8,["modelValue"]),x("div",null,[v(G,null,{default:T(()=>s[9]||(s[9]=[L("Name")])),_:1}),v(te,{caption:""},{default:T(()=>s[10]||(s[10]=[L("Create player name")])),_:1})])]),v(We,{modelValue:c.value,"onUpdate:modelValue":s[2]||(s[2]=a=>c.value=a),class:"col",dense:"",label:"Player name"},null,8,["modelValue"])])]),_:1})),[[pe]]),ae((R(),K(le,{clickable:""},{default:T(()=>[x("div",Do,[x("div",xo,[v(ue,{modelValue:o.value,"onUpdate:modelValue":s[3]||(s[3]=a=>o.value=a),"checked-icon":"check",color:"secondary","unchecked-icon":"clear"},null,8,["modelValue"]),x("div",null,[v(G,null,{default:T(()=>s[11]||(s[11]=[L("Faction")])),_:1}),v(te,{caption:""},{default:T(()=>s[12]||(s[12]=[L("Choose faction")])),_:1})])]),v(qt,{modelValue:d.value,"onUpdate:modelValue":s[4]||(s[4]=a=>d.value=a),"option-label":a=>$(Jt)(a),options:r,class:"col",dense:""},null,8,["modelValue","option-label"])])]),_:1})),[[pe]]),ae((R(),K(le,{clickable:""},{default:T(()=>[x("div",Ro,[x("div",Co,[v(ue,{modelValue:u.value,"onUpdate:modelValue":s[5]||(s[5]=a=>u.value=a),"checked-icon":"check",color:"secondary","unchecked-icon":"clear"},null,8,["modelValue"]),x("div",null,[v(G,null,{default:T(()=>s[13]||(s[13]=[L("Sage Profile")])),_:1}),v(te,{caption:""},{default:T(()=>s[14]||(s[14]=[L("Create sage profile")])),_:1})])])])]),_:1})),[[pe]]),(R(!0),Q(de,null,_e($(D)().points,(a,l)=>ae((R(),K(le,{key:l,clickable:""},{default:T(()=>[x("div",Eo,[x("div",Ao,[v(ue,{modelValue:n.value[l],"onUpdate:modelValue":h=>n.value[l]=h,"checked-icon":"check",color:"secondary","unchecked-icon":"clear"},null,8,["modelValue","onUpdate:modelValue"]),x("div",null,[v(G,null,{default:T(()=>[L("Points "+W($(Xe)(a.category)),1)]),_:2},1024),v(te,{caption:""},{default:T(()=>s[15]||(s[15]=[L("Create point")])),_:1})])])])]),_:2},1024)),[[pe]])),128))]),_:1})]),_:1}),v(N,null,{default:T(()=>[v(Ue,{class:"full-width",color:"primary",label:"Send",onClick:p})]),_:1})]),_:1}))}}),qo={class:"col"},Go=J({__name:"PlayerProfile",setup(e){yn(async()=>{await t()}),ce(()=>ie(),async()=>{await t()});async function t(){await D().updateStore(ie()),await Ge().updateStore()}const i=Y("overview");return(o,u)=>(R(),Q("div",qo,[v(en,{modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=n=>i.value=n),"active-bg-color":"primary",align:"justify","inline-label":""},{default:T(()=>[v(ct,{icon:"dashboard",label:"Overview",name:"overview"}),v(ct,{icon:"settings",label:"Permissions",name:"permissions"})]),_:1},8,["modelValue"]),v(ne),v(qn,{modelValue:i.value,"onUpdate:modelValue":u[1]||(u[1]=n=>i.value=n)},{default:T(()=>[v(ht,{class:"q-gutter-md",name:"overview"},{default:T(()=>[v(fo),v(Oo)]),_:1}),v(ht,{name:"permissions"},{default:T(()=>[v(Io)]),_:1})]),_:1},8,["modelValue"])]))}});export{Go as default};
