var Fa=Object.defineProperty;var $a=(e,n,t)=>n in e?Fa(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var Wt=(e,n,t)=>$a(e,typeof n!="symbol"?n+"":n,t);import{p as Oi,o as Za}from"./SquadsStore-BUv8OVmM.js";import{s as W,u as Ci,a as Ha,p as or,g as yn,w as Mi,f as Sr,i as ye,Q as kr}from"./updateStores-6ZM88A_c.js";import{c as Ka,Q as Va}from"./QCard-CmvuOAoH.js";import{Q as ja}from"./QPage-D83eOmxB.js";import{aU as qa,al as Ce,aI as Xe,aJ as F,aV as Ga,aW as Wa,P as O,aX as T,aY as Xa,aZ as sr,a_ as Vn,a$ as ie,B as Y,b0 as q,b1 as U,b2 as on,b3 as zi,b4 as jn,b5 as le,g as Ir,b6 as Ya,b7 as Ja,b8 as Tr,aH as Qa,aL as Rr,b9 as to,aG as Ni,a9 as Ui,ab as Bi,ac as Fi,aq as eo,ba as no,J as ro,E as Pr,ad as be,ae as ut,aj as Xt,an as io,ah as Dr,ai as ao}from"./index-D5e0EpkC.js";import{b as oo}from"./index-BOC1rCrQ.js";import"./index-DVKssMzM.js";import"./QResizeObserver-BezHqTuI.js";const Ut=qa("StarBaseStore",{state:()=>({starbases:[],starbase:void 0,starbasePlayer:void 0}),actions:{async updateStore(){this.starbases=[];try{this.starbases.length||(await W.readAllFromRPC(Ce().connection,Xe().sageProgram.value,F.Starbase)).map(n=>{n.type=="ok"&&this.starbases.push(new F.Starbase(n.data.data,n.data.key,n.data.upgradeIngredientAmounts))}),this.starbase&&(this.starbasePlayer=await W.readFromRPCOrError(Ce().connection,Xe().sageProgram.value,F.StarbasePlayer.findAddress(Xe().sageProgram.value,this.starbase.key,F.SagePlayerProfile.findAddress(Xe().sageProgram.value,Ci().playerProfile.key,Ha().gameID)[0],this.starbase.data.seqId)[0],F.StarbasePlayer))}catch(e){console.warn(`[${this.$id}] waring:`,e)}finally{console.log(`[${this.$id}] updated`)}}}});var kn,Lr;function so(){if(Lr)return kn;Lr=1;var e=Ga(),n="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return kn=e(n),kn}var co=so();const te=Wa(co);/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const lo=4,Or=0,Cr=1,uo=2;function ue(e){let n=e.length;for(;--n>=0;)e[n]=0}const ho=0,$i=1,fo=2,po=3,_o=258,cr=29,Ke=256,Me=Ke+1+cr,ne=30,lr=19,Zi=2*Me+1,Bt=15,In=16,go=7,ur=256,Hi=16,Ki=17,Vi=18,qn=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),sn=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),mo=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),ji=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wo=512,At=new Array((Me+2)*2);ue(At);const ke=new Array(ne*2);ue(ke);const ze=new Array(wo);ue(ze);const Ne=new Array(_o-po+1);ue(Ne);const dr=new Array(cr);ue(dr);const un=new Array(ne);ue(un);function Tn(e,n,t,r,i){this.static_tree=e,this.extra_bits=n,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let qi,Gi,Wi;function Rn(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}const Xi=e=>e<256?ze[e]:ze[256+(e>>>7)],Ue=(e,n)=>{e.pending_buf[e.pending++]=n&255,e.pending_buf[e.pending++]=n>>>8&255},tt=(e,n,t)=>{e.bi_valid>In-t?(e.bi_buf|=n<<e.bi_valid&65535,Ue(e,e.bi_buf),e.bi_buf=n>>In-e.bi_valid,e.bi_valid+=t-In):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=t)},pt=(e,n,t)=>{tt(e,t[n*2],t[n*2+1])},Yi=(e,n)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--n>0);return t>>>1},yo=e=>{e.bi_valid===16?(Ue(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},bo=(e,n)=>{const t=n.dyn_tree,r=n.max_code,i=n.stat_desc.static_tree,a=n.stat_desc.has_stree,s=n.stat_desc.extra_bits,o=n.stat_desc.extra_base,u=n.stat_desc.max_length;let c,l,_,f,d,m,k=0;for(f=0;f<=Bt;f++)e.bl_count[f]=0;for(t[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<Zi;c++)l=e.heap[c],f=t[t[l*2+1]*2+1]+1,f>u&&(f=u,k++),t[l*2+1]=f,!(l>r)&&(e.bl_count[f]++,d=0,l>=o&&(d=s[l-o]),m=t[l*2],e.opt_len+=m*(f+d),a&&(e.static_len+=m*(i[l*2+1]+d)));if(k!==0){do{for(f=u-1;e.bl_count[f]===0;)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[u]--,k-=2}while(k>0);for(f=u;f!==0;f--)for(l=e.bl_count[f];l!==0;)_=e.heap[--c],!(_>r)&&(t[_*2+1]!==f&&(e.opt_len+=(f-t[_*2+1])*t[_*2],t[_*2+1]=f),l--)}},Ji=(e,n,t)=>{const r=new Array(Bt+1);let i=0,a,s;for(a=1;a<=Bt;a++)i=i+t[a-1]<<1,r[a]=i;for(s=0;s<=n;s++){let o=e[s*2+1];o!==0&&(e[s*2]=Yi(r[o]++,o))}},vo=()=>{let e,n,t,r,i;const a=new Array(Bt+1);for(t=0,r=0;r<cr-1;r++)for(dr[r]=t,e=0;e<1<<qn[r];e++)Ne[t++]=r;for(Ne[t-1]=r,i=0,r=0;r<16;r++)for(un[r]=i,e=0;e<1<<sn[r];e++)ze[i++]=r;for(i>>=7;r<ne;r++)for(un[r]=i<<7,e=0;e<1<<sn[r]-7;e++)ze[256+i++]=r;for(n=0;n<=Bt;n++)a[n]=0;for(e=0;e<=143;)At[e*2+1]=8,e++,a[8]++;for(;e<=255;)At[e*2+1]=9,e++,a[9]++;for(;e<=279;)At[e*2+1]=7,e++,a[7]++;for(;e<=287;)At[e*2+1]=8,e++,a[8]++;for(Ji(At,Me+1,a),e=0;e<ne;e++)ke[e*2+1]=5,ke[e*2]=Yi(e,5);qi=new Tn(At,qn,Ke+1,Me,Bt),Gi=new Tn(ke,sn,0,ne,Bt),Wi=new Tn(new Array(0),mo,0,lr,go)},Qi=e=>{let n;for(n=0;n<Me;n++)e.dyn_ltree[n*2]=0;for(n=0;n<ne;n++)e.dyn_dtree[n*2]=0;for(n=0;n<lr;n++)e.bl_tree[n*2]=0;e.dyn_ltree[ur*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},ta=e=>{e.bi_valid>8?Ue(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Mr=(e,n,t,r)=>{const i=n*2,a=t*2;return e[i]<e[a]||e[i]===e[a]&&r[n]<=r[t]},Pn=(e,n,t)=>{const r=e.heap[t];let i=t<<1;for(;i<=e.heap_len&&(i<e.heap_len&&Mr(n,e.heap[i+1],e.heap[i],e.depth)&&i++,!Mr(n,r,e.heap[i],e.depth));)e.heap[t]=e.heap[i],t=i,i<<=1;e.heap[t]=r},zr=(e,n,t)=>{let r,i,a=0,s,o;if(e.sym_next!==0)do r=e.pending_buf[e.sym_buf+a++]&255,r+=(e.pending_buf[e.sym_buf+a++]&255)<<8,i=e.pending_buf[e.sym_buf+a++],r===0?pt(e,i,n):(s=Ne[i],pt(e,s+Ke+1,n),o=qn[s],o!==0&&(i-=dr[s],tt(e,i,o)),r--,s=Xi(r),pt(e,s,t),o=sn[s],o!==0&&(r-=un[s],tt(e,r,o)));while(a<e.sym_next);pt(e,ur,n)},Gn=(e,n)=>{const t=n.dyn_tree,r=n.stat_desc.static_tree,i=n.stat_desc.has_stree,a=n.stat_desc.elems;let s,o,u=-1,c;for(e.heap_len=0,e.heap_max=Zi,s=0;s<a;s++)t[s*2]!==0?(e.heap[++e.heap_len]=u=s,e.depth[s]=0):t[s*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=u<2?++u:0,t[c*2]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[c*2+1]);for(n.max_code=u,s=e.heap_len>>1;s>=1;s--)Pn(e,t,s);c=a;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Pn(e,t,1),o=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=o,t[c*2]=t[s*2]+t[o*2],e.depth[c]=(e.depth[s]>=e.depth[o]?e.depth[s]:e.depth[o])+1,t[s*2+1]=t[o*2+1]=c,e.heap[1]=c++,Pn(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],bo(e,n),Ji(t,u,e.bl_count)},Nr=(e,n,t)=>{let r,i=-1,a,s=n[0*2+1],o=0,u=7,c=4;for(s===0&&(u=138,c=3),n[(t+1)*2+1]=65535,r=0;r<=t;r++)a=s,s=n[(r+1)*2+1],!(++o<u&&a===s)&&(o<c?e.bl_tree[a*2]+=o:a!==0?(a!==i&&e.bl_tree[a*2]++,e.bl_tree[Hi*2]++):o<=10?e.bl_tree[Ki*2]++:e.bl_tree[Vi*2]++,o=0,i=a,s===0?(u=138,c=3):a===s?(u=6,c=3):(u=7,c=4))},Ur=(e,n,t)=>{let r,i=-1,a,s=n[0*2+1],o=0,u=7,c=4;for(s===0&&(u=138,c=3),r=0;r<=t;r++)if(a=s,s=n[(r+1)*2+1],!(++o<u&&a===s)){if(o<c)do pt(e,a,e.bl_tree);while(--o!==0);else a!==0?(a!==i&&(pt(e,a,e.bl_tree),o--),pt(e,Hi,e.bl_tree),tt(e,o-3,2)):o<=10?(pt(e,Ki,e.bl_tree),tt(e,o-3,3)):(pt(e,Vi,e.bl_tree),tt(e,o-11,7));o=0,i=a,s===0?(u=138,c=3):a===s?(u=6,c=3):(u=7,c=4)}},Ao=e=>{let n;for(Nr(e,e.dyn_ltree,e.l_desc.max_code),Nr(e,e.dyn_dtree,e.d_desc.max_code),Gn(e,e.bl_desc),n=lr-1;n>=3&&e.bl_tree[ji[n]*2+1]===0;n--);return e.opt_len+=3*(n+1)+5+5+4,n},xo=(e,n,t,r)=>{let i;for(tt(e,n-257,5),tt(e,t-1,5),tt(e,r-4,4),i=0;i<r;i++)tt(e,e.bl_tree[ji[i]*2+1],3);Ur(e,e.dyn_ltree,n-1),Ur(e,e.dyn_dtree,t-1)},Eo=e=>{let n=4093624447,t;for(t=0;t<=31;t++,n>>>=1)if(n&1&&e.dyn_ltree[t*2]!==0)return Or;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Cr;for(t=32;t<Ke;t++)if(e.dyn_ltree[t*2]!==0)return Cr;return Or};let Br=!1;const So=e=>{Br||(vo(),Br=!0),e.l_desc=new Rn(e.dyn_ltree,qi),e.d_desc=new Rn(e.dyn_dtree,Gi),e.bl_desc=new Rn(e.bl_tree,Wi),e.bi_buf=0,e.bi_valid=0,Qi(e)},ea=(e,n,t,r)=>{tt(e,(ho<<1)+(r?1:0),3),ta(e),Ue(e,t),Ue(e,~t),t&&e.pending_buf.set(e.window.subarray(n,n+t),e.pending),e.pending+=t},ko=e=>{tt(e,$i<<1,3),pt(e,ur,At),yo(e)},Io=(e,n,t,r)=>{let i,a,s=0;e.level>0?(e.strm.data_type===uo&&(e.strm.data_type=Eo(e)),Gn(e,e.l_desc),Gn(e,e.d_desc),s=Ao(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=t+5,t+4<=i&&n!==-1?ea(e,n,t,r):e.strategy===lo||a===i?(tt(e,($i<<1)+(r?1:0),3),zr(e,At,ke)):(tt(e,(fo<<1)+(r?1:0),3),xo(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),zr(e,e.dyn_ltree,e.dyn_dtree)),Qi(e),r&&ta(e)},To=(e,n,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=n,e.pending_buf[e.sym_buf+e.sym_next++]=n>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,n===0?e.dyn_ltree[t*2]++:(e.matches++,n--,e.dyn_ltree[(Ne[t]+Ke+1)*2]++,e.dyn_dtree[Xi(n)*2]++),e.sym_next===e.sym_end);var Ro=So,Po=ea,Do=Io,Lo=To,Oo=ko,Co={_tr_init:Ro,_tr_stored_block:Po,_tr_flush_block:Do,_tr_tally:Lo,_tr_align:Oo};const Mo=(e,n,t,r)=>{let i=e&65535|0,a=e>>>16&65535|0,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do i=i+n[r++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16|0};var Be=Mo;const zo=()=>{let e,n=[];for(var t=0;t<256;t++){e=t;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;n[t]=e}return n},No=new Uint32Array(zo()),Uo=(e,n,t,r)=>{const i=No,a=r+t;e^=-1;for(let s=r;s<a;s++)e=e>>>8^i[(e^n[s])&255];return e^-1};var j=Uo,ae={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ve={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Bo,_tr_stored_block:Wn,_tr_flush_block:Fo,_tr_tally:Dt,_tr_align:$o}=Co,{Z_NO_FLUSH:Lt,Z_PARTIAL_FLUSH:Zo,Z_FULL_FLUSH:Ho,Z_FINISH:st,Z_BLOCK:Fr,Z_OK:G,Z_STREAM_END:$r,Z_STREAM_ERROR:_t,Z_DATA_ERROR:Ko,Z_BUF_ERROR:Dn,Z_DEFAULT_COMPRESSION:Vo,Z_FILTERED:jo,Z_HUFFMAN_ONLY:Ye,Z_RLE:qo,Z_FIXED:Go,Z_DEFAULT_STRATEGY:Wo,Z_UNKNOWN:Xo,Z_DEFLATED:bn}=Ve,Yo=9,Jo=15,Qo=8,ts=29,es=256,Xn=es+1+ts,ns=30,rs=19,is=2*Xn+1,as=15,C=3,Rt=258,gt=Rt+C+1,os=32,oe=42,hr=57,Yn=69,Jn=73,Qn=91,tr=103,Ft=113,Ee=666,J=1,de=2,Kt=3,he=4,ss=3,$t=(e,n)=>(e.msg=ae[n],n),Zr=e=>e*2-(e>4?9:0),It=e=>{let n=e.length;for(;--n>=0;)e[n]=0},cs=e=>{let n,t,r,i=e.w_size;n=e.hash_size,r=n;do t=e.head[--r],e.head[r]=t>=i?t-i:0;while(--n);n=i,r=n;do t=e.prev[--r],e.prev[r]=t>=i?t-i:0;while(--n)};let ls=(e,n,t)=>(n<<e.hash_shift^t)&e.hash_mask,Ot=ls;const it=e=>{const n=e.state;let t=n.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+t),e.next_out),e.next_out+=t,n.pending_out+=t,e.total_out+=t,e.avail_out-=t,n.pending-=t,n.pending===0&&(n.pending_out=0))},at=(e,n)=>{Fo(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,it(e.strm)},z=(e,n)=>{e.pending_buf[e.pending++]=n},ve=(e,n)=>{e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=n&255},er=(e,n,t,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,n.set(e.input.subarray(e.next_in,e.next_in+i),t),e.state.wrap===1?e.adler=Be(e.adler,n,i,t):e.state.wrap===2&&(e.adler=j(e.adler,n,i,t)),e.next_in+=i,e.total_in+=i,i)},na=(e,n)=>{let t=e.max_chain_length,r=e.strstart,i,a,s=e.prev_length,o=e.nice_match;const u=e.strstart>e.w_size-gt?e.strstart-(e.w_size-gt):0,c=e.window,l=e.w_mask,_=e.prev,f=e.strstart+Rt;let d=c[r+s-1],m=c[r+s];e.prev_length>=e.good_match&&(t>>=2),o>e.lookahead&&(o=e.lookahead);do if(i=n,!(c[i+s]!==m||c[i+s-1]!==d||c[i]!==c[r]||c[++i]!==c[r+1])){r+=2,i++;do;while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<f);if(a=Rt-(f-r),r=f-Rt,a>s){if(e.match_start=n,s=a,a>=o)break;d=c[r+s-1],m=c[r+s]}}while((n=_[n&l])>u&&--t!==0);return s<=e.lookahead?s:e.lookahead},se=e=>{const n=e.w_size;let t,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=n+(n-gt)&&(e.window.set(e.window.subarray(n,n+n-r),0),e.match_start-=n,e.strstart-=n,e.block_start-=n,e.insert>e.strstart&&(e.insert=e.strstart),cs(e),r+=n),e.strm.avail_in===0)break;if(t=er(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=t,e.lookahead+e.insert>=C)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Ot(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Ot(e,e.ins_h,e.window[i+C-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<C)););}while(e.lookahead<gt&&e.strm.avail_in!==0)},ra=(e,n)=>{let t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,i,a,s=0,o=e.strm.avail_in;do{if(r=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a||(a=e.strm.avail_out-a,i=e.strstart-e.block_start,r>i+e.strm.avail_in&&(r=i+e.strm.avail_in),r>a&&(r=a),r<t&&(r===0&&n!==st||n===Lt||r!==i+e.strm.avail_in)))break;s=n===st&&r===i+e.strm.avail_in?1:0,Wn(e,0,0,s),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,it(e.strm),i&&(i>r&&(i=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,r-=i),r&&(er(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(s===0);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?he:n!==Lt&&n!==st&&e.strm.avail_in===0&&e.strstart===e.block_start?de:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(er(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a,t=a>e.w_size?e.w_size:a,i=e.strstart-e.block_start,(i>=t||(i||n===st)&&n!==Lt&&e.strm.avail_in===0&&i<=a)&&(r=i>a?a:i,s=n===st&&e.strm.avail_in===0&&r===i?1:0,Wn(e,e.block_start,r,s),e.block_start+=r,it(e.strm)),s?Kt:J)},Ln=(e,n)=>{let t,r;for(;;){if(e.lookahead<gt){if(se(e),e.lookahead<gt&&n===Lt)return J;if(e.lookahead===0)break}if(t=0,e.lookahead>=C&&(e.ins_h=Ot(e,e.ins_h,e.window[e.strstart+C-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-gt&&(e.match_length=na(e,t)),e.match_length>=C)if(r=Dt(e,e.strstart-e.match_start,e.match_length-C),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=C){e.match_length--;do e.strstart++,e.ins_h=Ot(e,e.ins_h,e.window[e.strstart+C-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ot(e,e.ins_h,e.window[e.strstart+1]);else r=Dt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(at(e,!1),e.strm.avail_out===0))return J}return e.insert=e.strstart<C-1?e.strstart:C-1,n===st?(at(e,!0),e.strm.avail_out===0?Kt:he):e.sym_next&&(at(e,!1),e.strm.avail_out===0)?J:de},Yt=(e,n)=>{let t,r,i;for(;;){if(e.lookahead<gt){if(se(e),e.lookahead<gt&&n===Lt)return J;if(e.lookahead===0)break}if(t=0,e.lookahead>=C&&(e.ins_h=Ot(e,e.ins_h,e.window[e.strstart+C-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=C-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-gt&&(e.match_length=na(e,t),e.match_length<=5&&(e.strategy===jo||e.match_length===C&&e.strstart-e.match_start>4096)&&(e.match_length=C-1)),e.prev_length>=C&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-C,r=Dt(e,e.strstart-1-e.prev_match,e.prev_length-C),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=Ot(e,e.ins_h,e.window[e.strstart+C-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=C-1,e.strstart++,r&&(at(e,!1),e.strm.avail_out===0))return J}else if(e.match_available){if(r=Dt(e,0,e.window[e.strstart-1]),r&&at(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return J}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Dt(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<C-1?e.strstart:C-1,n===st?(at(e,!0),e.strm.avail_out===0?Kt:he):e.sym_next&&(at(e,!1),e.strm.avail_out===0)?J:de},us=(e,n)=>{let t,r,i,a;const s=e.window;for(;;){if(e.lookahead<=Rt){if(se(e),e.lookahead<=Rt&&n===Lt)return J;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=C&&e.strstart>0&&(i=e.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){a=e.strstart+Rt;do;while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);e.match_length=Rt-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=C?(t=Dt(e,1,e.match_length-C),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=Dt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(at(e,!1),e.strm.avail_out===0))return J}return e.insert=0,n===st?(at(e,!0),e.strm.avail_out===0?Kt:he):e.sym_next&&(at(e,!1),e.strm.avail_out===0)?J:de},ds=(e,n)=>{let t;for(;;){if(e.lookahead===0&&(se(e),e.lookahead===0)){if(n===Lt)return J;break}if(e.match_length=0,t=Dt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(at(e,!1),e.strm.avail_out===0))return J}return e.insert=0,n===st?(at(e,!0),e.strm.avail_out===0?Kt:he):e.sym_next&&(at(e,!1),e.strm.avail_out===0)?J:de};function ft(e,n,t,r,i){this.good_length=e,this.max_lazy=n,this.nice_length=t,this.max_chain=r,this.func=i}const Se=[new ft(0,0,0,0,ra),new ft(4,4,8,4,Ln),new ft(4,5,16,8,Ln),new ft(4,6,32,32,Ln),new ft(4,4,16,16,Yt),new ft(8,16,32,32,Yt),new ft(8,16,128,128,Yt),new ft(8,32,128,256,Yt),new ft(32,128,258,1024,Yt),new ft(32,258,258,4096,Yt)],hs=e=>{e.window_size=2*e.w_size,It(e.head),e.max_lazy_match=Se[e.level].max_lazy,e.good_match=Se[e.level].good_length,e.nice_match=Se[e.level].nice_length,e.max_chain_length=Se[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=C-1,e.match_available=0,e.ins_h=0};function fs(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=bn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(is*2),this.dyn_dtree=new Uint16Array((2*ns+1)*2),this.bl_tree=new Uint16Array((2*rs+1)*2),It(this.dyn_ltree),It(this.dyn_dtree),It(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(as+1),this.heap=new Uint16Array(2*Xn+1),It(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Xn+1),It(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const je=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.status!==oe&&n.status!==hr&&n.status!==Yn&&n.status!==Jn&&n.status!==Qn&&n.status!==tr&&n.status!==Ft&&n.status!==Ee?1:0},ia=e=>{if(je(e))return $t(e,_t);e.total_in=e.total_out=0,e.data_type=Xo;const n=e.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?hr:n.wrap?oe:Ft,e.adler=n.wrap===2?0:1,n.last_flush=-2,Bo(n),G},aa=e=>{const n=ia(e);return n===G&&hs(e.state),n},ps=(e,n)=>je(e)||e.state.wrap!==2?_t:(e.state.gzhead=n,G),oa=(e,n,t,r,i,a)=>{if(!e)return _t;let s=1;if(n===Vo&&(n=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>Yo||t!==bn||r<8||r>15||n<0||n>9||a<0||a>Go||r===8&&s!==1)return $t(e,_t);r===8&&(r=9);const o=new fs;return e.state=o,o.strm=e,o.status=oe,o.wrap=s,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+C-1)/C),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=n,o.strategy=a,o.method=t,aa(e)},_s=(e,n)=>oa(e,n,bn,Jo,Qo,Wo),gs=(e,n)=>{if(je(e)||n>Fr||n<0)return e?$t(e,_t):_t;const t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===Ee&&n!==st)return $t(e,e.avail_out===0?Dn:_t);const r=t.last_flush;if(t.last_flush=n,t.pending!==0){if(it(e),e.avail_out===0)return t.last_flush=-1,G}else if(e.avail_in===0&&Zr(n)<=Zr(r)&&n!==st)return $t(e,Dn);if(t.status===Ee&&e.avail_in!==0)return $t(e,Dn);if(t.status===oe&&t.wrap===0&&(t.status=Ft),t.status===oe){let i=bn+(t.w_bits-8<<4)<<8,a=-1;if(t.strategy>=Ye||t.level<2?a=0:t.level<6?a=1:t.level===6?a=2:a=3,i|=a<<6,t.strstart!==0&&(i|=os),i+=31-i%31,ve(t,i),t.strstart!==0&&(ve(t,e.adler>>>16),ve(t,e.adler&65535)),e.adler=1,t.status=Ft,it(e),t.pending!==0)return t.last_flush=-1,G}if(t.status===hr){if(e.adler=0,z(t,31),z(t,139),z(t,8),t.gzhead)z(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),z(t,t.gzhead.time&255),z(t,t.gzhead.time>>8&255),z(t,t.gzhead.time>>16&255),z(t,t.gzhead.time>>24&255),z(t,t.level===9?2:t.strategy>=Ye||t.level<2?4:0),z(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(z(t,t.gzhead.extra.length&255),z(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=j(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=Yn;else if(z(t,0),z(t,0),z(t,0),z(t,0),z(t,0),z(t,t.level===9?2:t.strategy>=Ye||t.level<2?4:0),z(t,ss),t.status=Ft,it(e),t.pending!==0)return t.last_flush=-1,G}if(t.status===Yn){if(t.gzhead.extra){let i=t.pending,a=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+a>t.pending_buf_size;){let o=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(e.adler=j(e.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=o,it(e),t.pending!==0)return t.last_flush=-1,G;i=0,a-=o}let s=new Uint8Array(t.gzhead.extra);t.pending_buf.set(s.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending+=a,t.gzhead.hcrc&&t.pending>i&&(e.adler=j(e.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=Jn}if(t.status===Jn){if(t.gzhead.name){let i=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(e.adler=j(e.adler,t.pending_buf,t.pending-i,i)),it(e),t.pending!==0)return t.last_flush=-1,G;i=0}t.gzindex<t.gzhead.name.length?a=t.gzhead.name.charCodeAt(t.gzindex++)&255:a=0,z(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>i&&(e.adler=j(e.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=Qn}if(t.status===Qn){if(t.gzhead.comment){let i=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(e.adler=j(e.adler,t.pending_buf,t.pending-i,i)),it(e),t.pending!==0)return t.last_flush=-1,G;i=0}t.gzindex<t.gzhead.comment.length?a=t.gzhead.comment.charCodeAt(t.gzindex++)&255:a=0,z(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>i&&(e.adler=j(e.adler,t.pending_buf,t.pending-i,i))}t.status=tr}if(t.status===tr){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(it(e),t.pending!==0))return t.last_flush=-1,G;z(t,e.adler&255),z(t,e.adler>>8&255),e.adler=0}if(t.status=Ft,it(e),t.pending!==0)return t.last_flush=-1,G}if(e.avail_in!==0||t.lookahead!==0||n!==Lt&&t.status!==Ee){let i=t.level===0?ra(t,n):t.strategy===Ye?ds(t,n):t.strategy===qo?us(t,n):Se[t.level].func(t,n);if((i===Kt||i===he)&&(t.status=Ee),i===J||i===Kt)return e.avail_out===0&&(t.last_flush=-1),G;if(i===de&&(n===Zo?$o(t):n!==Fr&&(Wn(t,0,0,!1),n===Ho&&(It(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),it(e),e.avail_out===0))return t.last_flush=-1,G}return n!==st?G:t.wrap<=0?$r:(t.wrap===2?(z(t,e.adler&255),z(t,e.adler>>8&255),z(t,e.adler>>16&255),z(t,e.adler>>24&255),z(t,e.total_in&255),z(t,e.total_in>>8&255),z(t,e.total_in>>16&255),z(t,e.total_in>>24&255)):(ve(t,e.adler>>>16),ve(t,e.adler&65535)),it(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?G:$r)},ms=e=>{if(je(e))return _t;const n=e.state.status;return e.state=null,n===Ft?$t(e,Ko):G},ws=(e,n)=>{let t=n.length;if(je(e))return _t;const r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==oe||r.lookahead)return _t;if(i===1&&(e.adler=Be(e.adler,n,t,0)),r.wrap=0,t>=r.w_size){i===0&&(It(r.head),r.strstart=0,r.block_start=0,r.insert=0);let u=new Uint8Array(r.w_size);u.set(n.subarray(t-r.w_size,t),0),n=u,t=r.w_size}const a=e.avail_in,s=e.next_in,o=e.input;for(e.avail_in=t,e.next_in=0,e.input=n,se(r);r.lookahead>=C;){let u=r.strstart,c=r.lookahead-(C-1);do r.ins_h=Ot(r,r.ins_h,r.window[u+C-1]),r.prev[u&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=u,u++;while(--c);r.strstart=u,r.lookahead=C-1,se(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=C-1,r.match_available=0,e.next_in=s,e.input=o,e.avail_in=a,r.wrap=i,G};var ys=_s,bs=oa,vs=aa,As=ia,xs=ps,Es=gs,Ss=ms,ks=ws,Is="pako deflate (from Nodeca project)",Ie={deflateInit:ys,deflateInit2:bs,deflateReset:vs,deflateResetKeep:As,deflateSetHeader:xs,deflate:Es,deflateEnd:Ss,deflateSetDictionary:ks,deflateInfo:Is};const Ts=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var Rs=function(e){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const t=n.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)Ts(t,r)&&(e[r]=t[r])}}return e},Ps=e=>{let n=0;for(let r=0,i=e.length;r<i;r++)n+=e[r].length;const t=new Uint8Array(n);for(let r=0,i=0,a=e.length;r<a;r++){let s=e[r];t.set(s,i),i+=s.length}return t},vn={assign:Rs,flattenChunks:Ps};let sa=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{sa=!1}const Fe=new Uint8Array(256);for(let e=0;e<256;e++)Fe[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Fe[254]=Fe[254]=1;var Ds=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let n,t,r,i,a,s=e.length,o=0;for(i=0;i<s;i++)t=e.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(n=new Uint8Array(o),a=0,i=0;a<o;i++)t=e.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?n[a++]=t:t<2048?(n[a++]=192|t>>>6,n[a++]=128|t&63):t<65536?(n[a++]=224|t>>>12,n[a++]=128|t>>>6&63,n[a++]=128|t&63):(n[a++]=240|t>>>18,n[a++]=128|t>>>12&63,n[a++]=128|t>>>6&63,n[a++]=128|t&63);return n};const Ls=(e,n)=>{if(n<65534&&e.subarray&&sa)return String.fromCharCode.apply(null,e.length===n?e:e.subarray(0,n));let t="";for(let r=0;r<n;r++)t+=String.fromCharCode(e[r]);return t};var Os=(e,n)=>{const t=n||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,n));let r,i;const a=new Array(t*2);for(i=0,r=0;r<t;){let s=e[r++];if(s<128){a[i++]=s;continue}let o=Fe[s];if(o>4){a[i++]=65533,r+=o-1;continue}for(s&=o===2?31:o===3?15:7;o>1&&r<t;)s=s<<6|e[r++]&63,o--;if(o>1){a[i++]=65533;continue}s<65536?a[i++]=s:(s-=65536,a[i++]=55296|s>>10&1023,a[i++]=56320|s&1023)}return Ls(a,i)},Cs=(e,n)=>{n=n||e.length,n>e.length&&(n=e.length);let t=n-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?n:t+Fe[e[t]]>n?t:n},$e={string2buf:Ds,buf2string:Os,utf8border:Cs};function Ms(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ca=Ms;const la=Object.prototype.toString,{Z_NO_FLUSH:zs,Z_SYNC_FLUSH:Ns,Z_FULL_FLUSH:Us,Z_FINISH:Bs,Z_OK:dn,Z_STREAM_END:Fs,Z_DEFAULT_COMPRESSION:$s,Z_DEFAULT_STRATEGY:Zs,Z_DEFLATED:Hs}=Ve;function fr(e){this.options=vn.assign({level:$s,method:Hs,chunkSize:16384,windowBits:15,memLevel:8,strategy:Zs},e||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ca,this.strm.avail_out=0;let t=Ie.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(t!==dn)throw new Error(ae[t]);if(n.header&&Ie.deflateSetHeader(this.strm,n.header),n.dictionary){let r;if(typeof n.dictionary=="string"?r=$e.string2buf(n.dictionary):la.call(n.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(n.dictionary):r=n.dictionary,t=Ie.deflateSetDictionary(this.strm,r),t!==dn)throw new Error(ae[t]);this._dict_set=!0}}fr.prototype.push=function(e,n){const t=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(n===~~n?a=n:a=n===!0?Bs:zs,typeof e=="string"?t.input=$e.string2buf(e):la.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(a===Ns||a===Us)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(i=Ie.deflate(t,a),i===Fs)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=Ie.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===dn;if(t.avail_out===0){this.onData(t.output);continue}if(a>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};fr.prototype.onData=function(e){this.chunks.push(e)};fr.prototype.onEnd=function(e){e===dn&&(this.result=vn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const Je=16209,Ks=16191;var Vs=function(n,t){let r,i,a,s,o,u,c,l,_,f,d,m,k,A,w,I,x,g,R,B,b,P,D,y;const S=n.state;r=n.next_in,D=n.input,i=r+(n.avail_in-5),a=n.next_out,y=n.output,s=a-(t-n.avail_out),o=a+(n.avail_out-257),u=S.dmax,c=S.wsize,l=S.whave,_=S.wnext,f=S.window,d=S.hold,m=S.bits,k=S.lencode,A=S.distcode,w=(1<<S.lenbits)-1,I=(1<<S.distbits)-1;t:do{m<15&&(d+=D[r++]<<m,m+=8,d+=D[r++]<<m,m+=8),x=k[d&w];e:for(;;){if(g=x>>>24,d>>>=g,m-=g,g=x>>>16&255,g===0)y[a++]=x&65535;else if(g&16){R=x&65535,g&=15,g&&(m<g&&(d+=D[r++]<<m,m+=8),R+=d&(1<<g)-1,d>>>=g,m-=g),m<15&&(d+=D[r++]<<m,m+=8,d+=D[r++]<<m,m+=8),x=A[d&I];n:for(;;){if(g=x>>>24,d>>>=g,m-=g,g=x>>>16&255,g&16){if(B=x&65535,g&=15,m<g&&(d+=D[r++]<<m,m+=8,m<g&&(d+=D[r++]<<m,m+=8)),B+=d&(1<<g)-1,B>u){n.msg="invalid distance too far back",S.mode=Je;break t}if(d>>>=g,m-=g,g=a-s,B>g){if(g=B-g,g>l&&S.sane){n.msg="invalid distance too far back",S.mode=Je;break t}if(b=0,P=f,_===0){if(b+=c-g,g<R){R-=g;do y[a++]=f[b++];while(--g);b=a-B,P=y}}else if(_<g){if(b+=c+_-g,g-=_,g<R){R-=g;do y[a++]=f[b++];while(--g);if(b=0,_<R){g=_,R-=g;do y[a++]=f[b++];while(--g);b=a-B,P=y}}}else if(b+=_-g,g<R){R-=g;do y[a++]=f[b++];while(--g);b=a-B,P=y}for(;R>2;)y[a++]=P[b++],y[a++]=P[b++],y[a++]=P[b++],R-=3;R&&(y[a++]=P[b++],R>1&&(y[a++]=P[b++]))}else{b=a-B;do y[a++]=y[b++],y[a++]=y[b++],y[a++]=y[b++],R-=3;while(R>2);R&&(y[a++]=y[b++],R>1&&(y[a++]=y[b++]))}}else if(g&64){n.msg="invalid distance code",S.mode=Je;break t}else{x=A[(x&65535)+(d&(1<<g)-1)];continue n}break}}else if(g&64)if(g&32){S.mode=Ks;break t}else{n.msg="invalid literal/length code",S.mode=Je;break t}else{x=k[(x&65535)+(d&(1<<g)-1)];continue e}break}}while(r<i&&a<o);R=m>>3,r-=R,m-=R<<3,d&=(1<<m)-1,n.next_in=r,n.next_out=a,n.avail_in=r<i?5+(i-r):5-(r-i),n.avail_out=a<o?257+(o-a):257-(a-o),S.hold=d,S.bits=m};const Jt=15,Hr=852,Kr=592,Vr=0,On=1,jr=2,js=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),qs=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Gs=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ws=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Xs=(e,n,t,r,i,a,s,o)=>{const u=o.bits;let c=0,l=0,_=0,f=0,d=0,m=0,k=0,A=0,w=0,I=0,x,g,R,B,b,P=null,D;const y=new Uint16Array(Jt+1),S=new Uint16Array(Jt+1);let V=null,h,p,E;for(c=0;c<=Jt;c++)y[c]=0;for(l=0;l<r;l++)y[n[t+l]]++;for(d=u,f=Jt;f>=1&&y[f]===0;f--);if(d>f&&(d=f),f===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,o.bits=1,0;for(_=1;_<f&&y[_]===0;_++);for(d<_&&(d=_),A=1,c=1;c<=Jt;c++)if(A<<=1,A-=y[c],A<0)return-1;if(A>0&&(e===Vr||f!==1))return-1;for(S[1]=0,c=1;c<Jt;c++)S[c+1]=S[c]+y[c];for(l=0;l<r;l++)n[t+l]!==0&&(s[S[n[t+l]]++]=l);if(e===Vr?(P=V=s,D=20):e===On?(P=js,V=qs,D=257):(P=Gs,V=Ws,D=0),I=0,l=0,c=_,b=a,m=d,k=0,R=-1,w=1<<d,B=w-1,e===On&&w>Hr||e===jr&&w>Kr)return 1;for(;;){h=c-k,s[l]+1<D?(p=0,E=s[l]):s[l]>=D?(p=V[s[l]-D],E=P[s[l]-D]):(p=96,E=0),x=1<<c-k,g=1<<m,_=g;do g-=x,i[b+(I>>k)+g]=h<<24|p<<16|E|0;while(g!==0);for(x=1<<c-1;I&x;)x>>=1;if(x!==0?(I&=x-1,I+=x):I=0,l++,--y[c]===0){if(c===f)break;c=n[t+s[l]]}if(c>d&&(I&B)!==R){for(k===0&&(k=d),b+=_,m=c-k,A=1<<m;m+k<f&&(A-=y[m+k],!(A<=0));)m++,A<<=1;if(w+=1<<m,e===On&&w>Hr||e===jr&&w>Kr)return 1;R=I&B,i[R]=d<<24|m<<16|b-a|0}}return I!==0&&(i[b+I]=c-k<<24|64<<16|0),o.bits=d,0};var Te=Xs;const Ys=0,ua=1,da=2,{Z_FINISH:qr,Z_BLOCK:Js,Z_TREES:Qe,Z_OK:Vt,Z_STREAM_END:Qs,Z_NEED_DICT:tc,Z_STREAM_ERROR:ct,Z_DATA_ERROR:ha,Z_MEM_ERROR:fa,Z_BUF_ERROR:ec,Z_DEFLATED:Gr}=Ve,An=16180,Wr=16181,Xr=16182,Yr=16183,Jr=16184,Qr=16185,ti=16186,ei=16187,ni=16188,ri=16189,hn=16190,wt=16191,Cn=16192,ii=16193,Mn=16194,ai=16195,oi=16196,si=16197,ci=16198,tn=16199,en=16200,li=16201,ui=16202,di=16203,hi=16204,fi=16205,zn=16206,pi=16207,_i=16208,$=16209,pa=16210,_a=16211,nc=852,rc=592,ic=15,ac=ic,gi=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function oc(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const jt=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.mode<An||n.mode>_a?1:0},ga=e=>{if(jt(e))return ct;const n=e.state;return e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=n.wrap&1),n.mode=An,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(nc),n.distcode=n.distdyn=new Int32Array(rc),n.sane=1,n.back=-1,Vt},ma=e=>{if(jt(e))return ct;const n=e.state;return n.wsize=0,n.whave=0,n.wnext=0,ga(e)},wa=(e,n)=>{let t;if(jt(e))return ct;const r=e.state;return n<0?(t=0,n=-n):(t=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?ct:(r.window!==null&&r.wbits!==n&&(r.window=null),r.wrap=t,r.wbits=n,ma(e))},ya=(e,n)=>{if(!e)return ct;const t=new oc;e.state=t,t.strm=e,t.window=null,t.mode=An;const r=wa(e,n);return r!==Vt&&(e.state=null),r},sc=e=>ya(e,ac);let mi=!0,Nn,Un;const cc=e=>{if(mi){Nn=new Int32Array(512),Un=new Int32Array(32);let n=0;for(;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(Te(ua,e.lens,0,288,Nn,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;Te(da,e.lens,0,32,Un,0,e.work,{bits:5}),mi=!1}e.lencode=Nn,e.lenbits=9,e.distcode=Un,e.distbits=5},ba=(e,n,t,r)=>{let i;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(n.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(n.subarray(t-r,t-r+i),a.wnext),r-=i,r?(a.window.set(n.subarray(t-r,t),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},lc=(e,n)=>{let t,r,i,a,s,o,u,c,l,_,f,d,m,k,A=0,w,I,x,g,R,B,b,P;const D=new Uint8Array(4);let y,S;const V=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(jt(e)||!e.output||!e.input&&e.avail_in!==0)return ct;t=e.state,t.mode===wt&&(t.mode=Cn),s=e.next_out,i=e.output,u=e.avail_out,a=e.next_in,r=e.input,o=e.avail_in,c=t.hold,l=t.bits,_=o,f=u,P=Vt;t:for(;;)switch(t.mode){case An:if(t.wrap===0){t.mode=Cn;break}for(;l<16;){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}if(t.wrap&2&&c===35615){t.wbits===0&&(t.wbits=15),t.check=0,D[0]=c&255,D[1]=c>>>8&255,t.check=j(t.check,D,2,0),c=0,l=0,t.mode=Wr;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",t.mode=$;break}if((c&15)!==Gr){e.msg="unknown compression method",t.mode=$;break}if(c>>>=4,l-=4,b=(c&15)+8,t.wbits===0&&(t.wbits=b),b>15||b>t.wbits){e.msg="invalid window size",t.mode=$;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=c&512?ri:wt,c=0,l=0;break;case Wr:for(;l<16;){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}if(t.flags=c,(t.flags&255)!==Gr){e.msg="unknown compression method",t.mode=$;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=$;break}t.head&&(t.head.text=c>>8&1),t.flags&512&&t.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,t.check=j(t.check,D,2,0)),c=0,l=0,t.mode=Xr;case Xr:for(;l<32;){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}t.head&&(t.head.time=c),t.flags&512&&t.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,D[2]=c>>>16&255,D[3]=c>>>24&255,t.check=j(t.check,D,4,0)),c=0,l=0,t.mode=Yr;case Yr:for(;l<16;){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}t.head&&(t.head.xflags=c&255,t.head.os=c>>8),t.flags&512&&t.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,t.check=j(t.check,D,2,0)),c=0,l=0,t.mode=Jr;case Jr:if(t.flags&1024){for(;l<16;){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}t.length=c,t.head&&(t.head.extra_len=c),t.flags&512&&t.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,t.check=j(t.check,D,2,0)),c=0,l=0}else t.head&&(t.head.extra=null);t.mode=Qr;case Qr:if(t.flags&1024&&(d=t.length,d>o&&(d=o),d&&(t.head&&(b=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(a,a+d),b)),t.flags&512&&t.wrap&4&&(t.check=j(t.check,r,d,a)),o-=d,a+=d,t.length-=d),t.length))break t;t.length=0,t.mode=ti;case ti:if(t.flags&2048){if(o===0)break t;d=0;do b=r[a+d++],t.head&&b&&t.length<65536&&(t.head.name+=String.fromCharCode(b));while(b&&d<o);if(t.flags&512&&t.wrap&4&&(t.check=j(t.check,r,d,a)),o-=d,a+=d,b)break t}else t.head&&(t.head.name=null);t.length=0,t.mode=ei;case ei:if(t.flags&4096){if(o===0)break t;d=0;do b=r[a+d++],t.head&&b&&t.length<65536&&(t.head.comment+=String.fromCharCode(b));while(b&&d<o);if(t.flags&512&&t.wrap&4&&(t.check=j(t.check,r,d,a)),o-=d,a+=d,b)break t}else t.head&&(t.head.comment=null);t.mode=ni;case ni:if(t.flags&512){for(;l<16;){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}if(t.wrap&4&&c!==(t.check&65535)){e.msg="header crc mismatch",t.mode=$;break}c=0,l=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=wt;break;case ri:for(;l<32;){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}e.adler=t.check=gi(c),c=0,l=0,t.mode=hn;case hn:if(t.havedict===0)return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=o,t.hold=c,t.bits=l,tc;e.adler=t.check=1,t.mode=wt;case wt:if(n===Js||n===Qe)break t;case Cn:if(t.last){c>>>=l&7,l-=l&7,t.mode=zn;break}for(;l<3;){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}switch(t.last=c&1,c>>>=1,l-=1,c&3){case 0:t.mode=ii;break;case 1:if(cc(t),t.mode=tn,n===Qe){c>>>=2,l-=2;break t}break;case 2:t.mode=oi;break;case 3:e.msg="invalid block type",t.mode=$}c>>>=2,l-=2;break;case ii:for(c>>>=l&7,l-=l&7;l<32;){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",t.mode=$;break}if(t.length=c&65535,c=0,l=0,t.mode=Mn,n===Qe)break t;case Mn:t.mode=ai;case ai:if(d=t.length,d){if(d>o&&(d=o),d>u&&(d=u),d===0)break t;i.set(r.subarray(a,a+d),s),o-=d,a+=d,u-=d,s+=d,t.length-=d;break}t.mode=wt;break;case oi:for(;l<14;){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}if(t.nlen=(c&31)+257,c>>>=5,l-=5,t.ndist=(c&31)+1,c>>>=5,l-=5,t.ncode=(c&15)+4,c>>>=4,l-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=$;break}t.have=0,t.mode=si;case si:for(;t.have<t.ncode;){for(;l<3;){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}t.lens[V[t.have++]]=c&7,c>>>=3,l-=3}for(;t.have<19;)t.lens[V[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,y={bits:t.lenbits},P=Te(Ys,t.lens,0,19,t.lencode,0,t.work,y),t.lenbits=y.bits,P){e.msg="invalid code lengths set",t.mode=$;break}t.have=0,t.mode=ci;case ci:for(;t.have<t.nlen+t.ndist;){for(;A=t.lencode[c&(1<<t.lenbits)-1],w=A>>>24,I=A>>>16&255,x=A&65535,!(w<=l);){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}if(x<16)c>>>=w,l-=w,t.lens[t.have++]=x;else{if(x===16){for(S=w+2;l<S;){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}if(c>>>=w,l-=w,t.have===0){e.msg="invalid bit length repeat",t.mode=$;break}b=t.lens[t.have-1],d=3+(c&3),c>>>=2,l-=2}else if(x===17){for(S=w+3;l<S;){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}c>>>=w,l-=w,b=0,d=3+(c&7),c>>>=3,l-=3}else{for(S=w+7;l<S;){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}c>>>=w,l-=w,b=0,d=11+(c&127),c>>>=7,l-=7}if(t.have+d>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=$;break}for(;d--;)t.lens[t.have++]=b}}if(t.mode===$)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=$;break}if(t.lenbits=9,y={bits:t.lenbits},P=Te(ua,t.lens,0,t.nlen,t.lencode,0,t.work,y),t.lenbits=y.bits,P){e.msg="invalid literal/lengths set",t.mode=$;break}if(t.distbits=6,t.distcode=t.distdyn,y={bits:t.distbits},P=Te(da,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,y),t.distbits=y.bits,P){e.msg="invalid distances set",t.mode=$;break}if(t.mode=tn,n===Qe)break t;case tn:t.mode=en;case en:if(o>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=o,t.hold=c,t.bits=l,Vs(e,f),s=e.next_out,i=e.output,u=e.avail_out,a=e.next_in,r=e.input,o=e.avail_in,c=t.hold,l=t.bits,t.mode===wt&&(t.back=-1);break}for(t.back=0;A=t.lencode[c&(1<<t.lenbits)-1],w=A>>>24,I=A>>>16&255,x=A&65535,!(w<=l);){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}if(I&&!(I&240)){for(g=w,R=I,B=x;A=t.lencode[B+((c&(1<<g+R)-1)>>g)],w=A>>>24,I=A>>>16&255,x=A&65535,!(g+w<=l);){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}c>>>=g,l-=g,t.back+=g}if(c>>>=w,l-=w,t.back+=w,t.length=x,I===0){t.mode=fi;break}if(I&32){t.back=-1,t.mode=wt;break}if(I&64){e.msg="invalid literal/length code",t.mode=$;break}t.extra=I&15,t.mode=li;case li:if(t.extra){for(S=t.extra;l<S;){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}t.length+=c&(1<<t.extra)-1,c>>>=t.extra,l-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=ui;case ui:for(;A=t.distcode[c&(1<<t.distbits)-1],w=A>>>24,I=A>>>16&255,x=A&65535,!(w<=l);){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}if(!(I&240)){for(g=w,R=I,B=x;A=t.distcode[B+((c&(1<<g+R)-1)>>g)],w=A>>>24,I=A>>>16&255,x=A&65535,!(g+w<=l);){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}c>>>=g,l-=g,t.back+=g}if(c>>>=w,l-=w,t.back+=w,I&64){e.msg="invalid distance code",t.mode=$;break}t.offset=x,t.extra=I&15,t.mode=di;case di:if(t.extra){for(S=t.extra;l<S;){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}t.offset+=c&(1<<t.extra)-1,c>>>=t.extra,l-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=$;break}t.mode=hi;case hi:if(u===0)break t;if(d=f-u,t.offset>d){if(d=t.offset-d,d>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=$;break}d>t.wnext?(d-=t.wnext,m=t.wsize-d):m=t.wnext-d,d>t.length&&(d=t.length),k=t.window}else k=i,m=s-t.offset,d=t.length;d>u&&(d=u),u-=d,t.length-=d;do i[s++]=k[m++];while(--d);t.length===0&&(t.mode=en);break;case fi:if(u===0)break t;i[s++]=t.length,u--,t.mode=en;break;case zn:if(t.wrap){for(;l<32;){if(o===0)break t;o--,c|=r[a++]<<l,l+=8}if(f-=u,e.total_out+=f,t.total+=f,t.wrap&4&&f&&(e.adler=t.check=t.flags?j(t.check,i,f,s-f):Be(t.check,i,f,s-f)),f=u,t.wrap&4&&(t.flags?c:gi(c))!==t.check){e.msg="incorrect data check",t.mode=$;break}c=0,l=0}t.mode=pi;case pi:if(t.wrap&&t.flags){for(;l<32;){if(o===0)break t;o--,c+=r[a++]<<l,l+=8}if(t.wrap&4&&c!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=$;break}c=0,l=0}t.mode=_i;case _i:P=Qs;break t;case $:P=ha;break t;case pa:return fa;case _a:default:return ct}return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=o,t.hold=c,t.bits=l,(t.wsize||f!==e.avail_out&&t.mode<$&&(t.mode<zn||n!==qr))&&ba(e,e.output,e.next_out,f-e.avail_out),_-=e.avail_in,f-=e.avail_out,e.total_in+=_,e.total_out+=f,t.total+=f,t.wrap&4&&f&&(e.adler=t.check=t.flags?j(t.check,i,f,e.next_out-f):Be(t.check,i,f,e.next_out-f)),e.data_type=t.bits+(t.last?64:0)+(t.mode===wt?128:0)+(t.mode===tn||t.mode===Mn?256:0),(_===0&&f===0||n===qr)&&P===Vt&&(P=ec),P},uc=e=>{if(jt(e))return ct;let n=e.state;return n.window&&(n.window=null),e.state=null,Vt},dc=(e,n)=>{if(jt(e))return ct;const t=e.state;return t.wrap&2?(t.head=n,n.done=!1,Vt):ct},hc=(e,n)=>{const t=n.length;let r,i,a;return jt(e)||(r=e.state,r.wrap!==0&&r.mode!==hn)?ct:r.mode===hn&&(i=1,i=Be(i,n,t,0),i!==r.check)?ha:(a=ba(e,n,t,t),a?(r.mode=pa,fa):(r.havedict=1,Vt))};var fc=ma,pc=wa,_c=ga,gc=sc,mc=ya,wc=lc,yc=uc,bc=dc,vc=hc,Ac="pako inflate (from Nodeca project)",xt={inflateReset:fc,inflateReset2:pc,inflateResetKeep:_c,inflateInit:gc,inflateInit2:mc,inflate:wc,inflateEnd:yc,inflateGetHeader:bc,inflateSetDictionary:vc,inflateInfo:Ac};function xc(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Ec=xc;const va=Object.prototype.toString,{Z_NO_FLUSH:Sc,Z_FINISH:kc,Z_OK:Ze,Z_STREAM_END:Bn,Z_NEED_DICT:Fn,Z_STREAM_ERROR:Ic,Z_DATA_ERROR:wi,Z_MEM_ERROR:Tc}=Ve;function qe(e){this.options=vn.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(e&&e.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15||(n.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ca,this.strm.avail_out=0;let t=xt.inflateInit2(this.strm,n.windowBits);if(t!==Ze)throw new Error(ae[t]);if(this.header=new Ec,xt.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=$e.string2buf(n.dictionary):va.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(t=xt.inflateSetDictionary(this.strm,n.dictionary),t!==Ze)))throw new Error(ae[t])}qe.prototype.push=function(e,n){const t=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(n===~~n?s=n:s=n===!0?kc:Sc,va.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),a=xt.inflate(t,s),a===Fn&&i&&(a=xt.inflateSetDictionary(t,i),a===Ze?a=xt.inflate(t,s):a===wi&&(a=Fn));t.avail_in>0&&a===Bn&&t.state.wrap>0&&e[t.next_in]!==0;)xt.inflateReset(t),a=xt.inflate(t,s);switch(a){case Ic:case wi:case Fn:case Tc:return this.onEnd(a),this.ended=!0,!1}if(o=t.avail_out,t.next_out&&(t.avail_out===0||a===Bn))if(this.options.to==="string"){let u=$e.utf8border(t.output,t.next_out),c=t.next_out-u,l=$e.buf2string(t.output,u);t.next_out=c,t.avail_out=r-c,c&&t.output.set(t.output.subarray(u,u+c),0),this.onData(l)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===Ze&&o===0)){if(a===Bn)return a=xt.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};qe.prototype.onData=function(e){this.chunks.push(e)};qe.prototype.onEnd=function(e){e===Ze&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=vn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function pr(e,n){const t=new qe(n);if(t.push(e),t.err)throw t.msg||ae[t.err];return t.result}function Rc(e,n){return n=n||{},n.raw=!0,pr(e,n)}var Pc=qe,Dc=pr,Lc=Rc,Oc=pr,Cc=Ve,Mc={Inflate:Pc,inflate:Dc,inflateRaw:Lc,ungzip:Oc,constants:Cc};const{Inflate:au,inflate:zc,inflateRaw:ou,ungzip:su}=Mc;var Nc=zc;const Ae=e=>"version"in e;function Uc(e){return new TextDecoder("utf-8").decode(e)}function Bc(e){return new TextEncoder().encode(e)}function yi(e){return te.encode(e)}function Fc(e){return U.from(on.toByteArray(e))}function Aa(e){const n=new Map;return e.errors&&e.errors.forEach(t=>{var r;let i=(r=t.msg)!==null&&r!==void 0?r:t.name;n.set(t.code,i)}),n}function $c(e,...n){if(e.args.length!=n.length)throw new Error("Invalid argument length");const t={};let r=0;return e.args.forEach(i=>{t[i.name]=n[r],r+=1}),t}function _r(e,n={}){e.forEach(t=>{if("accounts"in t)_r(t.accounts,n[t.name]);else if(n[t.name]===void 0)throw new Error(`Invalid arguments: ${t.name} not provided.`)})}function St(e){return e instanceof O?e:new O(e)}class Zc extends TypeError{constructor(n,t){let r;const{message:i,...a}=n,{path:s}=n;super(s.length===0?i:"At path: "+s.join(".")+" -- "+i),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>{var o;return(o=r)!=null?o:r=[n,...t()]}}}function re(e){return typeof e=="object"&&e!=null}function Ct(e){return typeof e=="string"?JSON.stringify(e):""+e}function Hc(e,n,t,r){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:i,branch:a}=n,{type:s}=t,{refinement:o,message:u="Expected a value of type `"+s+"`"+(o?" with refinement `"+o+"`":"")+", but received: `"+Ct(r)+"`"}=e;return{value:r,type:s,refinement:o,key:i[i.length-1],path:i,branch:a,...e,message:u}}function*bi(e,n,t,r){var i;re(i=e)&&typeof i[Symbol.iterator]=="function"||(e=[e]);for(const a of e){const s=Hc(a,n,t,r);s&&(yield s)}}function*gr(e,n,t={}){const{path:r=[],branch:i=[e],coerce:a=!1,mask:s=!1}=t,o={path:r,branch:i};if(a&&(e=n.coercer(e,o),s&&n.type!=="type"&&re(n.schema)&&re(e)&&!Array.isArray(e)))for(const c in e)n.schema[c]===void 0&&delete e[c];let u=!0;for(const c of n.validator(e,o))u=!1,yield[c,void 0];for(let[c,l,_]of n.entries(e,o)){const f=gr(l,_,{path:c===void 0?r:[...r,c],branch:c===void 0?i:[...i,l],coerce:a,mask:s});for(const d of f)d[0]?(u=!1,yield[d[0],void 0]):a&&(l=d[1],c===void 0?e=l:e instanceof Map?e.set(c,l):e instanceof Set?e.add(l):re(e)&&(e[c]=l))}if(u)for(const c of n.refiner(e,o))u=!1,yield[c,void 0];u&&(yield[void 0,e])}class Mt{constructor(n){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:t,schema:r,validator:i,refiner:a,coercer:s=u=>u,entries:o=function*(){}}=n;this.type=t,this.schema=r,this.entries=o,this.coercer=s,this.validator=i?(u,c)=>bi(i(u,c),c,this,u):()=>[],this.refiner=a?(u,c)=>bi(a(u,c),c,this,u):()=>[]}assert(n){return function(t,r){const i=Re(t,r);if(i[0])throw i[0]}(n,this)}create(n){return mr(n,this)}is(n){return xa(n,this)}mask(n){return function(t,r){const i=Re(t,r,{coerce:!0,mask:!0});if(i[0])throw i[0];return i[1]}(n,this)}validate(n,t={}){return Re(n,this,t)}}function mr(e,n){const t=Re(e,n,{coerce:!0});if(t[0])throw t[0];return t[1]}function xa(e,n){return!Re(e,n)[0]}function Re(e,n,t={}){const r=gr(e,n,t),i=function(a){const{done:s,value:o}=a.next();return s?void 0:o}(r);return i[0]?[new Zc(i[0],function*(){for(const a of r)a[0]&&(yield a[0])}),void 0]:[void 0,i[1]]}function Ge(e,n){return new Mt({type:e,schema:null,validator:n})}function $n(e){return new Mt({type:"array",schema:e,*entries(n){if(e&&Array.isArray(n))for(const[t,r]of n.entries())yield[t,r,e]},coercer:n=>Array.isArray(n)?n.slice():n,validator:n=>Array.isArray(n)||"Expected an array value, but received: "+Ct(n)})}function vi(e){const n=Ct(e);return new Mt({type:"literal",schema:e,validator:t=>t===e||"Expected the literal `"+n+"`, but received: "+Ct(t)})}function nn(e){return new Mt({...e,validator:(n,t)=>n===null||e.validator(n,t),refiner:(n,t)=>n===null||e.refiner(n,t)})}function rn(){return Ge("number",e=>typeof e=="number"&&!isNaN(e)||"Expected a number, but received: "+Ct(e))}function cn(e){return new Mt({...e,validator:(n,t)=>n===void 0||e.validator(n,t),refiner:(n,t)=>n===void 0||e.refiner(n,t)})}function Zt(){return Ge("string",e=>typeof e=="string"||"Expected a string, but received: "+Ct(e))}function Tt(e){const n=Object.keys(e);return new Mt({type:"type",schema:e,*entries(t){if(re(t))for(const r of n)yield[r,t[r],e[r]]},validator:t=>re(t)||"Expected an object, but received: "+Ct(t)})}function Ea(e){const n=e.map(t=>t.type).join(" | ");return new Mt({type:"union",schema:null,coercer:(t,r)=>(e.find(i=>{const[a]=i.validate(t,{coerce:!0});return!a})||wr()).coercer(t,r),validator(t,r){const i=[];for(const a of e){const[...s]=gr(t,a,r),[o]=s;if(!o[0])return[];for(const[u]of s)u&&i.push(u)}return["Expected the value to satisfy a union of `"+n+"`, but received: "+Ct(t),...i]}})}function wr(){return Ge("unknown",()=>!0)}async function Kc(e,n,t){if(n.length<=99)return await Ai(e,n,t);{const r=function(i,a){return Array.apply(0,new Array(Math.ceil(i.length/a))).map((s,o)=>i.slice(o*a,(o+1)*a))}(n,99);return(await Promise.all(r.map(i=>Ai(e,i,t)))).flat()}}async function Ai(e,n,t){const r=t??e.commitment;return(await e.getMultipleAccountsInfo(n,r)).map((i,a)=>i===null?null:{publicKey:n[a],account:i})}async function Vc(e,n,t,r,i){t&&t.length>0&&n.sign(...t);const a=n._compile(),s=a.serialize(),o=n._serialize(s).toString("base64"),u={encoding:"base64",commitment:r??e.commitment};if(i){const _=(Array.isArray(i)?i:a.nonProgramIds()).map(f=>f.toBase58());u.accounts={encoding:"base64",addresses:_}}t&&(u.sigVerify=!0);const c=[o,u],l=mr(await e._rpcRequest("simulateTransaction",c),Gc);if("error"in l){let _;if("data"in l.error&&(_=l.error.data.logs,_&&Array.isArray(_))){const f=`
    `,d=f+_.join(f);console.error(l.error.message,d)}throw new Vn("failed to simulate transaction: "+l.error.message,_)}return l.result}function jc(e){return function(n,t,r){return new Mt({...n,coercer:(i,a)=>xa(i,t)?n.coercer(r(i,a),a):n.coercer(i,a)})}(Sa(e),qc,n=>"error"in n?n:{...n,result:mr(n.result,e)})}const qc=Sa(wr());function Sa(e){return Ea([Tt({jsonrpc:vi("2.0"),id:Zt(),result:e}),Tt({jsonrpc:vi("2.0"),id:Zt(),error:Tt({code:wr(),message:Zt(),data:cn(Ge("any",()=>!0))})})])}const Gc=(xi=Tt({err:nn(Ea([Tt({}),Zt()])),logs:nn($n(Zt())),accounts:cn(nn($n(nn(Tt({executable:Ge("boolean",e=>typeof e=="boolean"),owner:Zt(),lamports:rn(),data:$n(Zt()),rentEpoch:cn(rn())}))))),unitsConsumed:cn(rn())}),jc(Tt({context:Tt({slot:rn()}),value:xi})));var xi;class nr{constructor(n,t,r){this.connection=n,this.wallet=t,this.opts=r,this.publicKey=t?.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(n,t){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(n,t,r){var i,a,s,o;if(r===void 0&&(r=this.opts),Ae(n))t&&n.sign(t);else if(n.feePayer=(i=n.feePayer)!==null&&i!==void 0?i:this.wallet.publicKey,n.recentBlockhash=(await this.connection.getLatestBlockhash(r.preflightCommitment)).blockhash,t)for(const c of t)n.partialSign(c);const u=(n=await this.wallet.signTransaction(n)).serialize();try{return await Ei(this.connection,u,r)}catch(c){if(c instanceof rr){const l=yi(Ae(n)?((a=n.signatures)===null||a===void 0?void 0:a[0])||new Uint8Array:(s=n.signature)!==null&&s!==void 0?s:new Uint8Array),_=await this.connection.getTransaction(l,{commitment:"confirmed"});if(_){const f=(o=_.meta)===null||o===void 0?void 0:o.logMessages;throw f?new Vn(c.message,f):c}throw c}throw c}}async sendAll(n,t){var r,i,a;t===void 0&&(t=this.opts);const s=(await this.connection.getLatestBlockhash(t.preflightCommitment)).blockhash;let o=n.map(l=>{var _,f;if(Ae(l.tx)){let d=l.tx;return l.signers&&d.sign(l.signers),d}{let d=l.tx,m=(_=l.signers)!==null&&_!==void 0?_:[];return d.feePayer=(f=d.feePayer)!==null&&f!==void 0?f:this.wallet.publicKey,d.recentBlockhash=s,m.forEach(k=>{d.partialSign(k)}),d}});const u=await this.wallet.signAllTransactions(o),c=[];for(let l=0;l<o.length;l+=1){const _=u[l],f=_.serialize();try{c.push(await Ei(this.connection,f,t))}catch(d){if(d instanceof rr){const m=yi(Ae(_)?((r=_.signatures)===null||r===void 0?void 0:r[0])||new Uint8Array:(i=_.signature)!==null&&i!==void 0?i:new Uint8Array),k=await this.connection.getTransaction(m,{commitment:"confirmed"});if(k){const A=(a=k.meta)===null||a===void 0?void 0:a.logMessages;throw A?new Vn(d.message,A):d}throw d}throw d}}return c}async simulate(n,t,r,i){let a,s=(await this.connection.getLatestBlockhash(r??this.connection.commitment)).blockhash;if(Ae(n)?(t&&(n.sign(t),n=await this.wallet.signTransaction(n)),a=await this.connection.simulateTransaction(n,{commitment:r})):(n.feePayer=n.feePayer||this.wallet.publicKey,n.recentBlockhash=s,t&&(n=await this.wallet.signTransaction(n)),a=await Vc(this.connection,n,t,r,i)),a.value.err)throw new Wc(a.value);return a.value}}class Wc extends Error{constructor(n,t){super(t),this.simulationResponse=n}}async function Ei(e,n,t){const r=t&&{skipPreflight:t.skipPreflight,preflightCommitment:t.preflightCommitment||t.commitment},i=await e.sendRawTransaction(n,r),a=(await e.confirmTransaction(i,t&&t.commitment)).value;if(a.err)throw new rr(`Raw transaction ${i} failed (${JSON.stringify(a)})`);return i}class rr extends Error{constructor(n){super(n)}}function fn(){return nr.local()}const Xc=new Map;function yr(e){return Xc.get(e)!==void 0}class pn extends Error{constructor(n){super(n),this.name="IdlError"}}class We{constructor(n){this.stack=n}static parse(n){var t;const r=/^Program (\w*) invoke/,i=/^Program \w* success/,a=[];for(let s=0;s<n.length;s++){if(i.exec(n[s])){a.pop();continue}const o=(t=r.exec(n[s]))===null||t===void 0?void 0:t[1];o&&a.push(new O(o))}return new We(a)}}class Pe extends Error{constructor(n,t,r,i,a,s){super(r.join(`
`).replace("Program log: ","")),this.errorLogs=r,this.logs=i,this.error={errorCode:n,errorMessage:t,comparedValues:s,origin:a},this._programErrorStack=We.parse(i)}static parse(n){if(!n)return null;const t=n.findIndex(c=>c.startsWith("Program log: AnchorError"));if(t===-1)return null;const r=n[t],i=[r];let a;if(t+1<n.length){if(n[t+1]==="Program log: Left:"){const c=/^Program log: (.*)$/,l=c.exec(n[t+2])[1],_=c.exec(n[t+4])[1];a=[new O(l),new O(_)],i.push(...n.slice(t+1,t+5))}else if(n[t+1].startsWith("Program log: Left:")){const c=/^Program log: (Left|Right): (.*)$/,l=c.exec(n[t+1])[2],_=c.exec(n[t+2])[2];i.push(...n.slice(t+1,t+3)),a=[l,_]}}const s=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),o=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),u=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r);if(s){const[c,l,_]=s.slice(1,4),f={code:c,number:parseInt(l)};return new Pe(f,_,i,n,void 0,a)}if(o){const[c,l,_,f,d]=o.slice(1,6),m={code:_,number:parseInt(f)},k={file:c,line:parseInt(l)};return new Pe(m,d,i,n,k,a)}if(u){const[c,l,_,f]=u.slice(1,5),d=c,m={code:l,number:parseInt(_)};return new Pe(m,f,i,n,d,a)}return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class _n extends Error{constructor(n,t,r){super(),this.code=n,this.msg=t,this.logs=r,r&&(this._programErrorStack=We.parse(r))}static parse(n,t){const r=n.toString();let i,a;if(r.includes("custom program error:")){let o=r.split("custom program error: ");if(o.length!==2)return null;i=o[1]}else{const o=r.match(/"Custom":([0-9]+)}/g);if(!o||o.length>1)return null;i=o[0].match(/([0-9]+)/g)[0]}try{a=parseInt(i)}catch{return null}let s=t.get(a);return s!==void 0?new _n(a,s,n.logs):(s=Yc.get(a),s!==void 0?new _n(a,s,n.logs):null)}get program(){var n;return(n=this._programErrorStack)===null||n===void 0?void 0:n.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var n;return(n=this._programErrorStack)===null||n===void 0?void 0:n.stack}toString(){return this.msg}}function ka(e,n){yr("debug-logs")&&console.log("Translating error:",e);const t=Pe.parse(e.logs);if(t)return t;const r=_n.parse(e,n);if(r)return r;if(e.logs){const i={get:function(a,s){return s==="programErrorStack"?a.programErrorStack.stack:s==="program"?a.programErrorStack.stack[e.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return e.programErrorStack=We.parse(e.logs),new Proxy(e,i)}return e}const v={InstructionMissing:100,InstructionFallbackNotFound:101,InstructionDidNotDeserialize:102,InstructionDidNotSerialize:103,IdlInstructionStub:1e3,IdlInstructionInvalidProgram:1001,ConstraintMut:2e3,ConstraintHasOne:2001,ConstraintSigner:2002,ConstraintRaw:2003,ConstraintOwner:2004,ConstraintRentExempt:2005,ConstraintSeeds:2006,ConstraintExecutable:2007,ConstraintState:2008,ConstraintAssociated:2009,ConstraintAssociatedInit:2010,ConstraintClose:2011,ConstraintAddress:2012,ConstraintZero:2013,ConstraintTokenMint:2014,ConstraintTokenOwner:2015,ConstraintMintMintAuthority:2016,ConstraintMintFreezeAuthority:2017,ConstraintMintDecimals:2018,ConstraintSpace:2019,RequireViolated:2500,RequireEqViolated:2501,RequireKeysEqViolated:2502,RequireNeqViolated:2503,RequireKeysNeqViolated:2504,RequireGtViolated:2505,RequireGteViolated:2506,AccountDiscriminatorAlreadySet:3e3,AccountDiscriminatorNotFound:3001,AccountDiscriminatorMismatch:3002,AccountDidNotDeserialize:3003,AccountDidNotSerialize:3004,AccountNotEnoughKeys:3005,AccountNotMutable:3006,AccountOwnedByWrongProgram:3007,InvalidProgramId:3008,InvalidProgramExecutable:3009,AccountNotSigner:3010,AccountNotSystemOwned:3011,AccountNotInitialized:3012,AccountNotProgramData:3013,AccountNotAssociatedTokenAccount:3014,AccountSysvarMismatch:3015,AccountReallocExceedsLimit:3016,AccountDuplicateReallocs:3017,StateInvalidAddress:4e3,DeclaredProgramIdMismatch:4100,Deprecated:5e3},Yc=new Map([[v.InstructionMissing,"8 byte instruction identifier not provided"],[v.InstructionFallbackNotFound,"Fallback functions are not supported"],[v.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[v.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[v.IdlInstructionStub,"The program was compiled without idl instructions"],[v.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[v.ConstraintMut,"A mut constraint was violated"],[v.ConstraintHasOne,"A has_one constraint was violated"],[v.ConstraintSigner,"A signer constraint was violated"],[v.ConstraintRaw,"A raw constraint was violated"],[v.ConstraintOwner,"An owner constraint was violated"],[v.ConstraintRentExempt,"A rent exemption constraint was violated"],[v.ConstraintSeeds,"A seeds constraint was violated"],[v.ConstraintExecutable,"An executable constraint was violated"],[v.ConstraintState,"A state constraint was violated"],[v.ConstraintAssociated,"An associated constraint was violated"],[v.ConstraintAssociatedInit,"An associated init constraint was violated"],[v.ConstraintClose,"A close constraint was violated"],[v.ConstraintAddress,"An address constraint was violated"],[v.ConstraintZero,"Expected zero account discriminant"],[v.ConstraintTokenMint,"A token mint constraint was violated"],[v.ConstraintTokenOwner,"A token owner constraint was violated"],[v.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[v.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[v.ConstraintMintDecimals,"A mint decimals constraint was violated"],[v.ConstraintSpace,"A space constraint was violated"],[v.RequireViolated,"A require expression was violated"],[v.RequireEqViolated,"A require_eq expression was violated"],[v.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[v.RequireNeqViolated,"A require_neq expression was violated"],[v.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[v.RequireGtViolated,"A require_gt expression was violated"],[v.RequireGteViolated,"A require_gte expression was violated"],[v.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[v.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[v.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[v.AccountDidNotDeserialize,"Failed to deserialize the account"],[v.AccountDidNotSerialize,"Failed to serialize the account"],[v.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[v.AccountNotMutable,"The given account is not mutable"],[v.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[v.InvalidProgramId,"Program ID was not as expected"],[v.InvalidProgramExecutable,"Program account is not executable"],[v.AccountNotSigner,"The given account did not sign"],[v.AccountNotSystemOwned,"The given account is not owned by the system program"],[v.AccountNotInitialized,"The program expected this account to be already initialized"],[v.AccountNotProgramData,"The given account is not a program data account"],[v.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[v.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[v.AccountReallocExceedsLimit,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[v.AccountDuplicateReallocs,"The account was duplicated for more than one reallocation"],[v.StateInvalidAddress,"The given state account does not have the correct address"],[v.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[v.Deprecated,"The API being used is deprecated and should no longer be used"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gn=function(){return gn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},gn.apply(this,arguments)};function Jc(e){return e.toLowerCase()}var Qc=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],tl=/[^A-Z0-9]+/gi;function Si(e,n,t){return n instanceof RegExp?e.replace(n,t):n.reduce(function(r,i){return r.replace(i,t)},e)}function el(e,n){return n===void 0&&(n={}),function(t,r){r===void 0&&(r={});for(var i=r.splitRegexp,a=i===void 0?Qc:i,s=r.stripRegexp,o=s===void 0?tl:s,u=r.transform,c=u===void 0?Jc:u,l=r.delimiter,_=l===void 0?" ":l,f=Si(Si(t,a,"$1\0$2"),o,"\0"),d=0,m=f.length;f.charAt(d)==="\0";)d++;for(;f.charAt(m-1)==="\0";)m--;return f.slice(d,m).split("\0").map(c).join(_)}(e,gn({delimiter:"."},n))}class Q{static fieldLayout(n,t){const r=n.name!==void 0?q(n.name):void 0;switch(n.type){case"bool":return T.bool(r);case"u8":return T.u8(r);case"i8":return T.i8(r);case"u16":return T.u16(r);case"i16":return T.i16(r);case"u32":return T.u32(r);case"i32":return T.i32(r);case"f32":return T.f32(r);case"u64":return T.u64(r);case"i64":return T.i64(r);case"f64":return T.f64(r);case"u128":return T.u128(r);case"i128":return T.i128(r);case"bytes":return T.vecU8(r);case"string":return T.str(r);case"publicKey":return T.publicKey(r);default:if("vec"in n.type)return T.vec(Q.fieldLayout({name:void 0,type:n.type.vec},t),r);if("option"in n.type)return T.option(Q.fieldLayout({name:void 0,type:n.type.option},t),r);if("defined"in n.type){const i=n.type.defined;if(t===void 0)throw new pn("User defined types not provided");const a=t.filter(s=>s.name===i);if(a.length!==1)throw new pn(`Type not found: ${JSON.stringify(n)}`);return Q.typeDefLayout(a[0],t,r)}if("array"in n.type){let i=n.type.array[0],a=n.type.array[1],s=Q.fieldLayout({name:void 0,type:i},t);return T.array(s,a,r)}throw new Error(`Not yet implemented: ${n}`)}}static typeDefLayout(n,t=[],r){if(n.type.kind==="struct"){const i=n.type.fields.map(a=>Q.fieldLayout(a,t));return T.struct(i,r)}if(n.type.kind==="enum"){let i=n.type.variants.map(a=>{const s=q(a.name);if(a.fields===void 0)return T.struct([],s);const o=a.fields.map(u=>{if(!u.hasOwnProperty("name"))throw new Error("Tuple enum variants not yet implemented.");return Q.fieldLayout(u,t)});return T.struct(o,s)});return r!==void 0?T.rustEnum(i).replicate(r):T.rustEnum(i,r)}throw new Error(`Unknown type kint: ${n}`)}}class br{constructor(n){this.idl=n,this.ixLayout=br.parseIxLayout(n);const t=new Map;n.instructions.forEach(r=>{const i=Zn("global",r.name);t.set(te.encode(i),{layout:this.ixLayout.get(r.name),name:r.name})}),n.state&&n.state.methods.map(r=>{const i=Zn("state",r.name);t.set(te.encode(i),{layout:this.ixLayout.get(r.name),name:r.name})}),this.sighashLayouts=t}encode(n,t){return this._encode("global",n,t)}encodeState(n,t){return this._encode("state",n,t)}_encode(n,t,r){const i=U.alloc(1e3),a=q(t),s=this.ixLayout.get(a);if(!s)throw new Error(`Unknown method: ${a}`);const o=s.encode(r,i),u=i.slice(0,o);return U.concat([Zn(n,t),u])}static parseIxLayout(n){const t=(n.state?n.state.methods:[]).map(r=>{let i=r.args.map(s=>{var o,u;return Q.fieldLayout(s,Array.from([...(o=n.accounts)!==null&&o!==void 0?o:[],...(u=n.types)!==null&&u!==void 0?u:[]]))});const a=q(r.name);return[a,T.struct(i,a)]}).concat(n.instructions.map(r=>{let i=r.args.map(s=>{var o,u;return Q.fieldLayout(s,Array.from([...(o=n.accounts)!==null&&o!==void 0?o:[],...(u=n.types)!==null&&u!==void 0?u:[]]))});const a=q(r.name);return[a,T.struct(i,a)]}));return new Map(t)}decode(n,t="hex"){typeof n=="string"&&(n=t==="hex"?U.from(n,"hex"):te.decode(n));let r=te.encode(n.slice(0,8)),i=n.slice(8);const a=this.sighashLayouts.get(r);return a?{data:a.layout.decode(i),name:a.name}:null}format(n,t){return vt.format(n,t,this.idl)}}class vt{static format(n,t,r){const i=r.instructions.filter(o=>n.name===o.name)[0];if(i===void 0)return console.error("Invalid instruction given"),null;const a=i.args.map(o=>({name:o.name,type:vt.formatIdlType(o.type),data:vt.formatIdlData(o,n.data[o.name],r.types)})),s=vt.flattenIdlAccounts(i.accounts);return{args:a,accounts:t.map((o,u)=>u<s.length?{name:s[u].name,...o}:{name:void 0,...o})}}static formatIdlType(n){if(typeof n=="string")return n;if("vec"in n)return`Vec<${this.formatIdlType(n.vec)}>`;if("option"in n)return`Option<${this.formatIdlType(n.option)}>`;if("defined"in n)return n.defined;if("array"in n)return`Array<${n.array[0]}; ${n.array[1]}>`;throw new Error(`Unknown IDL type: ${n}`)}static formatIdlData(n,t,r){if(typeof n.type=="string")return t.toString();if(n.type.hasOwnProperty("vec"))return"["+t.map(i=>this.formatIdlData({name:"",type:n.type.vec},i)).join(", ")+"]";if(n.type.hasOwnProperty("option"))return t===null?"null":this.formatIdlData({name:"",type:n.type.option},t,r);if(n.type.hasOwnProperty("defined")){if(r===void 0)throw new Error("User defined types not provided");const i=r.filter(a=>a.name===n.type.defined);if(i.length!==1)throw new Error(`Type not found: ${n.type.defined}`);return vt.formatIdlDataDefined(i[0],t,r)}return"unknown"}static formatIdlDataDefined(n,t,r){if(n.type.kind==="struct"){const i=n.type;return"{ "+Object.keys(t).map(a=>{const s=i.fields.filter(o=>o.name===a)[0];if(s===void 0)throw new Error("Unable to find type");return a+": "+vt.formatIdlData(s,t[a],r)}).join(", ")+" }"}if(n.type.variants.length===0)return"{}";if(n.type.variants[0].name){const i=n.type.variants,a=Object.keys(t)[0],s=t[a],o=Object.keys(s).map(c=>{var l;const _=s[c],f=(l=i[a])===null||l===void 0?void 0:l.filter(d=>d.name===c)[0];if(f===void 0)throw new Error("Unable to find variant");return c+": "+vt.formatIdlData(f,_,r)}).join(", "),u=q(a,{pascalCase:!0});return o.length===0?u:`${u} { ${o} }`}return"Tuple formatting not yet implemented"}static flattenIdlAccounts(n,t){return n.map(r=>{const i=function(a){const s=a.replace(/([A-Z])/g," $1");return s.charAt(0).toUpperCase()+s.slice(1)}(r.name);if(r.hasOwnProperty("accounts")){const a=t?`${t} > ${i}`:i;return vt.flattenIdlAccounts(r.accounts,a)}return{...r,name:t?`${t} > ${i}`:i}}).flat()}}function Zn(e,n){var t;let r=`${e}:${t===void 0&&(t={}),el(n,gn({delimiter:"_"},t))}`;return U.from(le.sha256.digest(r)).slice(0,8)}function vr(e,n){if(n.type.kind==="enum"){let t=n.type.variants.map(r=>r.fields===void 0?0:r.fields.map(i=>{if(typeof i!="object"||!("name"in i))throw new Error("Tuple enum variants not yet implemented.");return De(e,i.type)}).reduce((i,a)=>i+a));return Math.max(...t)+1}return n.type.fields===void 0?0:n.type.fields.map(t=>De(e,t.type)).reduce((t,r)=>t+r,0)}function De(e,n){var t,r;switch(n){case"bool":case"u8":case"i8":case"bytes":case"string":return 1;case"i16":case"u16":return 2;case"u32":case"i32":case"f32":return 4;case"u64":case"i64":case"f64":return 8;case"u128":case"i128":return 16;case"publicKey":return 32;default:if("vec"in n)return 1;if("option"in n)return 1+De(e,n.option);if("coption"in n)return 4+De(e,n.coption);if("defined"in n){const i=(r=(t=e.types)===null||t===void 0?void 0:t.filter(a=>a.name===n.defined))!==null&&r!==void 0?r:[];if(i.length!==1)throw new pn(`Type not found: ${JSON.stringify(n)}`);return vr(e,i[0])}if("array"in n){let i=n.array[0],a=n.array[1];return De(e,i)*a}throw new Error(`Invalid type ${JSON.stringify(n)}`)}}class Le{constructor(n){if(n.accounts===void 0)return void(this.accountLayouts=new Map);const t=n.accounts.map(r=>[r.name,Q.typeDefLayout(r,n.types)]);this.accountLayouts=new Map(t),this.idl=n}async encode(n,t){const r=U.alloc(1e3),i=this.accountLayouts.get(n);if(!i)throw new Error(`Unknown account: ${n}`);const a=i.encode(t,r);let s=r.slice(0,a),o=Le.accountDiscriminator(n);return U.concat([o,s])}decode(n,t){if(Le.accountDiscriminator(n).compare(t.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(n,t)}decodeUnchecked(n,t){const r=t.slice(8),i=this.accountLayouts.get(n);if(!i)throw new Error(`Unknown account: ${n}`);return i.decode(r)}memcmp(n,t){const r=Le.accountDiscriminator(n);return{offset:0,bytes:te.encode(t?U.concat([r,t]):r)}}size(n){var t;return 8+((t=vr(this.idl,n))!==null&&t!==void 0?t:0)}static accountDiscriminator(n){return U.from(le.sha256.digest(`account:${q(n,{pascalCase:!0})}`)).slice(0,8)}}class nl{constructor(n){if(n.events===void 0)return void(this.layouts=new Map);const t=n.events.map(r=>{let i={name:r.name,type:{kind:"struct",fields:r.fields.map(a=>({name:a.name,type:a.type}))}};return[r.name,Q.typeDefLayout(i,n.types)]});this.layouts=new Map(t),this.discriminators=new Map(n.events===void 0?[]:n.events.map(r=>[on.fromByteArray(rl(r.name)),r.name]))}decode(n){let t;try{t=U.from(on.toByteArray(n))}catch{return null}const r=on.fromByteArray(t.slice(0,8)),i=this.discriminators.get(r);if(i===void 0)return null;const a=this.layouts.get(i);if(!a)throw new Error(`Unknown event: ${i}`);return{data:a.decode(t.slice(8)),name:i}}}function rl(e){return U.from(le.sha256.digest(`event:${e}`)).slice(0,8)}class il{constructor(n){if(n.state===void 0)throw new Error("Idl state not defined.");this.layout=Q.typeDefLayout(n.state.struct,n.types)}async encode(n,t){const r=U.alloc(1e3),i=this.layout.encode(t,r),a=await Ia(n),s=r.slice(0,i);return U.concat([a,s])}decode(n){const t=n.slice(8);return this.layout.decode(t)}}async function Ia(e){let n=yr("anchor-deprecated-state")?"account":"state";return U.from(le.sha256.digest(`${n}:${e}`)).slice(0,8)}class al{constructor(n){if(n.types===void 0)return void(this.typeLayouts=new Map);const t=n.types.map(r=>[r.name,Q.typeDefLayout(r,n.types)]);this.typeLayouts=new Map(t),this.idl=n}encode(n,t){const r=U.alloc(1e3),i=this.typeLayouts.get(n);if(!i)throw new Error(`Unknown type: ${n}`);const a=i.encode(t,r);return r.slice(0,a)}decode(n,t){const r=this.typeLayouts.get(n);if(!r)throw new Error(`Unknown type: ${n}`);return r.decode(t)}}class Ar{constructor(n){this.instruction=new br(n),this.accounts=new Le(n),this.events=new nl(n),n.state&&(this.state=new il(n)),this.types=new al(n)}}var ol=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Ir<"u"?Ir:typeof self<"u"?self:{};function sl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}class et{constructor(n,t){if(!Number.isInteger(n))throw new TypeError("span must be an integer");this.span=n,this.property=t}makeDestinationObject(){return{}}decode(n,t){throw new Error("Layout is abstract")}encode(n,t,r){throw new Error("Layout is abstract")}getSpan(n,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(n){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=n,t}fromArray(n){}}var xn=et;class Ht extends et{isCount(){throw new Error("ExternalLayout is abstract")}}class Ta extends Ht{constructor(n,t,r){if(!(n instanceof et))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(n.span,r||n.property),this.layout=n,this.offset=t}isCount(){return this.layout instanceof En||this.layout instanceof Ra}decode(n,t){return t===void 0&&(t=0),this.layout.decode(n,t+this.offset)}encode(n,t,r){return r===void 0&&(r=0),this.layout.encode(n,t,r+this.offset)}}class En extends et{constructor(n,t){if(super(n,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(n,t){return t===void 0&&(t=0),n.readUIntLE(t,this.span)}encode(n,t,r){return r===void 0&&(r=0),t.writeUIntLE(n,r,this.span),this.span}}class Ra extends et{constructor(n,t){if(super(n,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(n,t){return t===void 0&&(t=0),n.readUIntBE(t,this.span)}encode(n,t,r){return r===void 0&&(r=0),t.writeUIntBE(n,r,this.span),this.span}}const ir=Math.pow(2,32);function Pa(e){const n=Math.floor(e/ir);return{hi32:n,lo32:e-n*ir}}function Da(e,n){return e*ir+n}class cl extends et{constructor(n){super(8,n)}decode(n,t){t===void 0&&(t=0);const r=n.readUInt32LE(t);return Da(n.readUInt32LE(t+4),r)}encode(n,t,r){r===void 0&&(r=0);const i=Pa(n);return t.writeUInt32LE(i.lo32,r),t.writeUInt32LE(i.hi32,r+4),8}}class ll extends et{constructor(n){super(8,n)}decode(n,t){t===void 0&&(t=0);const r=n.readUInt32LE(t);return Da(n.readInt32LE(t+4),r)}encode(n,t,r){r===void 0&&(r=0);const i=Pa(n);return t.writeUInt32LE(i.lo32,r),t.writeInt32LE(i.hi32,r+4),8}}class ul extends et{constructor(n,t,r){if(!Array.isArray(n)||!n.reduce((a,s)=>a&&s instanceof et,!0))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&r===void 0&&(r=t,t=void 0);for(const a of n)if(0>a.span&&a.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=n.reduce((a,s)=>a+s.getSpan(),0)}catch{}super(i,t),this.fields=n,this.decodePrefixes=!!r}getSpan(n,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let r=0;try{r=this.fields.reduce((i,a)=>{const s=a.getSpan(n,t);return t+=s,i+s},0)}catch{throw new RangeError("indeterminate span")}return r}decode(n,t){t===void 0&&(t=0);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(n,t)),t+=i.getSpan(n,t),this.decodePrefixes&&n.length===t)break;return r}encode(n,t,r){r===void 0&&(r=0);const i=r;let a=0,s=0;for(const o of this.fields){let u=o.span;if(s=0<u?u:0,o.property!==void 0){const c=n[o.property];c!==void 0&&(s=o.encode(c,t,r),0>u&&(u=o.getSpan(t,r)))}a=r,r+=u}return a+s-i}fromArray(n){const t=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<n.length&&(t[r.property]=n.shift());return t}layoutFor(n){if(typeof n!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===n)return t}offsetOf(n){if(typeof n!="string")throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===n)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}class La{constructor(n){this.property=n}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class ki extends La{constructor(n,t){if(!(n instanceof Ht&&n.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||n.property||"variant"),this.layout=n}decode(n,t){return this.layout.decode(n,t)}encode(n,t,r){return this.layout.encode(n,t,r)}}class Oa extends et{constructor(n,t,r){const i=n instanceof En||n instanceof Ra;if(i)n=new ki(new Ta(n));else if(n instanceof Ht&&n.isCount())n=new ki(n);else if(!(n instanceof La))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof et))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let a=-1;t&&(a=t.span,0<=a&&i&&(a+=n.layout.span)),super(a,r),this.discriminator=n,this.usesPrefixDiscriminator=i,this.defaultLayout=t,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(o){return s(o)},this.configGetSourceVariant=function(o){s=o.bind(this)}}getSpan(n,t){if(0<=this.span)return this.span;t===void 0&&(t=0);const r=this.getVariant(n,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(n,t)}defaultGetSourceVariant(n){if(n.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&n.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[n[this.discriminator.property]];if(t&&(!t.layout||n.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(n.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(n,t){let r;t===void 0&&(t=0);const i=this.discriminator,a=i.decode(n,t);let s=this.registry[a];if(s===void 0){let o=0;s=this.defaultLayout,this.usesPrefixDiscriminator&&(o=i.layout.span),r=this.makeDestinationObject(),r[i.property]=a,r[s.property]=this.defaultLayout.decode(n,t+o)}else r=s.decode(n,t);return r}encode(n,t,r){r===void 0&&(r=0);const i=this.getSourceVariant(n);if(i===void 0){const a=this.discriminator,s=this.defaultLayout;let o=0;return this.usesPrefixDiscriminator&&(o=a.layout.span),a.encode(n[a.property],t,r),o+s.encode(n[s.property],t,r+o)}return i.encode(n,t,r)}addVariant(n,t,r){const i=new dl(this,n,t,r);return this.registry[n]=i,i}getVariant(n,t){let r=n;return Y.isBuffer(n)&&(t===void 0&&(t=0),r=this.discriminator.decode(n,t)),this.registry[r]}}class dl extends et{constructor(n,t,r,i){if(!(n instanceof Oa))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof et))throw new TypeError("layout must be a Layout");if(n.defaultLayout!==null&&0<=r.span&&r.span>n.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let a=n.span;0>n.span&&(a=r?r.span:0,0<=a&&n.usesPrefixDiscriminator&&(a+=n.discriminator.layout.span)),super(a,i),this.union=n,this.variant=t,this.layout=r||null}getSpan(n,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(n,t+r)}decode(n,t){const r=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(n,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(n,t+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(n,t,r){r===void 0&&(r=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!n.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let a=i;if(this.layout&&(this.layout.encode(n[this.property],t,r+i),a+=this.layout.getSpan(t,r+i),0<=this.union.span&&a>this.union.span))throw new Error("encoded variant overruns containing union");return a}fromArray(n){if(this.layout)return this.layout.fromArray(n)}}class hl extends et{constructor(n,t){if(!(n instanceof Ht&&n.isCount()||Number.isInteger(n)&&0<=n))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;n instanceof Ht||(r=n),super(r,t),this.length=n}getSpan(n,t){let r=this.span;return 0>r&&(r=this.length.decode(n,t)),r}decode(n,t){t===void 0&&(t=0);let r=this.span;return 0>r&&(r=this.length.decode(n,t)),n.slice(t,t+r)}encode(n,t,r){let i=this.length;if(this.length instanceof Ht&&(i=n.length),!Y.isBuffer(n)||i!==n.length)throw new TypeError((a="Blob.encode",((s=this).property?a+"["+s.property+"]":a)+" requires (length "+i+") Buffer as src"));var a,s;if(r+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(n.toString("hex"),r,i,"hex"),this.length instanceof Ht&&this.length.encode(i,t,r),i}}var fl=(e,n,t)=>new Ta(e,n,t),X=e=>new En(1,e),Et=e=>new En(4,e),bt=e=>new cl(e),yt=e=>new ll(e),L=(e,n,t)=>new ul(e,n,t),Ca=(e,n,t)=>new Oa(e,n,t),qt=(e,n)=>new hl(e,n);class pl{constructor(n){}encode(n,t){switch(q(n)){case"initializeMint":return function({decimals:r,mintAuthority:i,freezeAuthority:a}){return K({initializeMint:{decimals:r,mintAuthority:i.toBuffer(),freezeAuthorityOption:!!a,freezeAuthority:(a||O.default).toBuffer()}})}(t);case"initializeAccount":return K({initializeAccount:{}});case"initializeMultisig":return function({m:r}){return K({initializeMultisig:{m:r}})}(t);case"transfer":return function({amount:r}){return K({transfer:{amount:r}})}(t);case"approve":return function({amount:r}){return K({approve:{amount:r}})}(t);case"revoke":return K({revoke:{}});case"setAuthority":return function({authorityType:r,newAuthority:i}){return K({setAuthority:{authorityType:r,newAuthority:i}})}(t);case"mintTo":return function({amount:r}){return K({mintTo:{amount:r}})}(t);case"burn":return function({amount:r}){return K({burn:{amount:r}})}(t);case"closeAccount":return K({closeAccount:{}});case"freezeAccount":return K({freezeAccount:{}});case"thawAccount":return K({thawAccount:{}});case"transferChecked":return function({amount:r,decimals:i}){return K({transferChecked:{amount:r,decimals:i}})}(t);case"approvedChecked":return function({amount:r,decimals:i}){return K({approveChecked:{amount:r,decimals:i}})}(t);case"mintToChecked":return function({amount:r,decimals:i}){return K({mintToChecked:{amount:r,decimals:i}})}(t);case"burnChecked":return function({amount:r,decimals:i}){return K({burnChecked:{amount:r,decimals:i}})}(t);case"intializeAccount2":return function({authority:r}){return K({initilaizeAccount2:{authority:r}})}(t);case"syncNative":return K({syncNative:{}});case"initializeAccount3":return function({authority:r}){return K({initializeAccount3:{authority:r}})}(t);case"initializeMultisig2":return function({m:r}){return K({initializeMultisig2:{m:r}})}(t);case"initializeMint2":return function({decimals:r,mintAuthority:i,freezeAuthority:a}){return K({encodeInitializeMint2:{decimals:r,mintAuthority:i,freezeAuthority:a}})}(t);default:throw new Error(`Invalid instruction: ${n}`)}}encodeState(n,t){throw new Error("SPL token does not have state")}}const H=Ca(X("instruction"));function Qt(e){return qt(32,e)}function K(e){let n=Y.alloc(_l),t=H.encode(e,n);return n.slice(0,t)}H.addVariant(0,L([X("decimals"),qt(32,"mintAuthority"),X("freezeAuthorityOption"),Qt("freezeAuthority")]),"initializeMint"),H.addVariant(1,L([]),"initializeAccount"),H.addVariant(2,L([X("m")]),"initializeMultisig"),H.addVariant(3,L([bt("amount")]),"transfer"),H.addVariant(4,L([bt("amount")]),"approve"),H.addVariant(5,L([]),"revoke"),H.addVariant(6,L([X("authorityType"),X("newAuthorityOption"),Qt("newAuthority")]),"setAuthority"),H.addVariant(7,L([bt("amount")]),"mintTo"),H.addVariant(8,L([bt("amount")]),"burn"),H.addVariant(9,L([]),"closeAccount"),H.addVariant(10,L([]),"freezeAccount"),H.addVariant(11,L([]),"thawAccount"),H.addVariant(12,L([bt("amount"),X("decimals")]),"transferChecked"),H.addVariant(13,L([bt("amount"),X("decimals")]),"approvedChecked"),H.addVariant(14,L([bt("amount"),X("decimals")]),"mintToChecked"),H.addVariant(15,L([bt("amount"),X("decimals")]),"burnedChecked"),H.addVariant(16,L([Qt("authority")]),"InitializeAccount2"),H.addVariant(17,L([]),"syncNative"),H.addVariant(18,L([Qt("authority")]),"initializeAccount3"),H.addVariant(19,L([X("m")]),"initializeMultisig2"),H.addVariant(20,L([X("decimals"),Qt("mintAuthority"),X("freezeAuthorityOption"),Qt("freezeAuthority")]),"initializeMint2");const _l=Math.max(...Object.values(H.registry).map(e=>e.span));class gl{constructor(n){}encode(n,t){throw new Error("SPL token does not have state")}decode(n){throw new Error("SPL token does not have state")}}function ln(e){return new xr(qt(8),n=>Er.fromBuffer(n),n=>n.toBuffer(),e)}function ee(e){return new xr(qt(32),n=>new O(n),n=>n.toBuffer(),e)}function Oe(e,n){return new ml(e,n)}class xr extends xn{constructor(n,t,r,i){super(n.span,i),this.layout=n,this.decoder=t,this.encoder=r}decode(n,t){return this.decoder(this.layout.decode(n,t))}encode(n,t,r){return this.layout.encode(this.encoder(n),t,r)}getSpan(n,t){return this.layout.getSpan(n,t)}}class ml extends xn{constructor(n,t){super(-1,t),this.layout=n,this.discriminator=Et()}encode(n,t,r=0){return n==null?this.layout.span+this.discriminator.encode(0,t,r):(this.discriminator.encode(1,t,r),this.layout.encode(n,t,r+4)+4)}decode(n,t=0){const r=this.discriminator.decode(n,t);if(r===0)return null;if(r===1)return this.layout.decode(n,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(n,t=0){return this.layout.getSpan(n,t+4)+4}}function wl(e){if(e===0)return!1;if(e===1)return!0;throw new Error("Invalid bool: "+e)}function yl(e){return e?1:0}class Er extends ie{toBuffer(){const n=super.toArray().reverse(),t=Y.from(n);if(t.length===8)return t;if(t.length>=8)throw new Error("u64 too large");const r=Y.alloc(8);return t.copy(r),r}static fromBuffer(n){if(n.length!==8)throw new Error(`Invalid buffer length: ${n.length}`);return new Er([...n].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}class bl{constructor(n){this.idl=n}async encode(n,t){switch(n){case"token":{const r=Y.alloc(165),i=Ri.encode(t,r);return r.slice(0,i)}case"mint":{const r=Y.alloc(82),i=Ii.encode(t,r);return r.slice(0,i)}default:throw new Error(`Invalid account name: ${n}`)}}decode(n,t){return this.decodeUnchecked(n,t)}decodeUnchecked(n,t){switch(n){case"token":return function(r){return Ri.decode(r)}(t);case"mint":return function(r){return Ii.decode(r)}(t);default:throw new Error(`Invalid account name: ${n}`)}}memcmp(n,t){switch(n){case"token":return{dataSize:165};case"mint":return{dataSize:82};default:throw new Error(`Invalid account name: ${n}`)}}size(n){var t;return(t=vr(this.idl,n))!==null&&t!==void 0?t:0}}const Ii=L([Oe(ee(),"mintAuthority"),ln("supply"),X("decimals"),(Ti="isInitialized",new xr(X(),wl,yl,Ti)),Oe(ee(),"freezeAuthority")]);var Ti;const Ri=L([ee("mint"),ee("authority"),ln("amount"),Oe(ee(),"delegate"),X("state"),Oe(ln(),"isNative"),ln("delegatedAmount"),Oe(ee(),"closeAuthority")]);class vl{constructor(n){}decode(n){throw new Error("SPL token program does not have events")}}class Al{constructor(n){}encode(n,t){throw new Error("SPL token does not have user-defined types")}decode(n,t){throw new Error("SPL token does not have user-defined types")}}class xl{constructor(n){this.instruction=new pl(n),this.accounts=new bl(n),this.events=new vl(n),this.state=new gl(n),this.types=new Al(n)}}class El extends xn{constructor(n){super(-1,n),this.property=n,this.layout=L([Et("length"),Et("lengthPadding"),qt(fl(Et(),-8),"chars")],this.property)}encode(n,t,r=0){if(n==null)return this.layout.span;const i={chars:Y.from(n,"utf8")};return this.layout.encode(i,t,r)}decode(n,t=0){return this.layout.decode(n,t).chars.toString()}getSpan(n,t=0){return Et().span+Et().span+new ie(new Uint8Array(n).slice(t,t+4),10,"le").toNumber()}}function an(e){return new El(e)}function ot(e){return qt(32,e)}const nt=Ca(Et("instruction"));nt.addVariant(0,L([yt("lamports"),yt("space"),ot("owner")]),"createAccount"),nt.addVariant(1,L([ot("owner")]),"assign"),nt.addVariant(2,L([yt("lamports")]),"transfer"),nt.addVariant(3,L([ot("base"),an("seed"),yt("lamports"),yt("space"),ot("owner")]),"createAccountWithSeed"),nt.addVariant(4,L([ot("authorized")]),"advanceNonceAccount"),nt.addVariant(5,L([yt("lamports")]),"withdrawNonceAccount"),nt.addVariant(6,L([ot("authorized")]),"initializeNonceAccount"),nt.addVariant(7,L([ot("authorized")]),"authorizeNonceAccount"),nt.addVariant(8,L([yt("space")]),"allocate"),nt.addVariant(9,L([ot("base"),an("seed"),yt("space"),ot("owner")]),"allocateWithSeed"),nt.addVariant(10,L([ot("base"),an("seed"),ot("owner")]),"assignWithSeed"),nt.addVariant(11,L([yt("lamports"),an("seed"),ot("owner")]),"transferWithSeed");Math.max(...Object.values(nt.registry).map(e=>e.span));class Sl extends xn{constructor(n,t,r,i){super(n.span,i),this.layout=n,this.decoder=t,this.encoder=r}decode(n,t){return this.decoder(this.layout.decode(n,t))}encode(n,t,r){return this.layout.encode(this.encoder(n),t,r)}getSpan(n,t){return this.layout.getSpan(n,t)}}function Pi(e){return new Sl(qt(32),n=>new O(n),n=>n.toBuffer(),e)}L([Et("version"),Et("state"),Pi("authorizedPubkey"),Pi("nonce"),L([bt("lamportsPerSignature")],"feeCalculator")]);function kl(e,n,t){const r=U.concat([e.toBuffer(),U.from(n),t.toBuffer()]),i=le.sha256.digest(r);return new O(U.from(i))}function Il(e,n){let t=U.alloc(0);e.forEach(function(a){if(a.length>32)throw new TypeError("Max seed length exceeded");t=U.concat([t,Tl(a)])}),t=U.concat([t,n.toBuffer(),U.from("ProgramDerivedAddress")]);let r=le.sha256(new Uint8Array(t)),i=new ie(r,16).toArray(void 0,32);if(O.isOnCurve(new Uint8Array(i)))throw new Error("Invalid seeds, address must fall off the curve");return new O(i)}function Ma(e,n){let t,r=255;for(;r!=0;){try{t=Il(e.concat(U.from([r])),n)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[t,r]}throw new Error("Unable to find a viable program address nonce")}const Tl=e=>e instanceof U?e:e instanceof Uint8Array?U.from(e.buffer,e.byteOffset,e.byteLength):U.from(e);async function Rl(e,...n){let t=[U.from([97,110,99,104,111,114])];n.forEach(i=>{t.push(i instanceof U?i:St(i).toBuffer())});const[r]=await O.findProgramAddress(t,St(e));return r}const Pl=new O("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),Dl=new O("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var ar={exports:{}};(function(e,n){var t=typeof self<"u"?self:ol,r=function(){function a(){this.fetch=!1,this.DOMException=t.DOMException}return a.prototype=t,new a}();(function(a){(function(s){var o="URLSearchParams"in a,u="Symbol"in a&&"iterator"in Symbol,c="FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),l="FormData"in a,_="ArrayBuffer"in a;if(_)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(h){return h&&f.indexOf(Object.prototype.toString.call(h))>-1};function m(h){if(typeof h!="string"&&(h=String(h)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(h))throw new TypeError("Invalid character in header field name");return h.toLowerCase()}function k(h){return typeof h!="string"&&(h=String(h)),h}function A(h){var p={next:function(){var E=h.shift();return{done:E===void 0,value:E}}};return u&&(p[Symbol.iterator]=function(){return p}),p}function w(h){this.map={},h instanceof w?h.forEach(function(p,E){this.append(E,p)},this):Array.isArray(h)?h.forEach(function(p){this.append(p[0],p[1])},this):h&&Object.getOwnPropertyNames(h).forEach(function(p){this.append(p,h[p])},this)}function I(h){if(h.bodyUsed)return Promise.reject(new TypeError("Already read"));h.bodyUsed=!0}function x(h){return new Promise(function(p,E){h.onload=function(){p(h.result)},h.onerror=function(){E(h.error)}})}function g(h){var p=new FileReader,E=x(p);return p.readAsArrayBuffer(h),E}function R(h){if(h.slice)return h.slice(0);var p=new Uint8Array(h.byteLength);return p.set(new Uint8Array(h)),p.buffer}function B(){return this.bodyUsed=!1,this._initBody=function(h){var p;this._bodyInit=h,h?typeof h=="string"?this._bodyText=h:c&&Blob.prototype.isPrototypeOf(h)?this._bodyBlob=h:l&&FormData.prototype.isPrototypeOf(h)?this._bodyFormData=h:o&&URLSearchParams.prototype.isPrototypeOf(h)?this._bodyText=h.toString():_&&c&&(p=h)&&DataView.prototype.isPrototypeOf(p)?(this._bodyArrayBuffer=R(h.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):_&&(ArrayBuffer.prototype.isPrototypeOf(h)||d(h))?this._bodyArrayBuffer=R(h):this._bodyText=h=Object.prototype.toString.call(h):this._bodyText="",this.headers.get("content-type")||(typeof h=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o&&URLSearchParams.prototype.isPrototypeOf(h)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c&&(this.blob=function(){var h=I(this);if(h)return h;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?I(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var h=I(this);if(h)return h;if(this._bodyBlob)return function(p){var E=new FileReader,Z=x(E);return E.readAsText(p),Z}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(p){for(var E=new Uint8Array(p),Z=new Array(E.length),M=0;M<E.length;M++)Z[M]=String.fromCharCode(E[M]);return Z.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}w.prototype.append=function(h,p){h=m(h),p=k(p);var E=this.map[h];this.map[h]=E?E+", "+p:p},w.prototype.delete=function(h){delete this.map[m(h)]},w.prototype.get=function(h){return h=m(h),this.has(h)?this.map[h]:null},w.prototype.has=function(h){return this.map.hasOwnProperty(m(h))},w.prototype.set=function(h,p){this.map[m(h)]=k(p)},w.prototype.forEach=function(h,p){for(var E in this.map)this.map.hasOwnProperty(E)&&h.call(p,this.map[E],E,this)},w.prototype.keys=function(){var h=[];return this.forEach(function(p,E){h.push(E)}),A(h)},w.prototype.values=function(){var h=[];return this.forEach(function(p){h.push(p)}),A(h)},w.prototype.entries=function(){var h=[];return this.forEach(function(p,E){h.push([E,p])}),A(h)},u&&(w.prototype[Symbol.iterator]=w.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function P(h,p){var E,Z,M=(p=p||{}).body;if(h instanceof P){if(h.bodyUsed)throw new TypeError("Already read");this.url=h.url,this.credentials=h.credentials,p.headers||(this.headers=new w(h.headers)),this.method=h.method,this.mode=h.mode,this.signal=h.signal,M||h._bodyInit==null||(M=h._bodyInit,h.bodyUsed=!0)}else this.url=String(h);if(this.credentials=p.credentials||this.credentials||"same-origin",!p.headers&&this.headers||(this.headers=new w(p.headers)),this.method=(E=p.method||this.method||"GET",Z=E.toUpperCase(),b.indexOf(Z)>-1?Z:E),this.mode=p.mode||this.mode||null,this.signal=p.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(M)}function D(h){var p=new FormData;return h.trim().split("&").forEach(function(E){if(E){var Z=E.split("="),M=Z.shift().replace(/\+/g," "),N=Z.join("=").replace(/\+/g," ");p.append(decodeURIComponent(M),decodeURIComponent(N))}}),p}function y(h,p){p||(p={}),this.type="default",this.status=p.status===void 0?200:p.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in p?p.statusText:"OK",this.headers=new w(p.headers),this.url=p.url||"",this._initBody(h)}P.prototype.clone=function(){return new P(this,{body:this._bodyInit})},B.call(P.prototype),B.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new w(this.headers),url:this.url})},y.error=function(){var h=new y(null,{status:0,statusText:""});return h.type="error",h};var S=[301,302,303,307,308];y.redirect=function(h,p){if(S.indexOf(p)===-1)throw new RangeError("Invalid status code");return new y(null,{status:p,headers:{location:h}})},s.DOMException=a.DOMException;try{new s.DOMException}catch{s.DOMException=function(p,E){this.message=p,this.name=E;var Z=Error(p);this.stack=Z.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function V(h,p){return new Promise(function(E,Z){var M=new P(h,p);if(M.signal&&M.signal.aborted)return Z(new s.DOMException("Aborted","AbortError"));var N=new XMLHttpRequest;function dt(){N.abort()}N.onload=function(){var kt,lt,zt={status:N.status,statusText:N.statusText,headers:(kt=N.getAllResponseHeaders()||"",lt=new w,kt.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(Nt){var mt=Nt.split(":"),ht=mt.shift().trim();if(ht){var pe=mt.join(":").trim();lt.append(ht,pe)}}),lt)};zt.url="responseURL"in N?N.responseURL:zt.headers.get("X-Request-URL");var fe="response"in N?N.response:N.responseText;E(new y(fe,zt))},N.onerror=function(){Z(new TypeError("Network request failed"))},N.ontimeout=function(){Z(new TypeError("Network request failed"))},N.onabort=function(){Z(new s.DOMException("Aborted","AbortError"))},N.open(M.method,M.url,!0),M.credentials==="include"?N.withCredentials=!0:M.credentials==="omit"&&(N.withCredentials=!1),"responseType"in N&&c&&(N.responseType="blob"),M.headers.forEach(function(kt,lt){N.setRequestHeader(lt,kt)}),M.signal&&(M.signal.addEventListener("abort",dt),N.onreadystatechange=function(){N.readyState===4&&M.signal.removeEventListener("abort",dt)}),N.send(M._bodyInit===void 0?null:M._bodyInit)})}V.polyfill=!0,a.fetch||(a.fetch=V,a.Headers=w,a.Request=P,a.Response=y),s.Headers=w,s.Request=P,s.Response=y,s.fetch=V,Object.defineProperty(s,"__esModule",{value:!0})})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;(n=i.fetch).default=i.fetch,n.fetch=i.fetch,n.Headers=i.Headers,n.Request=i.Request,n.Response=i.Response,e.exports=n})(ar,ar.exports);sl(ar.exports);T.rustEnum([T.struct([],"uninitialized"),T.struct([T.option(T.publicKey(),"authorityAddress")],"buffer"),T.struct([T.publicKey("programdataAddress")],"program"),T.struct([T.u64("slot"),T.option(T.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,T.u32());const Ll=T.struct([T.publicKey("authority"),T.vecU8("data")]);function Sn(e,n){var t,r;let i={};const a=e.args?e.args.length:0;if(n.length>a){if(n.length!==a+1)throw new Error(`provided too many arguments ${n} to instruction ${e?.name} expecting: ${(r=(t=e.args)===null||t===void 0?void 0:t.map(s=>s.name))!==null&&r!==void 0?r:[]}`);i=n.pop()}return[n,i]}class ce{static build(n,t,r){if(n.name==="_inner")throw new pn("the _inner name is reserved");const i=(...a)=>{const[s,o]=Sn(n,[...a]);_r(n.accounts,o.accounts);const u=i.accounts(o.accounts);return o.remainingAccounts!==void 0&&u.push(...o.remainingAccounts),yr("debug-logs")&&console.log("Outgoing account metas:",u),new Ya({keys:u,programId:r,data:t(n.name,$c(n,...s))})};return i.accounts=a=>ce.accountsArray(a,n.accounts,n.name),i}static accountsArray(n,t,r){return n?t.map(i=>{if(("accounts"in i?i.accounts:void 0)!==void 0){const a=n[i.name];return ce.accountsArray(a,i.accounts,r).flat()}{const a=i;let s;try{s=St(n[i.name])}catch{throw new Error(`Wrong input type for account "${i.name}" in the instruction accounts object${r!==void 0?' for instruction "'+r+'"':""}. Expected PublicKey or string.`)}return{pubkey:s,isWritable:a.isMut,isSigner:a.isSigner}}}).flat():[]}}class za{static build(n,t,r,i){return async(...a)=>{var s;const o=t(...a),[,u]=Sn(n,[...a]);if(i.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await i.sendAndConfirm(o,(s=u.signers)!==null&&s!==void 0?s:[],u.options)}catch(c){throw ka(c,r)}}}}class Na{static build(n,t){return(...r)=>{var i,a,s;const[,o]=Sn(n,[...r]),u=new Ja;if(o.preInstructions&&o.instructions)throw new Error("instructions is deprecated, use preInstructions");return(i=o.preInstructions)===null||i===void 0||i.forEach(c=>u.add(c)),(a=o.instructions)===null||a===void 0||a.forEach(c=>u.add(c)),u.add(t(...r)),(s=o.postInstructions)===null||s===void 0||s.forEach(c=>u.add(c)),u}}}class Ol{constructor(n,t,r=fn(),i=new Ar(n)){this.provider=r,this.coder=i,this._idl=n,this._programId=t,this._address=Hn(t),this._sub=null;const[a,s,o]=(()=>{var u;let c={},l={},_={};return(u=n.state)===null||u===void 0||u.methods.forEach(f=>{const d=ce.build(f,(w,I)=>i.instruction.encodeState(w,I),t);d.accounts=w=>function(x,g,R,B){if(R.name==="new"){const[b]=Ma([],x);if(g.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return[{pubkey:g.wallet.publicKey,isWritable:!1,isSigner:!0},{pubkey:Hn(x),isWritable:!0,isSigner:!1},{pubkey:b,isWritable:!1,isSigner:!1},{pubkey:sr.programId,isWritable:!1,isSigner:!1},{pubkey:x,isWritable:!1,isSigner:!1}]}return _r(R.accounts,B),[{pubkey:Hn(x),isWritable:!0,isSigner:!1}]}(t,r,f,w).concat(ce.accountsArray(w,f.accounts,f.name));const m=Na.build(f,d),k=za.build(f,m,Aa(n),r),A=q(f.name);c[A]=d,l[A]=m,_[A]=k}),[c,l,_]})();this.instruction=a,this.transaction=s,this.rpc=o}get programId(){return this._programId}async fetch(){const n=this.address(),t=await this.provider.connection.getAccountInfo(n);if(t===null)throw new Error(`Account does not exist ${n.toString()}`);const r=this._idl.state;if(!r)throw new Error("State is not specified in IDL.");if((await Ia(r.struct.name)).compare(t.data.slice(0,8)))throw new Error("Invalid account discriminator");return this.coder.state.decode(t.data)}address(){return this._address}subscribe(n){if(this._sub!==null)return this._sub.ee;const t=new zi,r=this.provider.connection.onAccountChange(this.address(),i=>{const a=this.coder.state.decode(i.data);t.emit("change",a)},n);return this._sub={ee:t,listener:r},t}unsubscribe(){this._sub!==null&&this.provider.connection.removeAccountChangeListener(this._sub.listener).then(async()=>{this._sub=null}).catch(console.error)}}function Hn(e){let[n]=Ma([],e);return kl(n,"unversioned",e)}class Cl{constructor(n,t,r,i,a){this._idlAccount=t,this._programId=r,this._provider=i??fn(),this._coder=a??new Ar(n),this._size=this._coder.accounts.size(t)}get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}async fetchNullable(n,t){const r=await this.getAccountInfo(n,t);return r===null?null:this._coder.accounts.decode(this._idlAccount.name,r.data)}async fetch(n,t){const r=await this.fetchNullable(n,t);if(r===null)throw new Error(`Account does not exist ${n.toString()}`);return r}async fetchMultiple(n,t){return(await Kc(this._provider.connection,n.map(r=>St(r)),t)).map(r=>r==null?null:this._coder.accounts.decode(this._idlAccount.name,r?.account.data))}async all(n){return(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[{memcmp:this.coder.accounts.memcmp(this._idlAccount.name,n instanceof Y?n:void 0)},...Array.isArray(n)?n:[]]})).map(({pubkey:t,account:r})=>({publicKey:t,account:this._coder.accounts.decode(this._idlAccount.name,r.data)}))}subscribe(n,t){const r=xe.get(n.toString());if(r)return r.ee;const i=new zi;n=St(n);const a=this._provider.connection.onAccountChange(n,s=>{const o=this._coder.accounts.decode(this._idlAccount.name,s.data);i.emit("change",o)},t);return xe.set(n.toString(),{ee:i,listener:a}),i}async unsubscribe(n){let t=xe.get(n.toString());t?xe&&await this._provider.connection.removeAccountChangeListener(t.listener).then(()=>{xe.delete(n.toString())}).catch(console.error):console.warn("Address is not subscribed")}async createInstruction(n,t){const r=this.size;if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return sr.createAccount({fromPubkey:this._provider.wallet.publicKey,newAccountPubkey:n.publicKey,space:t??r,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(t??r),programId:this._programId})}async associated(...n){const t=await this.associatedAddress(...n);return await this.fetch(t)}async associatedAddress(...n){return await Rl(this._programId,...n)}async getAccountInfo(n,t){return await this._provider.connection.getAccountInfo(St(n),t)}}const xe=new Map,Ml=13,zl=14;class Nl{constructor(n,t,r){this._programId=n,this._provider=t,this._eventParser=new Ua(n,r),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(n,t){var r;let i=this._listenerIdCount;return this._listenerIdCount+=1,n in this._eventCallbacks||this._eventListeners.set(n,[]),this._eventListeners.set(n,((r=this._eventListeners.get(n))!==null&&r!==void 0?r:[]).concat(i)),this._eventCallbacks.set(i,[n,t]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(a,s)=>{if(!a.err)for(const o of this._eventParser.parseLogs(a.logs)){const u=this._eventListeners.get(o.name);u&&u.forEach(c=>{const l=this._eventCallbacks.get(c);if(l){const[,_]=l;_(o.data,s.slot,a.signature)}})}})),i}async removeEventListener(n){const t=this._eventCallbacks.get(n);if(!t)throw new Error(`Event listener ${n} doesn't exist!`);const[r]=t;let i=this._eventListeners.get(r);if(!i)throw new Error(`Event listeners don't exist for ${r}!`);this._eventCallbacks.delete(n),i=i.filter(a=>a!==n),i.length===0&&this._eventListeners.delete(r),this._eventCallbacks.size==0&&(jn.ok(this._eventListeners.size===0),this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0))}}class Ua{constructor(n,t){this.coder=t,this.programId=n}*parseLogs(n){const t=new Bl(n),r=new Ul;let i=t.next();for(;i!==null;){let[a,s,o]=this.handleLog(r,i);a&&(yield a),s&&r.push(s),o&&r.pop(),i=t.next()}}handleLog(n,t){return n.stack.length>0&&n.program()===this.programId.toString()?this.handleProgramLog(t):[null,...this.handleSystemLog(t)]}handleProgramLog(n){if(n.startsWith("Program log: ")||n.startsWith("Program data: ")){const t=n.startsWith("Program log: ")?n.slice(Ml):n.slice(zl);return[this.coder.events.decode(t),null,!1]}return[null,...this.handleSystemLog(n)]}handleSystemLog(n){const t=n.split(":")[0];return t.match(/^Program (.*) success/g)!==null?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}}class Ul{constructor(){this.stack=[]}program(){return jn.ok(this.stack.length>0),this.stack[this.stack.length-1]}push(n){this.stack.push(n)}pop(){jn.ok(this.stack.length>0),this.stack.pop()}}class Bl{constructor(n){this.logs=n}next(){if(this.logs.length===0)return null;let n=this.logs[0];return this.logs=this.logs.slice(1),n}}new O("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");function Fl(){return new xl($l)}const $l={version:"0.1.0",name:"spl_token",instructions:[{name:"initializeMint",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]},{name:"initializeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMultisig",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"transfer",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"approve",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"revoke",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"setAuthority",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"authorityType",type:"u8"},{name:"newAuthority",type:{coption:"publicKey"}}]},{name:"mintTo",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"burn",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"closeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1}],args:[]},{name:"freezeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"thawAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"transferChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"approveChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"mintToChecked",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"burnChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"initializeAccount2",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"syncNative",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[]},{name:"initializeAccount3",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"initializeMultisig2",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"initializeMint2",accounts:[{name:"mint",isMut:!0,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}],accounts:[{name:"mint",type:{kind:"struct",fields:[{name:"mintAuthority",type:{coption:"publicKey"}},{name:"supply",type:"u64"},{name:"decimals",type:"u8"},{name:"isInitialized",type:"bool"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}},{name:"token",type:{kind:"struct",fields:[{name:"mint",type:"publicKey"},{name:"authority",type:"publicKey"},{name:"amount",type:"u64"},{name:"delegate",type:{coption:"publicKey"}},{name:"state",type:"u8"},{name:"isNative",type:{coption:"u64"}},{name:"delegatedAmount",type:"u64"},{name:"closeAuthority",type:{coption:"publicKey"}}]}}]};class He{constructor(n,t,r,i,a,s){this._args=n,this._accounts=t,this._provider=r,this._programId=i,this._idlIx=a,this._accountStore=new Zl(r,s)}async resolve(){for(let n=0;n<this._idlIx.accounts.length;n+=1){const t=this._idlIx.accounts[n],r=q(t.name);if(!t.isSigner||this._accounts[r])Reflect.has(He.CONST_ACCOUNTS,r)&&!this._accounts[r]&&(this._accounts[r]=He.CONST_ACCOUNTS[r]);else{if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this._accounts[r]=this._provider.wallet.publicKey}}for(let n=0;n<this._idlIx.accounts.length;n+=1){const t=this._idlIx.accounts[n],r=q(t.name);t.pda&&t.pda.seeds.length>0&&!this._accounts[r]&&await this.autoPopulatePda(t)}}async autoPopulatePda(n){if(!n.pda||!n.pda.seeds)throw new Error("Must have seeds");const t=await Promise.all(n.pda.seeds.map(a=>this.toBuffer(a))),r=await this.parseProgramId(n),[i]=await O.findProgramAddress(t,r);this._accounts[q(n.name)]=i}async parseProgramId(n){var t;if(!(!((t=n.pda)===null||t===void 0)&&t.programId))return this._programId;switch(n.pda.programId.kind){case"const":return new O(this.toBufferConst(n.pda.programId.value));case"arg":return this.argValue(n.pda.programId);case"account":return await this.accountValue(n.pda.programId);default:throw new Error(`Unexpected program seed kind: ${n.pda.programId.kind}`)}}async toBuffer(n){switch(n.kind){case"const":return this.toBufferConst(n);case"arg":return await this.toBufferArg(n);case"account":return await this.toBufferAccount(n);default:throw new Error(`Unexpected seed kind: ${n.kind}`)}}toBufferConst(n){return this.toBufferValue(n.type,n.value)}async toBufferArg(n){const t=this.argValue(n);return this.toBufferValue(n.type,t)}argValue(n){const t=q(n.path.split(".")[0]),r=this._idlIx.args.findIndex(i=>i.name===t);if(r===-1)throw new Error(`Unable to find argument for seed: ${t}`);return this._args[r]}async toBufferAccount(n){const t=await this.accountValue(n);return this.toBufferValue(n.type,t)}async accountValue(n){const t=n.path.split("."),r=t[0],i=this._accounts[q(r)];if(t.length===1)return i;const a=await this._accountStore.fetchAccount(n.account,i);return this.parseAccountValue(a,t.slice(1))}parseAccountValue(n,t){let r;for(;t.length>0;)r=n[q(t[0])],t=t.slice(1);return r}toBufferValue(n,t){switch(n){case"u8":return Y.from([t]);case"u16":let r=Y.alloc(2);return r.writeUInt16LE(t),r;case"u32":let i=Y.alloc(4);return i.writeUInt32LE(t),i;case"u64":let a=Y.alloc(8);return a.writeBigUInt64LE(BigInt(t)),a;case"string":return Y.from(Bc(t));case"publicKey":return t.toBuffer();default:if(n.array)return Y.from(t);throw new Error(`Unexpected seed type: ${n}`)}}}He.CONST_ACCOUNTS={associatedTokenProgram:Dl,rent:Xa,systemProgram:sr.programId,tokenProgram:Pl};class Zl{constructor(n,t){this._provider=n,this._accounts=t,this._cache=new Map}async fetchAccount(n,t){const r=t.toString();if(!this._cache.has(r))if(n==="TokenAccount"){const i=await this._provider.connection.getAccountInfo(t);if(i===null)throw new Error(`invalid account info for ${r}`);const a=Fl().accounts.decode("token",i.data);this._cache.set(r,a)}else{const i=this._accounts[q(n)].fetch(t);this._cache.set(r,i)}return this._cache.get(r)}}class Hl{static build(n,t,r,i,a,s,o,u,c){return(...l)=>new Kl(l,i,a,s,o,u,n,t,r,c)}}class Kl{constructor(n,t,r,i,a,s,o,u,c,l){this._args=n,this._ixFn=t,this._txFn=r,this._rpcFn=i,this._simulateFn=a,this._viewFn=s,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._autoResolveAccounts=!0,this._accountsResolver=new He(n,this._accounts,o,u,c,l)}async pubkeys(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._accounts}accounts(n){return this._autoResolveAccounts=!0,Object.assign(this._accounts,n),this}accountsStrict(n){return this._autoResolveAccounts=!1,Object.assign(this._accounts,n),this}signers(n){return this._signers=this._signers.concat(n),this}remainingAccounts(n){return this._remainingAccounts=this._remainingAccounts.concat(n),this}preInstructions(n){return this._preInstructions=this._preInstructions.concat(n),this}postInstructions(n){return this._postInstructions=this._postInstructions.concat(n),this}async rpc(n){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:n})}async view(n){if(this._autoResolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:n})}async simulate(n){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:n})}async instruction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async transaction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class Pt{constructor(n,t,r,i){t=St(t),r||(r=fn()),this._idl=n,this._provider=r,this._programId=t,this._coder=i??new Ar(n),this._events=new Nl(this._programId,r,this._coder);const[a,s,o,u,c,l,_,f]=(class{static build(d,m,k,A){const w={},I={},x={},g={},R={},B={},b=Aa(d),P=d.accounts?(class{static build(y,S,V,h){var p;const E={};return(p=y.accounts)===null||p===void 0||p.forEach(Z=>{const M=q(Z.name);E[M]=new Cl(y,Z,V,h,S)}),E}}).build(d,m,k,A):{},D=(class{static build(y,S,V,h){if(y.state!==void 0)return new Ol(y,V,h,S)}}).build(d,m,k,A);return d.instructions.forEach(y=>{const S=ce.build(y,(N,dt)=>m.instruction.encode(N,dt),k),V=Na.build(y,S),h=za.build(y,V,b,A),p=(class{static build(N,dt,kt,lt,zt,fe,Nt){return async(...mt)=>{var ht;const pe=dt(...mt),[,_e]=Sn(N,[...mt]);let Gt;if(lt.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{Gt=await lt.simulate(pe,_e.signers,(ht=_e.options)===null||ht===void 0?void 0:ht.commitment)}catch(we){throw ka(we,kt)}if(Gt===void 0)throw new Error("Unable to simulate transaction");const ge=Gt.logs;if(!ge)throw new Error("Simulated logs not found");const me=[];if(Nt.events){let we=new Ua(fe,zt);for(const Ba of we.parseLogs(ge))me.push(Ba)}return{events:me,raw:ge}}}}).build(y,V,b,A,m,k,d),E=(class{static build(N,dt,kt,lt){const zt=dt.accounts.find(Nt=>Nt.isMut),fe=!!dt.returns;if(!zt&&fe)return async(...Nt)=>{var mt,ht;let pe=await kt(...Nt);const _e=`Program return: ${N} `;let Gt=pe.raw.find(we=>we.startsWith(_e));if(!Gt)throw new Error("View expected return log");let ge=Fc(Gt.slice(_e.length)),me=dt.returns;if(!me)throw new Error("View expected return type");return Q.fieldLayout({type:me},Array.from([...(mt=lt.accounts)!==null&&mt!==void 0?mt:[],...(ht=lt.types)!==null&&ht!==void 0?ht:[]])).decode(ge)}}}).build(k,y,p,d),Z=Hl.build(A,k,y,S,V,h,p,E,P),M=q(y.name);I[M]=S,x[M]=V,w[M]=h,g[M]=p,R[M]=Z,E&&(B[M]=E)}),[w,I,x,P,g,R,D,B]}}).build(n,this._coder,t,r);this.rpc=a,this.instruction=s,this.transaction=o,this.account=u,this.simulate=c,this.methods=l,this.state=_,this.views=f}get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}static async at(n,t){const r=St(n),i=await Pt.fetchIdl(r,t);if(!i)throw new Error(`IDL not found for program: ${n.toString()}`);return new Pt(i,r,t)}static async fetchIdl(n,t){t=t??fn();const r=St(n),i=await async function(c){const l=(await O.findProgramAddress([],c))[0];return await O.createWithSeed(l,"anchor:idl",c)}(r),a=await t.connection.getAccountInfo(i);if(!a)return null;let s=(o=a.data.slice(8),Ll.decode(o));var o;const u=Nc(s.data);return JSON.parse(Uc(u))}addEventListener(n,t){return this._events.addEventListener(n,t)}async removeEventListener(n){return await this._events.removeEventListener(n)}}new O("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new O("11111111111111111111111111111111");const Vl=async e=>await(await mn(e)).account.game.all(),jl=async e=>await(await mn(e)).account.planet.all([]),mn=async e=>new Pt(F.SAGE_IDL,new O(wn.SAGE_PROGRAM_ID),e),rt=class rt{ready;program;playerProfileProgram;profileFactionProgram;cargoProgram;connection;provider;funder;gameId;gameState;cargoStatsDefinition;cargoStatsDefinitionSeqId;craftingDomain;mints;game;planetLookup;constructor(n,t){this.connection=t,this.provider=new nr(t,n,nr.defaultOptions()),this.program=new Pt(F.SAGE_IDL,new O(rt.SAGE_PROGRAM_ID),this.provider),this.cargoProgram=new Pt(Tr.CARGO_IDL,new O(rt.CARGO_PROGRAM_ID),this.provider),this.playerProfileProgram=new Pt(Qa.PLAYER_PROFILE_IDL,new O(rt.PLAYER_PROFILE_PROGRAM_ID),this.provider),this.profileFactionProgram=new Pt(Rr.PROFILE_FACTION_IDL,new O(rt.PROFILE_FACTION_PROGRAM_ID),this.provider),this.funder=or(yn()),this.ready=Promise.all([Vl(this.provider),jl(this.provider)]).then(r=>{const[i]=r[0],a=r[1];return this.gameId=i.publicKey,this.gameState=i.account.gameState,this.cargoStatsDefinition=i.account.cargo.statsDefinition,this.cargoStatsDefinitionSeqId=1,this.craftingDomain=i.account.crafting.domain,this.mints=i.account.mints,this.planetLookup=a.reduce((s,o)=>{const u=o.publicKey,c=o.account;if(c.planetType===F.PlanetType.AsteroidBelt){const l=c.sector.toString();s[l]=u}return s},{}),Promise.resolve("ready")})}async getPlanetAccount(n){const t=await mn(this.provider),[r]=await t.account.planet.all([{memcmp:{offset:9,bytes:oo.encode(Y.from(n))}}]);return r}async getPlayerProfileAddress(n){const[t]=await this.connection.getProgramAccounts(new O(rt.PLAYER_PROFILE_PROGRAM_ID),{filters:[{memcmp:{offset:30,bytes:n.toBase58()}}]});return t.pubkey}getCargoTypeAddress(n){if(!this.cargoStatsDefinition||!this.cargoStatsDefinitionSeqId)throw"this.cargoStatsDefinition not set (or missing SeqId)";const[t]=Tr.CargoType.findAddress(this.cargoProgram,this.cargoStatsDefinition,n,this.cargoStatsDefinitionSeqId);return t}getFleetAddress(n,t){if(!this.gameId)throw"this.gameId not set";const r=W.stringToByteArray(t,32),[i]=F.Fleet.findAddress(this.program,this.gameId,n,r);return i}getMineItemAddress(n){if(!this.gameId)throw"this.gameId not set";const[t]=F.MineItem.findAddress(this.program,this.gameId,n);return t}async getPlanetAddress(n){if(!this.planetLookup)throw"this.planetLookup not set";return this.planetLookup[n.toString()]}getResrouceAddress(n,t){const[r]=F.Resource.findAddress(this.program,n,t);return r}getResourceMintAddress(n){return rt.SAGE_RESOURCES_MINTS[n]}getSectorAddress(n){if(!this.gameId)throw"this.gameId not set";const[t]=F.Sector.findAddress(this.program,this.gameId,n);return t}getStarbaseAddress(n){if(!this.gameId)throw"this.gameId not set";const[t]=F.Starbase.findAddress(this.program,this.gameId,n);return t}getStarbasePlayerAddress(n,t,r){if(!this.gameId)throw"this.gameId not set";const[i]=F.StarbasePlayer.findAddress(this.program,n,t,r);return i}getSagePlayerProfileAddress(n){if(!this.gameId)throw"this.gameId not set";const[t]=F.SagePlayerProfile.findAddress(this.program,n,this.gameId);return t}getProfileFactionAddress(n){const[t]=Rr.ProfileFactionAccount.findAddress(this.profileFactionProgram,n);return t}async loadPlayerProfileFleets(n){if(!this.gameId)throw"this.gameId not set";return await(await mn(this.provider)).account.fleet.all([{memcmp:{offset:41,bytes:n.toBase58()}}])}async loadGame(){if(!this.gameId)throw"this.gameId not set";return this.game=await W.readFromRPCOrError(this.connection,this.program,this.gameId,F.Game,"confirmed"),this.game}async loadGameState(){if(!this.gameState)throw"this.gameState not set";return await W.readFromRPCOrError(this.connection,this.program,this.gameState,F.GameState,"confirmed")}async getParsedTokenAccountsByOwner(n){return await W.getParsedTokenAccountsByOwner(this.connection,n)}async buildAndSignTransaction(n){return await W.buildAndSignTransaction(n,this.funder,{connection:this.connection})}async sendTransaction(n){return await W.sendTransaction(n,this.connection)}};Wt(rt,"SAGE_PROGRAM_ID","SAGEqqFewepDHH6hMDcmWy7yjHPpyKLDnRXKb3Ki8e6"),Wt(rt,"CARGO_PROGRAM_ID","Cargo8a1e6NkGyrjy4BQEW4ASGKs9KSyDyUrXMfpJoiH"),Wt(rt,"PLAYER_PROFILE_PROGRAM_ID","pprofELXjL5Kck7Jn5hCpwAL82DpTkSYBENzahVtbc9"),Wt(rt,"PROFILE_FACTION_PROGRAM_ID","pFACSRuobDmvfMKq1bAzwj27t6d2GJhSCHb1VcfnRmq"),Wt(rt,"SAGE_RESOURCES_MINTS",{arco:new O("ARCoQ9dndpg6wE2rRexzfwgJR3NoWWhpcww3xQcQLukg"),biomass:new O("MASS9GqtJz6ABisAxcUn3FeR4phMqH1XfG6LPKJePog"),carbon:new O("CARBWKWvxEuMcq3MqCxYfi7UoFVpL9c4rsQS99tw6i4X"),diamond:new O("DMNDKqygEN3WXKVrAD4ofkYBc4CKNRhFUbXP4VK7a944"),hydrogen:new O("HYDR4EPHJcDPcaLYUcNCtrXUdt1PnaN4MvE655pevBYp"),iron_ore:new O("FeorejFjRRAfusN9Fg3WjEZ1dRCf74o6xwT5vDt3R34J"),lumanite:new O("LUMACqD5LaKjs1AeuJYToybasTXoYQ7YkxJEc4jowNj"),rochinol:new O("RCH1Zhg4zcSSQK8rw2s6rDMVsgBEWa4kiv1oLFndrN5")});let wn=rt;var Kn={},Di;function ql(){return Di||(Di=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.associatedAddress=e.ASSOCIATED_PROGRAM_ID=e.TOKEN_PROGRAM_ID=void 0;const n=to;e.TOKEN_PROGRAM_ID=new n.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),e.ASSOCIATED_PROGRAM_ID=new n.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");async function t({mint:r,owner:i}){return(await n.PublicKey.findProgramAddress([i.toBuffer(),e.TOKEN_PROGRAM_ID.toBuffer(),r.toBuffer()],e.ASSOCIATED_PROGRAM_ID))[0]}e.associatedAddress=t}(Kn)),Kn}var Li=ql();class Gl{constructor(n){this._gameHandler=n}async ixDepositToStarBase(n,t){const r=this._gameHandler.program,i=this._gameHandler.cargoProgram,a=this._gameHandler.getSagePlayerProfileAddress(n),s=this._gameHandler.getStarbaseAddress(t),o=await W.readFromRPCOrError(this._gameHandler.provider.connection,this._gameHandler.program,s,F.Starbase,"confirmed"),u=this._gameHandler.getStarbasePlayerAddress(s,a,o.data.seqId),c=this._gameHandler.getProfileFactionAddress(n),l=Oi().useSquads?or(yn()):Mi(Ni()),_=await F.getCargoPodsByAuthority(Ce().connection,this._gameHandler.cargoProgram,u);console.log(_);const f=new O("CqxXqHHVYDoH4kedRhkLLC5kjKCFnUgeEqcXEWGQhs2S"),d=new O("ammoK8AkX2wnebQb35cDAZtTkvsXQbi82cGeTnUvvfK"),m=this._gameHandler.cargoStatsDefinition,k=this.findATA(d,l.publicKey())[0],A=this.findATA(d,f)[0],w=this._gameHandler.gameId,I=this._gameHandler.gameState,x=[];return x.push(F.StarbasePlayer.depositCargoToGame(r,i,u,l,n,c,s,f,d,m,k,A,w,I,{amount:new ie(1),keyIndex:0})),console.log(x),x}async getMineItemAccount(n){return W.readFromRPCOrError(this._gameHandler.provider.connection,this._gameHandler.program,n,F.MineItem,"confirmed")}async getPlanetAccount(n){return W.readFromRPCOrError(this._gameHandler.provider.connection,this._gameHandler.program,n,F.Planet,"confirmed")}async getResourceAccount(n){return W.readFromRPCOrError(this._gameHandler.provider.connection,this._gameHandler.program,n,F.Resource,"confirmed")}async getSectorAccount(n){return W.readFromRPCOrError(this._gameHandler.provider.connection,this._gameHandler.program,n,F.Sector,"confirmed")}async getStarbaseAccount(n){return W.readFromRPCOrError(this._gameHandler.provider.connection,this._gameHandler.program,n,F.Starbase,"confirmed")}findATA(n,t){return O.findProgramAddressSync([t.toBuffer(),Li.TOKEN_PROGRAM_ID.toBuffer(),n.toBuffer()],Li.ASSOCIATED_PROGRAM_ID)}}const Wl=Ui({__name:"DepositResources",setup(e){async function n(){const t=Oi().useSquads?or(yn()):Mi(Ni()),r=new wn(no().value,Ce().connection);await r.ready,await r.loadGame();const i=new Gl(r);console.log(r),console.log(i);const a=await i.ixDepositToStarBase(Ci().playerProfile?.key,[new ie(0),new ie(-39)]);await W.buildAndSignTransaction(a,t,{connection:Ce().connection})}return(t,r)=>(Bi(),Fi(eo,{label:"Deposit",onClick:n}))}}),cu=Ui({__name:"Portal",setup(e){return ro(async()=>{await Sr(),await Ut().updateStore()}),Pr(()=>yn(),async()=>{await Sr()}),Pr(()=>Ut().starbase,async()=>{await Ut().updateStore()}),(n,t)=>(Bi(),Fi(ja,{class:""},{default:be(()=>[ut(Za,{modelValue:Xt(Ut)().starbase,"onUpdate:modelValue":t[0]||(t[0]=r=>Xt(Ut)().starbase=r),"option-label":r=>Xt(W.byteArrayToString)(r.data.name),options:Xt(Ut)().starbases?.filter(r=>Xt(W.byteArrayToString)(r.data.name).includes("Central")),label:"Selected Starbase"},null,8,["modelValue","option-label","options"]),ut(kr,{align:"justify"},{default:be(()=>[ut(ye,{label:"IN"}),ut(ye,{label:"OUT"})]),_:1}),ut(kr,{align:"justify"},{default:be(()=>[ut(ye,{label:"Ships"}),ut(ye,{label:"Resources"}),ut(ye,{label:"Crew"})]),_:1}),io("div",null,[ut(Va,{flat:""},{default:be(()=>[ut(Ka,null,{default:be(()=>t[1]||(t[1]=[Dr(" PORT")])),_:1}),ut(Wl),Dr(" "+ao(Xt(Ut)().starbase),1)]),_:1})])]),_:1}))}});export{cu as default};
