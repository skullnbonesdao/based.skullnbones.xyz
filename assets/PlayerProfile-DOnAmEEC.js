import{u as b,g as Fe,s as Ke,a as K,b as ke,c as Ue,p as Tt,P as _t,d as kt,Q as It,e as Xe}from"./ToSigner-B_8uUvR1.js";import{M as At,O as ie,K as Ct,Q as $t,R as Pe,S as Oe,V as We,Y as Se,X as He,D as $,w as I,E as re,H as Re,x as T,aw as it,az as Yt,y as fe,aA as Et,v as ge,a3 as Vt,F as lt,aB as qt,aC as ut,I as te,aD as Ot,af as ce,aE as ct,aF as dt,aG as Ht,a9 as R,ai as B,aj as Y,ab as x,ac as A,ad as h,ae as f,ao as F,as as me,at as oe,ag as Ie,an as D,aH as Nt,aI as Lt,aJ as Ft,N as Ut,al as q,P as G,aK as Qt,aL as De,aM as Ae,aN as ft,aq as Ce,ah as H,aO as $e,aP as Z,aQ as N,aR as de,aS as xe,aT as Me,aU as zt,aV as Ge,aW as Bt,aX as Kt,aY as le,J as Rt}from"./index-B2IOqPJ_.js";import{g as Je,s as et,a as gt,Q as ne}from"./QToggle-weyoxj0a.js";import{c as jt,u as Zt,h as Xt,q as Wt,i as Gt,r as Jt,n as ae,m as X,Q as z,t as k,v as en,p as W,w as tn,o as mt,x as nn,y as an}from"./SquadsStore-dlgWlyls.js";import{b as rn,u as pt,a as vt,c as V,Q as se}from"./QCard-DDl5jT0S.js";import{Q as tt}from"./QSeparator--UI1X0oW.js";import{Q as Qe}from"./QInput-BUe0jLhq.js";import"./QResizeObserver-DOZ83qot.js";import"./index-DVKssMzM.js";function on(e){const t=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((r,a)=>{const o=parseFloat(r);o&&(t[a]=o)}),t}const sn=At({name:"touch-swipe",beforeMount(e,{value:t,arg:r,modifiers:a}){if(a.mouse!==!0&&ie.has.touch!==!0)return;const o=a.mouseCapture===!0?"Capture":"",n={handler:t,sensitivity:on(r),direction:Je(a),noop:Ct,mouseStart(l){et(l,n)&&$t(l)&&(Pe(n,"temp",[[document,"mousemove","move",`notPassive${o}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(l,!0))},touchStart(l){if(et(l,n)){const s=l.target;Pe(n,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","notPassiveCapture"],[s,"touchend","end","notPassiveCapture"]]),n.start(l)}},start(l,s){ie.is.firefox===!0&&Oe(e,!0);const u=We(l);n.event={x:u.left,y:u.top,time:Date.now(),mouse:s===!0,dir:!1}},move(l){if(n.event===void 0)return;if(n.event.dir!==!1){Se(l);return}const s=Date.now()-n.event.time;if(s===0)return;const u=We(l),m=u.left-n.event.x,i=Math.abs(m),d=u.top-n.event.y,p=Math.abs(d);if(n.event.mouse!==!0){if(i<n.sensitivity[1]&&p<n.sensitivity[1]){n.end(l);return}}else if(window.getSelection().toString()!==""){n.end(l);return}else if(i<n.sensitivity[2]&&p<n.sensitivity[2])return;const c=i/s,v=p/s;n.direction.vertical===!0&&i<p&&i<100&&v>n.sensitivity[0]&&(n.event.dir=d<0?"up":"down"),n.direction.horizontal===!0&&i>p&&p<100&&c>n.sensitivity[0]&&(n.event.dir=m<0?"left":"right"),n.direction.up===!0&&i<p&&d<0&&i<100&&v>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&i<p&&d>0&&i<100&&v>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&i>p&&m<0&&p<100&&c>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&i>p&&m>0&&p<100&&c>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(Se(l),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),jt(),n.styleCleanup=g=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const w=()=>{document.body.classList.remove("no-pointer-events--children")};g===!0?setTimeout(w,50):w()}),n.handler({evt:l,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:s,distance:{x:i,y:p}})):n.end(l)},end(l){n.event!==void 0&&(He(n,"temp"),ie.is.firefox===!0&&Oe(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),l!==void 0&&n.event.dir!==!1&&Se(l),n.event=void 0)}};if(e.__qtouchswipe=n,a.mouse===!0){const l=a.mouseCapture===!0||a.mousecapture===!0?"Capture":"";Pe(n,"main",[[e,"mousedown","mouseStart",`passive${l}`]])}ie.has.touch===!0&&Pe(n,"main",[[e,"touchstart","touchStart",`passive${a.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const r=e.__qtouchswipe;r!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&r.end(),r.handler=t.value),r.direction=Je(t.modifiers))},beforeUnmount(e){const t=e.__qtouchswipe;t!==void 0&&(He(t,"main"),He(t,"temp"),ie.is.firefox===!0&&Oe(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchswipe)}});function ln(){let e=Object.create(null);return{getCache:(t,r)=>e[t]===void 0?e[t]=typeof r=="function"?r():r:e[t],setCache(t,r){e[t]=r},hasCache(t){return Object.hasOwnProperty.call(e,t)},clearCache(t){t!==void 0?delete e[t]:e=Object.create(null)}}}const un={name:{required:!0},disable:Boolean},nt={setup(e,{slots:t}){return()=>T("div",{class:"q-panel scroll",role:"tabpanel"},fe(t.default))}},cn={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},dn=["update:modelValue","beforeTransition","transition"];function fn(){const{props:e,emit:t,proxy:r}=Re(),{getCache:a}=ln(),{registerTimeout:o}=rn();let n,l;const s=$(null),u={value:null};function m(P){const _=e.vertical===!0?"up":"left";Q((r.$q.lang.rtl===!0?-1:1)*(P.direction===_?1:-1))}const i=I(()=>[[sn,m,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),d=I(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),p=I(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),c=I(()=>`--q-transition-duration: ${e.transitionDuration}ms`),v=I(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),g=I(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),w=I(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);re(()=>e.modelValue,(P,_)=>{const O=C(P)===!0?J(P):-1;l!==!0&&pe(O===-1?0:O<J(_)?-1:1),u.value!==O&&(u.value=O,t("beforeTransition",P,_),o(()=>{t("transition",P,_)},e.transitionDuration))});function M(){Q(1)}function S(){Q(-1)}function E(P){t("update:modelValue",P)}function C(P){return P!=null&&P!==""}function J(P){return n.findIndex(_=>_.props.name===P&&_.props.disable!==""&&_.props.disable!==!0)}function Ee(){return n.filter(P=>P.props.disable!==""&&P.props.disable!==!0)}function pe(P){const _=P!==0&&e.animated===!0&&u.value!==-1?"q-transition--"+(P===-1?d.value:p.value):null;s.value!==_&&(s.value=_)}function Q(P,_=u.value){let O=_+P;for(;O!==-1&&O<n.length;){const y=n[O];if(y!==void 0&&y.props.disable!==""&&y.props.disable!==!0){pe(P),l=!0,t("update:modelValue",y.props.name),setTimeout(()=>{l=!1});return}O+=P}e.infinite===!0&&n.length!==0&&_!==-1&&_!==n.length&&Q(P,P===-1?n.length:-1)}function ve(){const P=J(e.modelValue);return u.value!==P&&(u.value=P),!0}function he(){const P=C(e.modelValue)===!0&&ve()&&n[u.value];return e.keepAlive===!0?[T(Et,g.value,[T(w.value===!0?a(v.value,()=>({...nt,name:v.value})):nt,{key:v.value,style:c.value},()=>P)])]:[T("div",{class:"q-panel scroll",style:c.value,key:v.value,role:"tabpanel"},[P])]}function ye(){if(n.length!==0)return e.animated===!0?[T(it,{name:s.value},he)]:he()}function Ve(P){return n=Yt(fe(P.default,[])).filter(_=>_.props!==null&&_.props.slot===void 0&&C(_.props.name)===!0),n.length}function qe(){return n}return Object.assign(r,{next:M,previous:S,goTo:E}),{panelIndex:u,panelDirectives:i,updatePanelsList:Ve,updatePanelIndex:ve,getPanelContent:ye,getEnabledPanels:Ee,getPanels:qe,isValidPanelName:C,keepAliveProps:g,needsUniqueKeepAliveWrapper:w,goToPanelByOffset:Q,goToPanel:E,nextPanel:M,previousPanel:S}}const at=ge({name:"QTabPanel",props:un,setup(e,{slots:t}){return()=>T("div",{class:"q-tab-panel",role:"tabpanel"},fe(t.default))}}),gn=ge({name:"QTabPanels",props:{...cn,...pt},emits:dn,setup(e,{slots:t}){const r=Re(),a=vt(e,r.proxy.$q),{updatePanelsList:o,getPanelContent:n,panelDirectives:l}=fn(),s=I(()=>"q-tab-panels q-panel-parent"+(a.value===!0?" q-tab-panels--dark q-dark":""));return()=>(o(t),Vt("div",{class:s.value},n(),"pan",e.swipeable,()=>l.value))}}),mn=ge({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:t,emit:r}){let a=!1,o,n,l=null,s=null,u,m;function i(){o&&o(),o=null,a=!1,l!==null&&(clearTimeout(l),l=null),s!==null&&(clearTimeout(s),s=null),n!==void 0&&n.removeEventListener("transitionend",u),u=null}function d(g,w,M){w!==void 0&&(g.style.height=`${w}px`),g.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,a=!0,o=M}function p(g,w){g.style.overflowY=null,g.style.height=null,g.style.transition=null,i(),w!==m&&r(w)}function c(g,w){let M=0;n=g,a===!0?(i(),M=g.offsetHeight===g.scrollHeight?0:void 0):(m="hide",g.style.overflowY="hidden"),d(g,M,w),l=setTimeout(()=>{l=null,g.style.height=`${g.scrollHeight}px`,u=S=>{s=null,(Object(S)!==S||S.target===g)&&p(g,"show")},g.addEventListener("transitionend",u),s=setTimeout(u,e.duration*1.1)},100)}function v(g,w){let M;n=g,a===!0?i():(m="show",g.style.overflowY="hidden",M=g.scrollHeight),d(g,M,w),l=setTimeout(()=>{l=null,g.style.height=0,u=S=>{s=null,(Object(S)!==S||S.target===g)&&p(g,"hide")},g.addEventListener("transitionend",u),s=setTimeout(u,e.duration*1.1)},100)}return lt(()=>{a===!0&&i()}),()=>T(it,{css:!1,appear:e.appear,onEnter:c,onLeave:v},t.default)}}),j=qt({}),pn=Object.keys(ut),ht=ge({name:"QExpansionItem",props:{...ut,...Zt,...pt,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Xt,"click","afterShow","afterHide"],setup(e,{slots:t,emit:r}){const{proxy:{$q:a}}=Re(),o=vt(e,a),n=$(e.modelValue!==null?e.modelValue:e.defaultOpened),l=$(null),s=Wt(),{show:u,hide:m,toggle:i}=Gt({showing:n});let d,p;const c=I(()=>`q-expansion-item q-item-type q-expansion-item--${n.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),v=I(()=>e.contentInsetLevel===void 0?null:{["padding"+(a.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),g=I(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),w=I(()=>{const y={};return pn.forEach(U=>{y[U]=e[U]}),y}),M=I(()=>g.value===!0||e.expandIconToggle!==!0),S=I(()=>e.expandedIcon!==void 0&&n.value===!0?e.expandedIcon:e.expandIcon||a.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),E=I(()=>e.disable!==!0&&(g.value===!0||e.expandIconToggle===!0)),C=I(()=>({expanded:n.value===!0,detailsId:s.value,toggle:i,show:u,hide:m})),J=I(()=>{const y=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:a.lang.label[n.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":n.value===!0?"true":"false","aria-controls":s.value,"aria-label":y}});re(()=>e.group,y=>{p!==void 0&&p(),y!==void 0&&ye()});function Ee(y){g.value!==!0&&i(y),r("click",y)}function pe(y){y.keyCode===13&&Q(y,!0)}function Q(y,U){U!==!0&&l.value!==null&&l.value.focus(),i(y),Se(y)}function ve(){r("afterShow")}function he(){r("afterHide")}function ye(){d===void 0&&(d=Jt()),n.value===!0&&(j[e.group]=d);const y=re(n,we=>{we===!0?j[e.group]=d:j[e.group]===d&&delete j[e.group]}),U=re(()=>j[e.group],(we,Mt)=>{Mt===d&&we!==void 0&&we!==d&&m()});p=()=>{y(),U(),j[e.group]===d&&delete j[e.group],p=void 0}}function Ve(){const y={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},U=[T(ce,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&n.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:S.value})];return E.value===!0&&(Object.assign(y,{tabindex:0,...J.value,onClick:Q,onKeyup:pe}),U.unshift(T("div",{ref:l,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),T(z,y,()=>U)}function qe(){let y;return t.header!==void 0?y=[].concat(t.header(C.value)):(y=[T(z,()=>[T(X,{lines:e.labelLines},()=>e.label||""),e.caption?T(X,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&y[e.switchToggleSide===!0?"push":"unshift"](T(z,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>T(ce,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&y[e.switchToggleSide===!0?"unshift":"push"](Ve()),y}function P(){const y={ref:"item",style:e.headerStyle,class:e.headerClass,dark:o.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return M.value===!0&&(y.clickable=!0,y.onClick=Ee,Object.assign(y,g.value===!0?w.value:J.value)),T(ae,y,qe)}function _(){return te(T("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:v.value,id:s.value},fe(t.default)),[[Ot,n.value]])}function O(){const y=[P(),T(mn,{duration:e.duration,onShow:ve,onHide:he},_)];return e.expandSeparator===!0&&y.push(T(tt,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:o.value}),T(tt,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:o.value})),y}return e.group!==void 0&&ye(),lt(()=>{p!==void 0&&p()}),()=>T("div",{class:c.value},[T("div",{class:"q-expansion-item__container relative-position"},O())])}}),yt=864e5,vn=36e5,ze=6e4,wt="YYYY-MM-DDTHH:mm:ss.SSSZ",hn=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,yn=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Ne={};function wn(e,t){const r="("+t.days.join("|")+")",a=e+r;if(Ne[a]!==void 0)return Ne[a];const o="("+t.daysShort.join("|")+")",n="("+t.months.join("|")+")",l="("+t.monthsShort.join("|")+")",s={};let u=0;const m=e.replace(yn,d=>{switch(u++,d){case"YY":return s.YY=u,"(-?\\d{1,2})";case"YYYY":return s.YYYY=u,"(-?\\d{1,4})";case"M":return s.M=u,"(\\d{1,2})";case"Mo":return s.M=u++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return s.M=u,"(\\d{2})";case"MMM":return s.MMM=u,l;case"MMMM":return s.MMMM=u,n;case"D":return s.D=u,"(\\d{1,2})";case"Do":return s.D=u++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return s.D=u,"(\\d{2})";case"H":return s.H=u,"(\\d{1,2})";case"HH":return s.H=u,"(\\d{2})";case"h":return s.h=u,"(\\d{1,2})";case"hh":return s.h=u,"(\\d{2})";case"m":return s.m=u,"(\\d{1,2})";case"mm":return s.m=u,"(\\d{2})";case"s":return s.s=u,"(\\d{1,2})";case"ss":return s.s=u,"(\\d{2})";case"S":return s.S=u,"(\\d{1})";case"SS":return s.S=u,"(\\d{2})";case"SSS":return s.S=u,"(\\d{3})";case"A":return s.A=u,"(AM|PM)";case"a":return s.a=u,"(am|pm)";case"aa":return s.aa=u,"(a\\.m\\.|p\\.m\\.)";case"ddd":return o;case"dddd":return r;case"Q":case"d":case"E":return"(\\d{1})";case"do":return u++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return u++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return u++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return s.Z=u,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return s.ZZ=u,"(Z|[+-]\\d{2}\\d{2})";case"X":return s.X=u,"(-?\\d+)";case"x":return s.x=u,"(-?\\d{4,})";default:return u--,d[0]==="["&&(d=d.substring(1,d.length-1)),d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),i={map:s,regex:new RegExp("^"+m)};return Ne[a]=i,i}function Pt(e,t){return e!==void 0?e:t!==void 0?t.date:Ht.date}function rt(e,t=""){const r=e>0?"-":"+",a=Math.abs(e),o=Math.floor(a/60),n=a%60;return r+k(o)+t+k(n)}function Pn(e,t,r){let a=e.getFullYear(),o=e.getMonth();const n=e.getDate();return t.year!==void 0&&(a+=r*t.year,delete t.year),t.month!==void 0&&(o+=r*t.month,delete t.month),e.setDate(1),e.setMonth(2),e.setFullYear(a),e.setMonth(o),e.setDate(Math.min(n,Ze(e))),t.date!==void 0&&(e.setDate(e.getDate()+r*t.date),delete t.date),e}function bn(e,t,r){const a=t.year!==void 0?t.year:e[`get${r}FullYear`](),o=t.month!==void 0?t.month-1:e[`get${r}Month`](),n=new Date(a,o+1,0).getDate(),l=Math.min(n,t.date!==void 0?t.date:e[`get${r}Date`]());return e[`set${r}Date`](1),e[`set${r}Month`](2),e[`set${r}FullYear`](a),e[`set${r}Month`](o),e[`set${r}Date`](l),delete t.year,delete t.month,delete t.date,e}function je(e,t,r){const a=bt(t),o=new Date(e),n=a.year!==void 0||a.month!==void 0||a.date!==void 0?Pn(o,a,r):o;for(const l in a){const s=en(l);n[`set${s}`](n[`get${s}`]()+r*a[l])}return n}function bt(e){const t={...e};return e.years!==void 0&&(t.year=e.years,delete t.years),e.months!==void 0&&(t.month=e.months,delete t.months),e.days!==void 0&&(t.date=e.days,delete t.days),e.day!==void 0&&(t.date=e.day,delete t.day),e.hour!==void 0&&(t.hours=e.hour,delete t.hour),e.minute!==void 0&&(t.minutes=e.minute,delete t.minute),e.second!==void 0&&(t.seconds=e.second,delete t.second),e.millisecond!==void 0&&(t.milliseconds=e.millisecond,delete t.millisecond),t}function St(e,t,r){const a=bt(t),o=r===!0?"UTC":"",n=new Date(e),l=a.year!==void 0||a.month!==void 0||a.date!==void 0?bn(n,a,o):n;for(const s in a){const u=s.charAt(0).toUpperCase()+s.slice(1);l[`set${o}${u}`](a[s])}return l}function Sn(e,t,r){const a=Dn(e,t,r),o=new Date(a.year,a.month===null?null:a.month-1,a.day===null?1:a.day,a.hour,a.minute,a.second,a.millisecond),n=o.getTimezoneOffset();return a.timezoneOffset===null||a.timezoneOffset===n?o:je(o,{minutes:a.timezoneOffset-n},1)}function Dn(e,t,r,a,o){const n={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(e==null||e===""||typeof e!="string")return n;t===void 0&&(t=wt);const l=Pt(r,ct.props),s=l.months,u=l.monthsShort,{regex:m,map:i}=wn(t,l),d=e.match(m);if(d===null)return n;let p="";if(i.X!==void 0||i.x!==void 0){const c=parseInt(d[i.X!==void 0?i.X:i.x],10);if(isNaN(c)===!0||c<0)return n;const v=new Date(c*(i.X!==void 0?1e3:1));n.year=v.getFullYear(),n.month=v.getMonth()+1,n.day=v.getDate(),n.hour=v.getHours(),n.minute=v.getMinutes(),n.second=v.getSeconds(),n.millisecond=v.getMilliseconds()}else{if(i.YYYY!==void 0)n.year=parseInt(d[i.YYYY],10);else if(i.YY!==void 0){const c=parseInt(d[i.YY],10);n.year=c<0?c:2e3+c}if(i.M!==void 0){if(n.month=parseInt(d[i.M],10),n.month<1||n.month>12)return n}else i.MMM!==void 0?n.month=u.indexOf(d[i.MMM])+1:i.MMMM!==void 0&&(n.month=s.indexOf(d[i.MMMM])+1);if(i.D!==void 0){if(n.day=parseInt(d[i.D],10),n.year===null||n.month===null||n.day<1)return n;const c=new Date(n.year,n.month,0).getDate();if(n.day>c)return n}i.H!==void 0?n.hour=parseInt(d[i.H],10)%24:i.h!==void 0&&(n.hour=parseInt(d[i.h],10)%12,(i.A&&d[i.A]==="PM"||i.a&&d[i.a]==="pm"||i.aa&&d[i.aa]==="p.m.")&&(n.hour+=12),n.hour=n.hour%24),i.m!==void 0&&(n.minute=parseInt(d[i.m],10)%60),i.s!==void 0&&(n.second=parseInt(d[i.s],10)%60),i.S!==void 0&&(n.millisecond=parseInt(d[i.S],10)*10**(3-d[i.S].length)),(i.Z!==void 0||i.ZZ!==void 0)&&(p=i.Z!==void 0?d[i.Z].replace(":",""):d[i.ZZ],n.timezoneOffset=(p[0]==="+"?-1:1)*(60*p.slice(1,3)+1*p.slice(3,5)))}return n.dateHash=k(n.year,6)+"/"+k(n.month)+"/"+k(n.day),n.timeHash=k(n.hour)+":"+k(n.minute)+":"+k(n.second)+p,n}function xn(e){return typeof e=="number"?!0:isNaN(Date.parse(e))===!1}function Mn(e,t){return St(new Date,e,t)}function Tn(e){const t=new Date(e).getDay();return t===0?7:t}function Te(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const r=new Date(t.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);const a=t.getTimezoneOffset()-r.getTimezoneOffset();t.setHours(t.getHours()-a);const o=(t-r)/(yt*7);return 1+Math.floor(o)}function _n(e){return e.getFullYear()*1e4+e.getMonth()*100+e.getDate()}function Le(e,t){const r=new Date(e);return t===!0?_n(r):r.getTime()}function kn(e,t,r,a={}){const o=Le(t,a.onlyDate),n=Le(r,a.onlyDate),l=Le(e,a.onlyDate);return(l>o||a.inclusiveFrom===!0&&l===o)&&(l<n||a.inclusiveTo===!0&&l===n)}function In(e,t){return je(e,t,1)}function An(e,t){return je(e,t,-1)}function L(e,t,r){const a=new Date(e),o=`set${r===!0?"UTC":""}`;switch(t){case"year":case"years":a[`${o}Month`](0);case"month":case"months":a[`${o}Date`](1);case"day":case"days":case"date":a[`${o}Hours`](0);case"hour":case"hours":a[`${o}Minutes`](0);case"minute":case"minutes":a[`${o}Seconds`](0);case"second":case"seconds":a[`${o}Milliseconds`](0)}return a}function Cn(e,t,r){const a=new Date(e),o=`set${r===!0?"UTC":""}`;switch(t){case"year":case"years":a[`${o}Month`](11);case"month":case"months":a[`${o}Date`](Ze(a));case"day":case"days":case"date":a[`${o}Hours`](23);case"hour":case"hours":a[`${o}Minutes`](59);case"minute":case"minutes":a[`${o}Seconds`](59);case"second":case"seconds":a[`${o}Milliseconds`](999)}return a}function $n(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(r=>{t=Math.max(t,new Date(r))}),t}function Yn(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(r=>{t=Math.min(t,new Date(r))}),t}function be(e,t,r){return(e.getTime()-e.getTimezoneOffset()*ze-(t.getTime()-t.getTimezoneOffset()*ze))/r}function Dt(e,t,r="days"){const a=new Date(e),o=new Date(t);switch(r){case"years":case"year":return a.getFullYear()-o.getFullYear();case"months":case"month":return(a.getFullYear()-o.getFullYear())*12+a.getMonth()-o.getMonth();case"days":case"day":case"date":return be(L(a,"day"),L(o,"day"),yt);case"hours":case"hour":return be(L(a,"hour"),L(o,"hour"),vn);case"minutes":case"minute":return be(L(a,"minute"),L(o,"minute"),ze);case"seconds":case"second":return be(L(a,"second"),L(o,"second"),1e3)}}function _e(e){return Dt(e,L(e,"year"),"days")+1}function En(e){return dt(e)===!0?"date":typeof e=="number"?"number":"string"}function Vn(e,t,r){const a=new Date(e);if(t){const o=new Date(t);if(a<o)return o}if(r){const o=new Date(r);if(a>o)return o}return a}function qn(e,t,r){const a=new Date(e),o=new Date(t);if(r===void 0)return a.getTime()===o.getTime();switch(r){case"second":case"seconds":if(a.getSeconds()!==o.getSeconds())return!1;case"minute":case"minutes":if(a.getMinutes()!==o.getMinutes())return!1;case"hour":case"hours":if(a.getHours()!==o.getHours())return!1;case"day":case"days":case"date":if(a.getDate()!==o.getDate())return!1;case"month":case"months":if(a.getMonth()!==o.getMonth())return!1;case"year":case"years":if(a.getFullYear()!==o.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${r}`)}return!0}function Ze(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function ee(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const ot={YY(e,t,r){const a=this.YYYY(e,t,r)%100;return a>=0?k(a):"-"+k(Math.abs(a))},YYYY(e,t,r){return r??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return ee(e.getMonth()+1)},MM(e){return k(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return ee(this.Q(e))},D(e){return e.getDate()},Do(e){return ee(e.getDate())},DD(e){return k(e.getDate())},DDD(e){return _e(e)},DDDo(e){return ee(_e(e))},DDDD(e){return k(_e(e),3)},d(e){return e.getDay()},do(e){return ee(e.getDay())},dd(e,t){return t.days[e.getDay()].slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Te(e)},wo(e){return ee(Te(e))},ww(e){return k(Te(e))},H(e){return e.getHours()},HH(e){return k(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return k(this.h(e))},m(e){return e.getMinutes()},mm(e){return k(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return k(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return k(Math.floor(e.getMilliseconds()/10))},SSS(e){return k(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,t,r,a){const o=a??e.getTimezoneOffset();return rt(o,":")},ZZ(e,t,r,a){const o=a??e.getTimezoneOffset();return rt(o)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function On(e,t,r,a,o){if(e!==0&&!e||e===1/0||e===-1/0)return;const n=new Date(e);if(isNaN(n))return;t===void 0&&(t=wt);const l=Pt(r,ct.props);return t.replace(hn,(s,u)=>s in ot?ot[s](n,l,a,o):u===void 0?s:u.split("\\]").join("]"))}function Hn(e){return dt(e)===!0?new Date(e.getTime()):e}const Nn={isValid:xn,extractDate:Sn,buildDate:Mn,getDayOfWeek:Tn,getWeekOfYear:Te,isBetweenDates:kn,addToDate:In,subtractFromDate:An,adjustDate:St,startOfDate:L,endOfDate:Cn,getMaxDate:$n,getMinDate:Yn,getDateDiff:Dt,getDayOfYear:_e,inferDateFormat:En,getDateBetween:Vn,isSameDate:qn,daysInMonth:Ze,formatDate:On,clone:Hn},Ln=R({__name:"TimestampFormatter",props:["unixTimestamp"],setup(e){return(t,r)=>B(Y(Nn).formatDate(e.unixTimestamp*1e3,"YYYY-MM-DD HH:mm"))}}),Fn={class:"col"},Un={key:1},ue=R({__name:"AccountExpansionItem",props:["label","account"],setup(e){return(t,r)=>(x(),A(ht,{caption:e.account?.key.toString()??"not-found",label:e.label,icon:"perm_identity"},{default:h(()=>[f(se,null,{default:h(()=>[e.account?.data?(x(),A(V,{key:0},{default:h(()=>[(x(!0),F(oe,null,me(Object.entries(e.account.data),a=>(x(),F("div",{key:a[0],class:"row"},[D("div",Fn,B(a[0]),1),a[0]=="createdAt"?(x(),A(Ln,{key:0,"unix-timestamp":a[1]},null,8,["unix-timestamp"])):(x(),F("div",Un,B(a[1]),1))]))),128))]),_:1})):Ie("",!0)]),_:1})]),_:1},8,["caption","label"]))}}),Qn=R({__name:"PlayerProfileOverview",setup(e){return(t,r)=>(x(),A(se,{bordered:"",flat:""},{default:h(()=>[f(V,{class:"row items-center q-gutter-md"},{default:h(()=>[f(ce,{name:"visibility",size:"md"}),r[0]||(r[0]=D("div",{class:"text-h6"},"View Accounts",-1))]),_:1}),f(V,{class:"row"},{default:h(()=>[f(gt,{bordered:"",class:"rounded-borders full-width",separator:""},{default:h(()=>[f(ht,{caption:Y(b)().wallet?.toString()??"none","hide-expand-icon":"",icon:"perm_identity",label:"Wallet"},null,8,["caption"]),f(ue,{account:Y(b)().playerProfile,label:"Player Profile"},null,8,["account"]),f(ue,{account:Y(b)().nameProfile,label:"Name Profile"},null,8,["account"]),f(ue,{account:Y(b)().factionProfile,label:"Faction Profile"},null,8,["account"]),f(ue,{account:Y(b)().sageProfile,label:"Faction Profile"},null,8,["account"]),(x(!0),F(oe,null,me(Y(b)().points,(a,o)=>(x(),A(ue,{key:o,account:a.points,label:Y(Fe)(a.category)+" Points"},null,8,["account","label"]))),128))]),_:1})]),_:1})]),_:1}))}}),st=ge({name:"QCardActions",props:{...Nt,vertical:Boolean},setup(e,{slots:t}){const r=Lt(e),a=I(()=>`q-card__actions ${r.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>T("div",{class:a.value},fe(t.default))}});function zn(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let m=0;m<t.length;m++)t[m]=255;for(let m=0;m<e.length;m++){const i=e.charAt(m),d=i.charCodeAt(0);if(t[d]!==255)throw new TypeError(i+" is ambiguous");t[d]=m}const r=e.length,a=e.charAt(0),o=Math.log(r)/Math.log(256),n=Math.log(256)/Math.log(r);function l(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";let i=0,d=0,p=0;const c=m.length;for(;p!==c&&m[p]===0;)p++,i++;const v=(c-p)*n+1>>>0,g=new Uint8Array(v);for(;p!==c;){let S=m[p],E=0;for(let C=v-1;(S!==0||E<d)&&C!==-1;C--,E++)S+=256*g[C]>>>0,g[C]=S%r>>>0,S=S/r>>>0;if(S!==0)throw new Error("Non-zero carry");d=E,p++}let w=v-d;for(;w!==v&&g[w]===0;)w++;let M=a.repeat(i);for(;w<v;++w)M+=e.charAt(g[w]);return M}function s(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;let i=0,d=0,p=0;for(;m[i]===a;)d++,i++;const c=(m.length-i)*o+1>>>0,v=new Uint8Array(c);for(;m[i];){let S=t[m.charCodeAt(i)];if(S===255)return;let E=0;for(let C=c-1;(S!==0||E<p)&&C!==-1;C--,E++)S+=r*v[C]>>>0,v[C]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");p=E,i++}let g=c-p;for(;g!==c&&v[g]===0;)g++;const w=new Uint8Array(d+(c-g));let M=d;for(;g!==c;)w[M++]=v[g++];return w}function u(m){const i=s(m);if(i)return i;throw new Error("Non-base"+r+" character")}return{encode:l,decodeUnsafe:s,decode:u}}var Bn="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";zn(Bn);function xt(e){return"version"in e}function Kn(e){if(xt(e)){const t=e.message.serialize();for(const[r,a]of e.signatures.entries()){const o=e.message.staticAccountKeys[r];if(a.every(n=>n===0))throw new Error(`Missing required signature for key ${o} at index ${r}`);if(!Ft.verify(a,t,o.toBytes()))throw new Error(`Signature ${r} failed to verify for key ${o}`)}}else e.serialize()}async function Ye(e="Unlabeled transaction",t,r,a=0,o=3e3,n=10){const l=Ut.create({group:!1,timeout:0,spinner:!0,message:e,position:"bottom-right"});try{if(l({caption:"Waiting for user to sign..."}),W().useSquads){const s=await jn(t,r,e,a);await Zn(s,l)}else{const s=await Rn(t,r);await Xn(s,o,n,l)}}catch(s){console.error(s),l({progress:!0,spinner:!1,icon:"error",color:"negative",timeout:5e3,caption:"Error signing transaction"})}}async function Rn(e,t){const r=(await q().connection.getAddressLookupTable(new G("5NrYTRkLRsSSJGgfX2vNRbSXiEFi9yUHV5n7bs7VM9P2"))).value;return await Ke.buildAndSignTransaction(e,t,{connection:q().connection,commitment:"confirmed"},[r])}async function jn(e,t,r,a=0){const o=await q().connection.getLatestBlockhash(),n=new Qt({payerKey:K(),recentBlockhash:o.blockhash,instructions:[]}),l=[],s=(await q().connection.getAddressLookupTable(new G("5NrYTRkLRsSSJGgfX2vNRbSXiEFi9yUHV5n7bs7VM9P2"))).value;return s&&l.push(s),(await Ke.buildDynamicTransactionsNoSigning(e,t)).map(i=>{console.log(i),i.forEach(d=>d.instructions.forEach(p=>{n.instructions.push(p.instruction)}))}),await W().update(),console.log(n),tn.vaultTransactionCreate({blockhash:o.blockhash,feePayer:De().publicKey.value,multisigPda:new G(W().multisigPDA.toString()),transactionIndex:W().getNewTransactionIndex,creator:De().publicKey.value,rentPayer:De().publicKey.value,vaultIndex:0,ephemeralSigners:a,transactionMessage:n,addressLookupTableAccounts:l,memo:r})}async function Zn(e,t){const{sendTransaction:r}=De(),a=await r(e,q().connection,{skipPreflight:!0}),o=await q().connection.getLatestBlockhash();let n;return t({color:"green-5",message:"[1/2] Waiting until processed...",caption:`${a}`}),n=await q().connection.confirmTransaction({signature:a,blockhash:o.blockhash,lastValidBlockHeight:o.lastValidBlockHeight},"processed"),t({color:"green-8",message:"[2/2]  Waiting for confirmation...",caption:`${a}`}),n=await q().connection.confirmTransaction({signature:a,blockhash:o.blockhash,lastValidBlockHeight:o.lastValidBlockHeight},"confirmed"),n.value.err!==null?(t({progress:!0,spinner:!1,icon:"error",color:"negative",timeout:5e3,caption:`Error sending transaction: ${Ae.toString()}`}),{context:n.context,value:Ae(n.value.err)}):(t({color:"positive",timeout:5e3,icon:"done",spinner:!1,message:"Send",caption:`${a}`}),{context:n.context,value:ft(a)})}async function Xn(e,t=3e3,r=10,a){const o=e.transaction.serialize();xt(e.transaction)&&Kn(e.transaction);const n=await q().connection.sendRawTransaction(o,{skipPreflight:!0});let l=0;const s=setInterval(()=>{l<r&&q().connection.sendRawTransaction(o,{skipPreflight:!0}),l++},t);let u;try{a({color:"green-5",message:"[1/2] Waiting until processed...",caption:`${n}`}),u=await q().connection.confirmTransaction({signature:n,...e.rbh},"processed"),a({color:"green-8",message:"[2/2]  Waiting for confirmation...",caption:`${n}`}),u=await q().connection.confirmTransaction({signature:n,...e.rbh},"confirmed")}finally{clearInterval(s)}return u.value.err!==null?(a({progress:!0,spinner:!1,icon:"error",color:"negative",timeout:5e3,caption:`Error sending transaction: ${Ae.toString()}`}),{context:u.context,value:Ae(u.value.err)}):(a({color:"positive",timeout:5e3,icon:"done",spinner:!1,message:"Send",caption:`${n}`}),{context:u.context,value:ft(n)})}const Wn=R({__name:"PermissionsAddAccount",setup(e){const t=[$e],r=$("3q9HnMCZTVnLwgHzzTcu9ALi6kJFvnpFcq1TW7gxPeyL"),a=$(t[0]),o=$(0);$();async function n(){const l=ke(),s=[];s.push(Z.PlayerProfile.addKeys(N().playerProfileProgram.value,l,b().playerProfile,de.SagePermissions,$e,[{key:new G(r.value),permissions:de.SagePermissions.all(),expireTime:o.value==0?null:o.value}])),await Ye("Add permission account",s,l),await b().updateStore(K()),console.log("Sending TX")}return(l,s)=>(x(),A(se,{bordered:"",flat:""},{default:h(()=>[f(st,null,{default:h(()=>s[3]||(s[3]=[D("div",{class:"text-weight-thin text-center col"},"Add a new wallet to the permission list",-1)])),_:1}),f(V,null,{default:h(()=>[f(Qe,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=u=>r.value=u),label:"Key",square:""},null,8,["modelValue"]),f(mt,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=u=>a.value=u),options:t,label:"Scope",square:""},null,8,["modelValue"]),f(Qe,{modelValue:o.value,"onUpdate:modelValue":s[2]||(s[2]=u=>o.value=u),label:"Expire Time",square:"",type:"number"},null,8,["modelValue"])]),_:1}),f(st,null,{default:h(()=>[f(Ce,{class:"full-width",color:"primary",onClick:n},{default:h(()=>s[4]||(s[4]=[H("ADD")])),_:1})]),_:1})]),_:1}))}});class Be{signer;constructor(t){this.signer=t}createPlayerProfileIx(t,r){return Z.PlayerProfile.createProfile(N().playerProfileProgram.value,r,[{key:t,expireTime:null,scope:xe,permissions:Z.ProfilePermissions.all()}],1)}createPlayerProfileNameIx(t){const{instructions:r}=Z.PlayerProfile.setName(N().playerProfileProgram.value,{profile:b().playerProfile,key:this.signer,playerProfileProgram:N().playerProfileProgram.value},t);return r}createChooseFactionIx(t){const{instructions:r}=Me.ProfileFactionAccount.chooseFaction(N().profileFactionProgram.value,{profile:b().playerProfile,key:this.signer,playerProfileProgram:N().playerProfileProgram.value},t);return r}createSagePlayerProfileIx(){return de.SagePlayerProfile.registerSagePlayerProfile(N().sageProgram.value,b().playerProfileAddress,Ue().game.key,Ue().game.data.gameState)}createPointsIx(t){const{instructions:r}=zt.UserPoints.createUserPointAccount(N().pointsProgram.value,b().playerProfile.key,t);return r}addSageKeyToProfileIx(t,r,a=null){return Z.PlayerProfile.addKeys(N().playerProfileProgram.value,this.signer,b().playerProfile,de.SagePermissions,$e,[{key:t,permissions:r,expireTime:a}])}removeKeyFromProfileIx(t){return Z.PlayerProfile.removeKeys(N().playerProfileProgram.value,{profileKey:b().playerProfile?.key,key:this.signer,keyIndex:0,playerProfileProgram:N().playerProfileProgram.value},this.signer.publicKey(),t)}}const Gn={class:"col"},Jn=R({__name:"PermissionEditable",props:["publicKey","scope","inputPermissions","expireTime"],setup(e){const t=e,r=$();t.scope.toString()==xe.toString()&&(r.value=Z.ProfilePermissions.fromPermissions(t.inputPermissions)),t.scope.toString()==$e.toString()&&(r.value=de.SagePermissions.fromPermissions(t.inputPermissions));async function a(){const n=ke(),l=[],s=new Be(n);l.push(s.removeKeyFromProfileIx([1,2])),await Ye("Update profile permissions",l,n),await b().updateStore(K())}async function o(){const n=ke(),l=[],s=new Be(n);l.push(s.removeKeyFromProfileIx([1,2])),l.push(s.addSageKeyToProfileIx(new G(t.publicKey.toString()),r.value,t.expireTime>=0?null:new Bt(t.expireTime))),await Ye("Update profile permissions",l,n),await b().updateStore(K())}return(n,l)=>(x(),F(oe,null,[r.value?(x(),A(V,{key:0},{default:h(()=>[(x(!0),F(oe,null,me(Object.keys(r.value),s=>(x(),F("div",{key:s,class:"row"},[D("div",Gn,B(s),1),D("div",null,[f(ne,{modelValue:r.value[s],"onUpdate:modelValue":u=>r.value[s]=u,disable:e.scope.toString()==Y(xe).toString(),"checked-icon":"check",dense:"",label:"","unchecked-icon":"clear"},null,8,["modelValue","onUpdate:modelValue","disable"])])]))),128))]),_:1})):Ie("",!0),e.scope.toString()!=Y(xe).toString()?(x(),A(V,{key:1,class:"q-gutter-x-sm row"},{default:h(()=>[f(Ce,{class:"col",color:"primary",label:"Delete",onClick:Ge(a,["prevent"])}),f(Ce,{disable:r.value?.getPermissions().toString()==e.inputPermissions.toString(),class:"col",color:"primary",label:"Update",onClick:Ge(o,["prevent"])},null,8,["disable"])]),_:1})):Ie("",!0)],64))}}),ea={class:"row"},ta={class:"row"},na={class:"row"},aa=R({__name:"PlayerProfilePermissions",setup(e){return(t,r)=>(x(),A(se,{bordered:"",flat:""},{default:h(()=>[f(V,{class:"row items-center q-gutter-md"},{default:h(()=>[f(ce,{name:"vpn_key",size:"md"}),r[0]||(r[0]=D("div",{class:"text-h6"},"Permissions",-1))]),_:1}),Y(b)().playerProfile?(x(),A(V,{key:0,class:"q-gutter-y-md"},{default:h(()=>[(x(!0),F(oe,null,me(Y(b)().playerProfile.profileKeys,(a,o)=>(x(),A(se,{key:o,bordered:"",class:"col",flat:""},{default:h(()=>[f(V,null,{default:h(()=>[D("div",ea,[r[1]||(r[1]=D("div",{class:"col"},"Key",-1)),D("div",null,B(a.key),1)]),D("div",ta,[r[2]||(r[2]=D("div",{class:"col"},"Scope",-1)),D("div",null,B(a.scope),1)]),D("div",na,[r[3]||(r[3]=D("div",{class:"col"},"ExpireTime",-1)),D("div",null,B(a.expireTime),1)])]),_:2},1024),f(V,null,{default:h(()=>[f(Jn,{"expire-time":a.expireTime,"input-permissions":a.permissions,publicKey:a.key,scope:a.scope},null,8,["expire-time","input-permissions","publicKey","scope"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):Ie("",!0),f(V,null,{default:h(()=>[f(Wn)]),_:1})]),_:1}))}}),ra={class:"col row q-gutter-sm"},oa={class:"col row"},sa={class:"col row q-gutter-sm"},ia={class:"col row"},la={class:"col row q-gutter-sm"},ua={class:"col row"},ca={class:"col row q-gutter-sm"},da={class:"col row"},fa=R({__name:"CreateAccounts",setup(e){const t=$(!1),r=$(!1),a=$(!1),o=$(!1),n=$([]),l=[Me.Faction.MUD,Me.Faction.ONI,Me.Faction.Ustur],s=$("test"),u=$(l[0]);i();const m=I(()=>({playerProfile:b().playerProfile,faction:b().factionProfile,sagePlayerProfile:b().sageProfile,pointsCategories:b().points.flatMap(p=>p.points?.key)}));re(()=>m,()=>i(),{deep:!0});function i(){t.value=!1,r.value=!1,a.value=!1,o.value=!1,n.value=b().points.map(()=>!1),b().playerProfileAddress||(t.value=!0),b().playerProfileAddress&&(b().nameProfile||(r.value=!0),b().factionProfile||(a.value=!0),b().sageProfile||(o.value=!0),n.value=b().points.map(p=>!p.points?.key))}async function d(){const p=ke(),c=[],v=new Be(p);let g=0;const w=[];if(t.value){let M;if(W().useSquads){const[S]=nn({multisigPda:new G(W().multisigPDA.toString()),index:W().getNewTransactionIndex});M=Tt(an({transactionPda:S,ephemeralSignerIndex:0})[0]),g+=1}else M=Ke.keypairToAsyncSigner(Kt.generate());c.push(v.createPlayerProfileIx(K(),M)),w.push("playerProfile")}if(r.value){if(!s.value)throw Error("Player name can not be empty!");c.push(v.createPlayerProfileNameIx(s.value)),w.push("nameProfile")}if(a.value){if(!u.value)throw Error("Please select a faction!");c.push(v.createChooseFactionIx(u.value)),w.push("factionProfile")}o.value&&(c.push(v.createSagePlayerProfileIx()),w.push("sageProfile")),n.value.forEach((M,S)=>{M&&(c.push(v.createPointsIx(_t.find(E=>E.kind==b().points[S].category)?.key??new G(""))),w.push(`points-${Fe(b().points[S].category)}`))}),await Ye(`Instructions create: ${w.join(", ")}`,c,p,g),await b().updateStore(K())}return(p,c)=>(x(),A(se,{bordered:"",flat:""},{default:h(()=>[f(V,{class:"row items-center q-gutter-md"},{default:h(()=>[f(ce,{name:"create",size:"md"}),c[6]||(c[6]=D("div",{class:"text-h6"},"Create Accounts",-1))]),_:1}),f(V,null,{default:h(()=>[f(gt,{bordered:"",class:"rounded-borders",separator:""},{default:h(()=>[te((x(),A(ae,{clickable:""},{default:h(()=>[f(ne,{modelValue:t.value,"onUpdate:modelValue":c[0]||(c[0]=v=>t.value=v),"checked-icon":"check",color:"secondary","unchecked-icon":"clear"},null,8,["modelValue"]),D("div",null,[f(z,null,{default:h(()=>c[7]||(c[7]=[H("Profile")])),_:1}),f(X,{caption:""},{default:h(()=>c[8]||(c[8]=[H("Create player profile")])),_:1})])]),_:1})),[[le]]),te((x(),A(ae,{clickable:""},{default:h(()=>[D("div",ra,[D("div",oa,[f(ne,{modelValue:r.value,"onUpdate:modelValue":c[1]||(c[1]=v=>r.value=v),"checked-icon":"check",color:"secondary","unchecked-icon":"clear"},null,8,["modelValue"]),D("div",null,[f(z,null,{default:h(()=>c[9]||(c[9]=[H("Name")])),_:1}),f(X,{caption:""},{default:h(()=>c[10]||(c[10]=[H("Create player name")])),_:1})])]),f(Qe,{modelValue:s.value,"onUpdate:modelValue":c[2]||(c[2]=v=>s.value=v),class:"col",dense:"",label:"Player name"},null,8,["modelValue"])])]),_:1})),[[le]]),te((x(),A(ae,{clickable:""},{default:h(()=>[D("div",sa,[D("div",ia,[f(ne,{modelValue:a.value,"onUpdate:modelValue":c[3]||(c[3]=v=>a.value=v),"checked-icon":"check",color:"secondary","unchecked-icon":"clear"},null,8,["modelValue"]),D("div",null,[f(z,null,{default:h(()=>c[11]||(c[11]=[H("Faction")])),_:1}),f(X,{caption:""},{default:h(()=>c[12]||(c[12]=[H("Choose faction")])),_:1})])]),f(mt,{modelValue:u.value,"onUpdate:modelValue":c[4]||(c[4]=v=>u.value=v),"option-label":v=>Y(kt)(v),options:l,class:"col",dense:""},null,8,["modelValue","option-label"])])]),_:1})),[[le]]),te((x(),A(ae,{clickable:""},{default:h(()=>[D("div",la,[D("div",ua,[f(ne,{modelValue:o.value,"onUpdate:modelValue":c[5]||(c[5]=v=>o.value=v),"checked-icon":"check",color:"secondary","unchecked-icon":"clear"},null,8,["modelValue"]),D("div",null,[f(z,null,{default:h(()=>c[13]||(c[13]=[H("Sage Profile")])),_:1}),f(X,{caption:""},{default:h(()=>c[14]||(c[14]=[H("Create sage profile")])),_:1})])])])]),_:1})),[[le]]),(x(!0),F(oe,null,me(Y(b)().points,(v,g)=>te((x(),A(ae,{key:g,clickable:""},{default:h(()=>[D("div",ca,[D("div",da,[f(ne,{modelValue:n.value[g],"onUpdate:modelValue":w=>n.value[g]=w,"checked-icon":"check",color:"secondary","unchecked-icon":"clear"},null,8,["modelValue","onUpdate:modelValue"]),D("div",null,[f(z,null,{default:h(()=>[H("Points "+B(Y(Fe)(v.category)),1)]),_:2},1024),f(X,{caption:""},{default:h(()=>c[15]||(c[15]=[H("Create point")])),_:1})])])])]),_:2},1024)),[[le]])),128))]),_:1})]),_:1}),f(V,null,{default:h(()=>[f(Ce,{class:"full-width",color:"primary",label:"Send",onClick:d})]),_:1})]),_:1}))}}),ga={class:"col"},Da=R({__name:"PlayerProfile",setup(e){Rt(async()=>{await t()}),re(()=>K(),async()=>{await t()});async function t(){await b().updateStore(K()),await Ue().updateStore()}const r=$("overview");return(a,o)=>(x(),F("div",ga,[f(It,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=n=>r.value=n),align:"justify","inline-label":""},{default:h(()=>[f(Xe,{icon:"dashboard",label:"Overview",name:"overview"}),f(Xe,{icon:"settings",label:"Permissions",name:"permissions"})]),_:1},8,["modelValue"]),f(gn,{modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=n=>r.value=n)},{default:h(()=>[f(at,{class:"q-gutter-md",name:"overview"},{default:h(()=>[f(Qn),f(fa)]),_:1}),f(at,{name:"permissions"},{default:h(()=>[f(aa)]),_:1})]),_:1},8,["modelValue"])]))}});export{Da as default};
