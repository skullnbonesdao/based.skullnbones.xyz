import{Q as A}from"./QPage-hTKtXXhp.js";import{aa as h,an as q,ac as r,ad as l,ar as E,E as x,b8 as N,ae as w,af as i,am as p,aj as f,ah as m,al as B,ag as $,K as U,F as k,ak as s,aF as G}from"./index-COgUWfzO.js";import{p as j}from"./QSelect-qA4vIaHT.js";import{Q as S}from"./QSeparator-DpXbUoig.js";import{b as F,h as P,f as D,u as T,c as _,a as u,L as W,s as v,e as g,Q}from"./LoadingAnimation-D_zmzWNE.js";import{G as L,Q as H,a as R,_ as C,u as d,b as V}from"./InfoBanner.vue_vue_type_script_setup_true_lang-CIzYiA4f.js";import{Q as K}from"./QInput-BilcvxG3.js";import"./index-DVKssMzM.js";import"./use-checkbox-CTqGjcbb.js";import"./QImg-CmbOHsdO.js";const M=h({__name:"CrewDeposit",props:["id"],setup(y){const o=y,a=q();async function b(){const t=F(),e=[],n=new L(t);try{e.push(...await n.depositCrewToGameIx(o.id.toString())),e.length>0&&await P("Instructions Deposit",e,t,D.DEFAULT_FEE)}catch(c){a.notify({type:"warning",message:"warning",caption:c.toString(),position:"bottom-right"})}}return(t,e)=>(r(),l(E,{color:"primary","icon-right":"call_made",label:"Deposit",onClick:b}))}}),Y=h({__name:"CrewWithdraw",props:["id"],setup(y){const o=y,a=q();async function b(){const t=F(),e=[],n=new L(t);try{e.push(...await n.withdrawCrewFromGameIx(o.id.toString())),await P("Instructions Withdraw",e,t,D.DEFAULT_FEE)}catch(c){a.notify({type:"warning",message:"warning",caption:c.toString(),position:"bottom-right"})}}return(t,e)=>(r(),l(E,{color:"primary","icon-right":"call_received",label:"Withdraw",onClick:b}))}}),z={class:"text-grey-5"},J={key:0},O={key:1},X={key:2},Z={key:3},ee={key:4},te={key:5},ae={key:6},I=h({__name:"CrewTable",props:{rows:{type:{},required:!0},action:{type:String}},setup(y){const o=y,a=x(),b=[{name:"symbol",required:!0,label:"Symbol",align:"left",field:t=>t.content.metadata.symbol,sortable:!0},{name:"id_name",required:!0,label:"ID-Name",align:"left",field:t=>t.content.metadata.name,sortable:!0},{name:"name",required:!0,label:"Name",align:"left",field:t=>t.content.metadata.attributes.find(e=>e.trait_type=="name")?.value,sortable:!0},{name:"species",required:!0,label:"Species",align:"left",field:t=>t.content.metadata.attributes.find(e=>e.trait_type=="species")?.value,sortable:!0},{name:"sex",required:!0,label:"Sex",align:"left",field:t=>t.content.metadata.attributes.find(e=>e.trait_type=="sex")?.value,sortable:!0},{name:"age",required:!0,label:"Sex",align:"left",field:t=>t.content.metadata.attributes.find(e=>e.trait_type=="age")?.value,sortable:!0},{name:"rarity",required:!0,label:"Rarity",align:"left",field:t=>t.content.metadata.attributes.find(e=>e.trait_type=="rarity")?.value,sortable:!0},{name:"action",required:!0,label:"Action",align:"right",field:t=>t.content.metadata.attributes.find(e=>e.trait_type=="rarity")?.value,sortable:!0}];return(t,e)=>(r(),l(R,{columns:b,filter:a.value,pagination:{rowsPerPage:0,sortBy:"name",descending:!0},rows:y.rows,flat:"","hide-bottom":"","row-key":"name",square:""},N({"top-left":w(()=>[B("div",z,"Found "+f(y.rows.length)+" Items",1)]),"top-right":w(()=>[i(K,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value=n),borderless:"",debounce:"300",dense:"",placeholder:"Search"},{append:w(()=>[i($,{name:"search"})]),_:1},8,["modelValue"])]),_:2},[o?{name:"body-cell",fn:w(n=>[i(H,{props:n},{default:w(()=>[n.col.name=="symbol"?(r(),p("div",J,f(n.row.content.metadata.symbol),1)):n.col.name=="id_name"?(r(),p("div",O,f(n.row.content.metadata.name),1)):n.col.name=="name"?(r(),p("div",X,f(n.row.content.metadata.attributes.find(c=>c.trait_type=="name")?.value),1)):n.col.name=="species"?(r(),p("div",Z,f(n.row.content.metadata.attributes.find(c=>c.trait_type=="species")?.value),1)):n.col.name=="sex"?(r(),p("div",ee,f(n.row.content.metadata.attributes.find(c=>c.trait_type=="sex")?.value),1)):n.col.name=="age"?(r(),p("div",te,f(n.row.content.metadata.attributes.find(c=>c.trait_type=="age")?.value),1)):n.col.name=="rarity"?(r(),p("div",ae,f(n.row.content.metadata.attributes.find(c=>c.trait_type=="rarity")?.value),1)):m("",!0),n.col.name=="action"&&y.action=="deposit"?(r(),l(M,{key:7,id:n.row.id},null,8,["id"])):m("",!0),n.col.name=="action"&&y.action=="withdraw"?(r(),l(Y,{key:8,id:n.row.id},null,8,["id"])):m("",!0)]),_:2},1032,["props"])]),key:"0"}:void 0]),1032,["filter","rows"]))}}),ne={key:1},we=h({__name:"PortalPage",setup(y){const o=x("deposit"),a=x("ship");return U(async()=>{await T().updateStore(_()),await u().updateStore()}),k(()=>_(),async()=>{await T().updateStore(_())}),k(()=>u().starbase,async()=>{await u().updateStarbasePlayer(),await d().updateStore(_())}),k(()=>u().starbases,()=>{u().starbase=u().starbases.find(b=>v.byteArrayToString(b.data.name).toLowerCase().includes("Central".toLowerCase())&&v.byteArrayToString(b.data.name).toLowerCase().includes((G.Faction[T().factionProfile?.data.faction??0]??"none").toLowerCase()))}),(b,t)=>s(u)().starbases?.length?(r(),l(A,{key:1,class:""},{default:w(()=>[i(j,{modelValue:s(u)().starbase,"onUpdate:modelValue":t[0]||(t[0]=e=>s(u)().starbase=e),disable:!0,"option-label":e=>s(v.byteArrayToString)(e.data.name),options:s(u)().starbases?.filter(e=>s(v.byteArrayToString)(e.data.name).includes("Central")),class:"",label:"Selected Starbase",square:"",standout:""},{prepend:w(()=>[i($,{name:"home"})]),_:1},8,["modelValue","option-label","options"]),s(u)().starbase?m("",!0):(r(),l(C,{key:0,message:"Please select a starabse"})),s(u)().starbase?(r(),p("div",ne,[i(S),i(Q,{modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value=e),"active-bg-color":"secondary",align:"justify","inline-label":""},{default:w(()=>[i(g,{icon:"call_made",label:"Deposit",name:"deposit"}),i(g,{icon:"call_received",label:"Withdraw",name:"withdraw"})]),_:1},8,["modelValue"]),i(S),i(Q,{modelValue:a.value,"onUpdate:modelValue":t[2]||(t[2]=e=>a.value=e),"active-bg-color":"secondary",align:"justify","inline-label":""},{default:w(()=>[i(g,{icon:"sailing",label:"Ships",name:"ship"}),i(g,{icon:"category",label:"Resources",name:"resource"}),i(g,{icon:"person",label:"Crew",name:"crew"})]),_:1},8,["modelValue"]),i(S),!s(d)().walletTokenAccounts&&(a.value=="ship"||a.value=="resource")?(r(),l(C,{key:0,message:`No ${a.value}s found to ${o.value}`},null,8,["message"])):m("",!0),!s(d)().walletCrewAccounts&&a.value=="crew"?(r(),l(C,{key:1,message:`No ${a.value} found to ${o.value}`},null,8,["message"])):m("",!0),s(d)().walletTokenAccounts&&(a.value=="ship"||a.value=="resource")&&o.value=="deposit"?(r(),l(V,{key:2,action:o.value,"item-type":a.value,rows:s(d)().walletTokenAccounts?.filter(e=>e.itemType==a.value)},null,8,["action","item-type","rows"])):m("",!0),s(d)().gameTokenAccounts&&(a.value=="ship"||a.value=="resource")&&o.value=="withdraw"?(r(),l(V,{key:3,action:o.value,"item-type":a.value,rows:s(d)().gameTokenAccounts?.filter(e=>e.itemType==a.value)},null,8,["action","item-type","rows"])):m("",!0),s(d)().walletCrewAccounts&&a.value=="crew"&&o.value=="deposit"?(r(),l(I,{key:4,action:o.value,rows:s(d)().walletCrewAccounts},null,8,["action","rows"])):m("",!0),s(d)().gameCrewAccounts&&a.value=="crew"&&o.value=="withdraw"?(r(),l(I,{key:5,action:o.value,rows:s(d)().gameCrewAccounts},null,8,["action","rows"])):m("",!0)])):m("",!0)]),_:1})):(r(),l(A,{key:0,class:"row justify-center items-center"},{default:w(()=>[i(W)]),_:1}))}});export{we as default};
